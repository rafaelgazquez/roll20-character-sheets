<input type="radio" name="attr_tab" class="sheet-tab sheet-tab1" value="1" checked="checked"/><span data-i18n-title="tab-general" title="General"></span>
<input type="radio" name="attr_tab" class="sheet-tab sheet-tab2" value="2"/><span data-i18n-title="tab-magic" title="Magic"></span>
<input type="radio" name="attr_tab" class="sheet-tab sheet-tab3" value="3"/><span data-i18n-title="tab-psychic" title="Psychic"></span>
<input type="radio" name="attr_tab" class="sheet-tab sheet-tab4" value="4"/><span data-i18n-title="tab-ki" title="Ki"></span>
<input type="radio" name="attr_tab" class="sheet-tab sheet-tab5" value="5"/><span data-i18n-title="tab-armory" title="Armory"></span>

<div class="sheet-tab-content sheet-tab1"><!-- general page tab -->
<div class="sheet-page_wrapper sheet-wrapper">
	<div class="sheet-style_row"> <!-- first row -->
		<div class="sheet-wrapper" style="top:0px;"><!-- character information box -->
			<div class="sheet-title" style="margin-bottom:0px;" data-i18n="char-info">Character Information</div>
			<div class="sheet-dark_row">
				<div class="sheet-cell" style="width:350px;" data-i18n="name">Name</div>
			</div>
			<div class="sheet-style_row">
				<input type="text" name="attr_character_name" style="width:360px;"disabled="true;"/>
			</div>
			<div class="sheet-dark_row">
				<div class="sheet-cell" style="width:100px;" data-i18n="char-gender">Gender</div>
				<div class="sheet-cell" style="width:60px;" data-i18n="char-height">Height</div>
				<div class="sheet-cell" style="width:60px;" data-i18n="char-weight">Weight</div>
				<div class="sheet-cell" style="width:50px;" data-i18n="char-size">Size</div>
				<div class="sheet-cell" style="width:50px;" data-i18n="char-appearance">Appear.</div>
			</div>
			<div class="sheet-style_row">
				<input type="text" name="attr_character_gender" style="width:120px;"/>
				<input type="text" name="attr_character_height" style="width:60px; "/>
				<input type="text" name="attr_character_weight" style="width:60px;"/>
				<input type="number" name="attr_character_size" value="10" min="0" style="width:50px;"/>
				<input type="number" name="attr_character_appearance" value="5" min="0" max="10" style="width:50px;"/>  
			</div>
			<div class="sheet-dark_row">
				<div class="sheet-cell " style="width:150px;" data-i18n="race">Race</div>
				<div class="sheet-cell" style="width:150px;" data-i18n="class">Class</div>
				<div class="sheet-cell" style="width:50px;" data-i18n="age">Age</div>
			</div>
			<div class="sheet-style_row">
				<input type="text" name="attr_character_race" style="width:150px;"/>
				<input type="text" name="attr_character_class" style="width:150px;"/>
				<input type="number" name="attr_character_age" value="18" min="0" style="width:50px;"/>
			</div>
			<div class="sheet-dark_row">
				<div class="sheet-cell" style="width:50px;" data-i18n="level">Level</div>
				<div class="sheet-cell" style="width:80px;" data-i18n="development-points">DP</div>
				<div class="sheet-cell" style="width:50px;" data-i18n="presence">Presence</div>
				<div class="sheet-cell" style="width:80px;" data-i18n="xperience-points">XP</div>
				<div class="sheet-cell" style="width:80px;" data-i18n="level-next">Next Level</div>
			</div>
			<div class="sheet-style_row">
				<input type="number" name="attr_character_level" value="1" min="0" style="width:50px;"/>
				<input type="number" name="attr_DP" value="( @{character_level}*100 ) + 500" disabled="true" style="width:80px;"/>
				<input type="number" name="attr_presence" value="(@{character_level}*100 +500)/20" disabled="true" style="width:50px;"/>
				<input type="number" name="attr_character_xp" value="0" min="0" style="width:80px;"/>
				<input type="number" name="attr_character_nextlvl" min="0" value="100" style="width:80px;"/>
			</div>
		</div><!-- end character information -->
    <div style="top:0px;display:inline-block">
    	<div class="sheet-wrapper"><!-- Resistances -->
        <div class="sheet-title" style="margin-bottom:0px;" data-i18n="resistances">Resistances</div>
        <div class="sheet-dark_row">
          <div class="sheet-cell" style="width:40px;" data-i18n="type">Type</div>
          <div class="sheet-cell" style="width:50px;" data-i18n="special-bonus">Special</div>
          <div class="sheet-cell" style="width:50px;" data-i18n="final-value">Final</div>
        </div>
        <div class="sheet-style_row">
          <div class="sheet-sidebubbled" style="width:40px;" data-i18n="physical-resistance-short">PhR</div>
          <input type="number" name="attr_resist_physical_special" value="0" style="width:50px;" />
          <input type="number" name="attr_resist_physical_final" style="width:50px;"
          value="@{presence}+@{con_mod}+@{body_of_emptiness}+@{resist_physical_special}" disabled="true"/>
          <button type="roll" class="sheet-d100-roll-button" name="roll_resist_physical" value="&{template:ABFini} {{name=^{physical-resistance}}} {{desc=^{physical-resistance-short}}} {{roll=[[1d100+@{resist_physical_final}+?{Modifiers?|0}]]}}"></button>
        </div>
        <div class="sheet-style_row">
          <div class="sheet-sidebubbled" style="width:40px;" data-i18n="disease-resistance-short">DR</div>
          <input type="number" name="attr_resist_disease_special" value="0"/ style="width:50px;">
          <input type="number" name="attr_resist_disease_final" style="width:50px;" 
          value="@{presence}+@{con_mod}+@{body_of_emptiness}+@{resist_disease_special}" disabled="true"/>
          <button type="roll" class="sheet-d100-roll-button" name="roll_resist_disease" value="&{template:ABFini} {{name=^{disease-resistance}}} {{desc=^{disease-resistance-short}}} {{roll=[[1d100+@{resist_disease_final}+?{Modifiers?|0}]]}}"></button>
        </div>
        <div class="sheet-style_row">
          <div class="sheet-sidebubbled" style="width:40px;" data-i18n="poison-resistance-short">PsnR</div>
          <input type="number" name="attr_resist_poison_special" value="0" style="width:50px;"/>
          <input type="number" name="attr_resist_poison_final" style="width:50px;" 
          value="@{presence}+@{con_mod}+@{body_of_emptiness}+@{resist_poison_special}" disabled="true"/>
          <button type="roll" class="sheet-d100-roll-button" name="roll_resist_poison" value="&{template:ABFini} {{name=^{poison-resistance}}} {{desc=^{poison-resistance-short}}} {{roll=[[1d100+@{resist_poison_final}+?{Modifiers?|0}]]}}"></button>
        </div>    
        <div class="sheet-style_row">
          <div class="sheet-sidebubbled" style="width:40px;" data-i18n="magic-resistance-short">MR</div>
          <input type="number" name="attr_resist_magic_special" value="0" style="width:50px;"/>
          <input type="number" name="attr_resist_magic_final" style="width:50px;" 
          value="@{presence}+@{pow_mod}+@{body_of_emptiness}+@{resist_magic_special}" disabled="true"/>
          <button type="roll" class="sheet-d100-roll-button" name="roll_resist_magic" value="&{template:ABFini} {{name=^{magic-resistance}}} {{desc=^{magic-resistance-short}}} {{roll=[[1d100+@{resist_magic_final}+?{Modifiers?|0}]]}}"></button>
        </div>
        <div class="sheet-style_row">
          <div class="sheet-sidebubbled" style="width:40px;" data-i18n="psychic-resistance-short">PsyR</div>
          <input type="number" name="attr_resist_psychic_special" value="0" style="width:50px;" />
          <input type="number" name="attr_resist_psychic_final" style="width:50px;" 
          value="@{presence}+@{wp_mod}+@{body_of_emptiness}+@{resist_psychic_special}" disabled="true"/>
          <button type="roll" class="sheet-d100-roll-button" name="roll_resist_psychic" value="&{template:ABFini} {{name=^{psychic-resistance}}} {{desc=^{psychic-resistance-short}}} {{roll=[[1d100+@{resist_psychic_final}+?{Modifiers?|0}]]}}"></button>
        </div>
      </div><br/><!-- end resistances -->
      <div class="sheet-wrapper"><!-- All Action Modifier -->
        <div class="sheet-title" style="margin-bottom:0px;" data-i18n="all-action-modifier">All Action Mod</div>
        <div class="sheet-style_row">
          <input type="number" name="attr_aam" value="0" style="width:190px;" />
          <input type="hidden" name="attr_aap" disabled="true" value="(((@{aam}) - abs(@{aam})) / 2)" /><!-- All Action Penalty -->
        </div>
      </div><!-- end All Action Modifier -->
    </div>
    <div class="sheet-wrapper" style="z-index:2;min-width:185px;"><!-- Characteristics
    
    For use of characteristics elsewhere in the sheet, use the first 3 letters of each item, such as agi for agility.
    The exception to this is willpower, which will be abbreviated as it is in the core rulebook as wp.
    All items will be lowercase, and the modifiers from these characteristics will be (shorthand for item)_mod.
    --> 
    <div class="sheet-title" style="font-size:20pt;" data-i18n="characteristics" >Characteristics</div>
      <div class="sheet-style_row sheet-clear"><!-- Agility -->
      	<input type="checkbox" name="attr_agi_option" class="sheet-option"><span class="sheet-option"></span>
      	<div class="sheet-wrapper sheet-expanded">
    	  <div class="sheet-title sheet-smalltitle sheet-physical" data-i18n="agility">
    	    Agility
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="base-value">Base</div>
    	    <input type="number" name="attr_agi" max="20" min="1" maxlength="2" value="5" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="special-bonus">Special</div>
    	    <input type="number" name="attr_agi_special" max="20" min="0" maxlength="2" value="0" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="temporary-bonus">Temp.</div>
    	    <input type="number" name="attr_agi_temp" max="20" min="0" maxlength="2" value="0" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-dark_row">
    	    <div class="sheet-cell sheet-actual_cell sheet-longbubble" data-i18n="final-value">Final</div>
    	    <input type="number" name="attr_agi_final" max="20" min="0" maxlength="2" value="@{agi}+@{agi_special}+@{agi_temp}" style="width:40px;" disabled="true"/>
    	  </div>
    	  <div class="sheet-dark_row" style="padding-bottom:3px;">
    	    <div class="sheet-cell sheet-actual_cell sheet-longbubble" data-i18n="modifier">Mod</div>
    	    <select name="attr_agi_mod" class="sheet-characteristic_mod" style="width:50px;"> 
            <option value="-30">-30</option>
            <option value="-20">-20</option>
            <option value="-10">-10</option>
            <option value="-5">-5</option>
            <option value="0" selected="true">0</option>
            <option value="5">+5</option>
            <option value="10">10</option>
            <option value="15">15</option>
            <option value="20">20</option>
            <option value="25">25</option>
            <option value="30">30</option>
            <option value="35">35</option>
            <option value="40">40</option>
            <option value="45">45</option>
          </select>
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="opposed">Opposed</div>
    	    <input type="number" name="attr_agi_opposed" max="20" min="0" maxlength="2" value="0" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-dark_row">
    	    <div class="sheet-cell sheet-actual_cell sheet-longbubble" data-i18n="final-opposed">Final Opp.</div>
    	    <input type="number" name="attr_agi_opposed_final" max="20" min="0" maxlength="2" value="(@{agi_final})+@{agi_opposed}+floor(@{aam}/20)" style="width:40px;" disabled="true"/>
    	  </div>
    	</div>
    	<div class="sheet-compact">
    	  <button type="roll" class="sheet-label" name="roll_agi"
    	  value="&{template:ABFini} {{name=^{agility}}} {{desc=^{agility-short}}} {{roll=[[1d10+(@{agi_final})+?{Modifiers?|0}+?{Fatigue?|0}]]}}">
    	    <span class="sheet-physical sheet-cell" style="width:40px;" data-i18n="agility-short">AGI</span>
    	    <input type="number" name="attr_agi_final" max="20" min="0" maxlength="2" value="@{agi}+@{agi_special}+@{agi_temp}" style="width:40px;" disabled="true"/>
    	  </button>
    	  <button type="roll" class="sheet-label" name="roll_agi_opposed"
    	  value="&{template:ABFini} {{name=^{agility}}} {{desc=^{opposed}}} {{roll=[[1d10+@{agi_opposed_final}+?{Modifiers?|0}+?{Fatigue?|0}]]}}">
    	    <span class="sheet-physical sheet-cell" style="width:40px;" data-i18n="opposed">opposed</span>
    	  </button>
      </div>
    </div><!-- End Agility -->
    <div class="sheet-style_row sheet-clear"><!-- constitution -->
    	<input type="checkbox" name="attr_con_option" class="sheet-option"><span class="sheet-option"></span>
    	<div class="sheet-wrapper sheet-expanded"> 
    	  <div class="sheet-title sheet-smalltitle sheet-physical" data-i18n="constitution">
    	    Constitution
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="base-value">Base</div>
    	    <input type="number" name="attr_con" max="20" min="1" maxlength="2" value="5" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="special-bonus">Special</div>
    	    <input type="number" name="attr_con_special" max="20" min="0" maxlength="2" value="0" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="temporary-bonus">Temp.</div>
    	    <input type="number" name="attr_con_temp" max="20" min="0" maxlength="2" value="0" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-dark_row">
    	    <div class="sheet-cell sheet-actual_cell sheet-longbubble" data-i18n="final-value">Final</div>
    	    <input type="number" name="attr_con_final" max="20" min="0" maxlength="2" value="@{con}+@{con_special}+@{con_temp}" style="width:40px;" disabled="true"/>
    	  </div>
    	  <div class="sheet-dark_row" style="padding-bottom:3px;">
    	    <div class="sheet-cell sheet-actual_cell sheet-longbubble" data-i18n="modifier">Mod</div>
    	    <select name="attr_con_mod" class="sheet-characteristic_mod" style="width:50px;"> 
            <option value="-30">-30</option>
            <option value="-20">-20</option>
            <option value="-10">-10</option>
            <option value="-5">-5</option>
            <option value="0" selected="true">0</option>
            <option value="5">+5</option>
            <option value="10">10</option>
            <option value="15">15</option>
            <option value="20">20</option>
            <option value="25">25</option>
            <option value="30">30</option>
            <option value="35">35</option>
            <option value="40">40</option>
            <option value="45">45</option>
          </select>
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="opposed">Opposed</div>
    	    <input type="number" name="attr_con_opposed" max="20" min="0" maxlength="2" value="0" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-dark_row">
    	    <div class="sheet-cell sheet-actual_cell sheet-longbubble" data-i18n="final-opposed">Final Opp.</div>
    	    <input type="number" name="attr_con_opposed_final" max="20" min="0" maxlength="2" value="(@{con_final})+@{con_opposed}+floor(@{aam}/20)" style="width:40px;" disabled="true"/>
    	  </div>
    	</div>
    	<div class="sheet-compact">
    	  <button type="roll" class="sheet-label" name="roll_con"
    	  value="&{template:ABFini} {{name=^{constitution}}} {{desc=^{constitution-short}}} {{roll=[[1d10+(@{con_final})+?{Modifiers?|0}]]}}">
    	    <span class="sheet-physical sheet-cell" style="width:40px;" data-i18n="constitution-short">CON</span>
    	    <input type="number" name="attr_con_final" max="20" min="0" maxlength="2" value="@{con}+@{con_special}+@{con_temp}" style="width:40px;" disabled="true"/>
    	  </button>
    	  <button type="roll" class="sheet-label" name="roll_con_opposed"
    	  value="&{template:ABFini} {{name=^{constitution}}}} {{desc=^{opposed}}}} {{roll=[[1d10+@{con_opposed_final}+?{Modifiers?|0}]]}}">
    	    <span class="sheet-physical sheet-cell" style="width:40px;" data-i18n="opposed">opposed</span>
    	  </button>
      </div>
    </div><!-- End constitution -->
    <div class="sheet-style_row sheet-clear"><!-- dexterity -->
    	<input type="checkbox" name="attr_dex_option" class="sheet-option"><span class="sheet-option"></span>
    	<div class="sheet-wrapper sheet-expanded"> 
    	  <div class="sheet-title sheet-smalltitle sheet-physical" data-i18n="dexterity">
    	    Dexterity
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="base-value">Base</div>
    	    <input type="number" name="attr_dex" max="20" min="1" maxlength="2" value="5" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="special-bonus">Special</div>
    	    <input type="number" name="attr_dex_special" max="20" min="0" maxlength="2" value="0" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="temporary-bonus">Temp.</div>
    	    <input type="number" name="attr_dex_temp" max="20" min="0" maxlength="2" value="0" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-dark_row">
    	    <div class="sheet-cell sheet-actual_cell sheet-longbubble" data-i18n="final-value">Final</div>
    	    <input type="number" name="attr_dex_final" max="20" min="0" maxlength="2" value="@{dex}+@{dex_special}+@{dex_temp}" style="width:40px;" disabled="true"/>
    	  </div>
    	  <div class="sheet-dark_row" style="padding-bottom:3px;">
    	    <div class="sheet-cell sheet-actual_cell sheet-longbubble" data-i18n="modifier">Mod</div>
    	    <select name="attr_dex_mod" class="sheet-characteristic_mod" style="width:50px;"> 
            <option value="-30">-30</option>
            <option value="-20">-20</option>
            <option value="-10">-10</option>
            <option value="-5">-5</option>
            <option value="0" selected="true">0</option>
            <option value="5">+5</option>
            <option value="10">10</option>
            <option value="15">15</option>
            <option value="20">20</option>
            <option value="25">25</option>
            <option value="30">30</option>
            <option value="35">35</option>
            <option value="40">40</option>
            <option value="45">45</option>
          </select>
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="opposed">Opposed</div>
    	    <input type="number" name="attr_dex_opposed" max="20" min="0" maxlength="2" value="0" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-dark_row">
    	    <div class="sheet-cell sheet-actual_cell sheet-longbubble" data-i18n="final-opposed">Final Opp.</div>
    	    <input type="number" name="attr_dex_opposed_final" max="20" min="0" maxlength="2" value="(@{dex_final})+@{dex_opposed}+floor(@{aam}/20)" style="width:40px;" disabled="true"/>
    	  </div>
    	</div>
    	<div class="sheet-compact">
    	  <button type="roll" class="sheet-label" name="roll_dex"
    	  value="&{template:ABFini} {{name=^{dexterity}}} {{desc=^{dexterity-short}}} {{roll=[[1d10+(@{dex_final})+?{Modifiers?|0}+?{Fatigue?|0}]]}}">
    	    <span class="sheet-physical sheet-cell" style="width:40px;" data-i18n="dexterity-short">DEX</span>
    	    <input type="number" name="attr_dex_final" max="20" min="0" maxlength="2" value="@{dex}+@{dex_special}+@{dex_temp}" style="width:40px;" disabled="true"/>
    	  </button>
    	  <button type="roll" class="sheet-label" name="roll_dex_opposed"
    	  value="&{template:ABFini} {{name=^{dexterity}}} {{desc=^{opposed}}} {{roll=[[1d10+@{dex_opposed_final}+?{Modifiers?|0}+?{Fatigue?|0}]]}}">
    	    <span class="sheet-physical sheet-cell" style="width:40px;" data-i18n="opposed">opposed</span>
    	  </button>
      </div>
    </div><!-- End dexterity -->
    <div class="sheet-style_row sheet-clear"><!-- strength -->
    	<input type="checkbox" name="attr_str_option" class="sheet-option"><span class="sheet-option"></span>
    	<div class="sheet-wrapper sheet-expanded"> 
    	  <div class="sheet-title sheet-smalltitle sheet-physical" data-i18n="strength">
    	    Strength
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="base-value">Base</div>
    	    <input type="number" name="attr_str" max="20" min="1" maxlength="2" value="5" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="special-bonus">Special</div>
    	    <input type="number" name="attr_str_special" max="20" min="0" maxlength="2" value="0" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="temporary-bonus">Temp.</div>
    	    <input type="number" name="attr_str_temp" max="20" min="0" maxlength="2" value="0" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-dark_row">
    	    <div class="sheet-cell sheet-actual_cell sheet-longbubble" data-i18n="final-value">Final</div>
    	    <input type="number" name="attr_str_final" max="20" min="0" maxlength="2" value="@{str}+@{str_special}+@{str_temp}" style="width:40px;" disabled="true"/>
    	  </div>
    	  <div class="sheet-dark_row" style="padding-bottom:3px;">
    	    <div class="sheet-cell sheet-actual_cell sheet-longbubble" data-i18n="modifier">Mod</div>
    	    <select name="attr_str_mod" class="sheet-characteristic_mod" style="width:50px;"> 
            <option value="-30">-30</option>
            <option value="-20">-20</option>
            <option value="-10">-10</option>
            <option value="-5">-5</option>
            <option value="0" selected="true">0</option>
            <option value="5">+5</option>
            <option value="10">10</option>
            <option value="15">15</option>
            <option value="20">20</option>
            <option value="25">25</option>
            <option value="30">30</option>
            <option value="35">35</option>
            <option value="40">40</option>
            <option value="45">45</option>
          </select>
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="opposed">Opposed</div>
    	    <input type="number" name="attr_str_opposed" max="20" min="0" maxlength="2" value="0" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-dark_row">
    	    <div class="sheet-cell sheet-actual_cell sheet-longbubble" data-i18n="final-opposed">Final Opp.</div>
    	    <input type="number" name="attr_str_opposed_final" max="20" min="0" maxlength="2" value="(@{str_final})+@{str_opposed}+floor(@{aam}/20)" style="width:40px;" disabled="true"/>
    	  </div>
    	</div>
    	<div class="sheet-compact">
    	  <button type="roll" class="sheet-label" name="roll_str"
    	  value="&{template:ABFini} {{name=^{strength}}} {{desc=^{strength-short}}} {{roll=[[1d10+(@{str_final})+?{Modifiers?|0}+?{Fatigue?|0}]]}}">
    	    <span class="sheet-physical sheet-cell" style="width:40px;" data-i18n="strength-short">STR</span>
    	    <input type="number" name="attr_str_final" max="20" min="0" maxlength="2" value="@{str}+@{str_special}+@{str_temp}" style="width:40px;" disabled="true"/>
    	  </button>
    	  <button type="roll" class="sheet-label" name="roll_str_opposed"
    	  value="&{template:ABFini} {{name=^{strength}}} {{desc=^{opposed}}} {{roll=[[1d10+@{str_opposed_final}+?{Modifiers?|0}+?{Fatigue?|0}]]}}">
    	    <span class="sheet-physical sheet-cell" style="width:40px;" data-i18n="opposed">opposed</span>
    	  </button>
      </div>
    </div><!-- End strength -->
    <div class="sheet-style_row sheet-clear"><!-- intelligence -->
    	<input type="checkbox" name="attr_int_option" class="sheet-option"><span class="sheet-option"></span>
    	<div class="sheet-wrapper sheet-expanded"> 
    	  <div class="sheet-title sheet-smalltitle sheet-physical" data-i18n="intelligence">
    	    Intelligence
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="base-value">Base</div>
    	    <input type="number" name="attr_int" max="20" min="1" maxlength="2" value="5" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="special-bonus">Special</div>
    	    <input type="number" name="attr_int_special" max="20" min="0" maxlength="2" value="0" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="temporary-bonus">Temp.</div>
    	    <input type="number" name="attr_int_temp" max="20" min="0" maxlength="2" value="0" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-dark_row">
    	    <div class="sheet-cell sheet-actual_cell sheet-longbubble" data-i18n="final-value">Final</div>
    	    <input type="number" name="attr_int_final" max="20" min="0" maxlength="2" value="@{int}+@{int_special}+@{int_temp}" style="width:40px;" disabled="true"/>
    	  </div>
    	  <div class="sheet-dark_row" style="padding-bottom:3px;">
    	    <div class="sheet-cell sheet-actual_cell sheet-longbubble" data-i18n="modifier">Mod</div>
    	    <select name="attr_int_mod" class="sheet-characteristic_mod" style="width:50px;"> 
            <option value="-30">-30</option>
            <option value="-20">-20</option>
            <option value="-10">-10</option>
            <option value="-5">-5</option>
            <option value="0" selected="true">0</option>
            <option value="5">+5</option>
            <option value="10">10</option>
            <option value="15">15</option>
            <option value="20">20</option>
            <option value="25">25</option>
            <option value="30">30</option>
            <option value="35">35</option>
            <option value="40">40</option>
            <option value="45">45</option>
          </select>
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="opposed">Opposed</div>
    	    <input type="number" name="attr_int_opposed" max="20" min="0" maxlength="2" value="0" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-dark_row">
    	    <div class="sheet-cell sheet-actual_cell sheet-longbubble" data-i18n="final-opposed">Final Opp.</div>
    	    <input type="number" name="attr_int_opposed_final" max="20" min="0" maxlength="2" value="(@{int_final})+@{int_opposed}+floor(@{aam}/20)" style="width:40px;" disabled="true"/>
    	  </div>
    	</div>
    	<div class="sheet-compact">
    	  <button type="roll" class="sheet-label" name="roll_int"
    	  value="&{template:ABFini} {{name=^{intelligence}}} {{desc=^{intelligence-short}}} {{roll=[[1d10+(@{int_final})+?{Modifiers?|0}]]}}">
    	    <span class="sheet-physical sheet-cell" style="width:40px;" data-i18n="intelligence-short">INT</span>
    	    <input type="number" name="attr_int_final" max="20" min="0" maxlength="2" value="@{int}+@{int_special}+@{int_temp}" style="width:40px;" disabled="true"/>
    	  </button>
    	  <button type="roll" class="sheet-label" name="roll_int_opposed"
    	  value="&{template:ABFini} {{name=^{intelligence}}} {{desc=^{opposed}}} {{roll=[[1d10+@{int_opposed_final}+?{Modifiers?|0}]]}}">
    	    <span class="sheet-physical sheet-cell" style="width:40px;" data-i18n="opposed">opposed</span>
    	  </button>
      </div>
    </div><!-- End intelligence -->
    <div class="sheet-style_row sheet-clear"><!-- perception -->
    	<input type="checkbox" name="attr_per_option" class="sheet-option"><span class="sheet-option"></span>
    	<div class="sheet-wrapper sheet-expanded"> 
    	  <div class="sheet-title sheet-smalltitle sheet-physical" data-i18n="perception">
    	    Perception
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="base-value">Base</div>
    	    <input type="number" name="attr_per" max="20" min="1" maxlength="2" value="5" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="special-bonus">Special</div>
    	    <input type="number" name="attr_per_special" max="20" min="0" maxlength="2" value="0" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="temporary-bonus">Temp.</div>
    	    <input type="number" name="attr_per_temp" max="20" min="0" maxlength="2" value="0" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-dark_row">
    	    <div class="sheet-cell sheet-actual_cell sheet-longbubble" data-i18n="final-value">Final</div>
    	    <input type="number" name="attr_per_final" max="20" min="0" maxlength="2" value="@{per}+@{per_special}+@{per_temp}" style="width:40px;" disabled="true"/>
    	  </div>
    	  <div class="sheet-dark_row" style="padding-bottom:3px;">
    	    <div class="sheet-cell sheet-actual_cell sheet-longbubble" data-i18n="modifier">Mod</div>
    	    <select name="attr_per_mod" class="sheet-characteristic_mod" style="width:50px;"> 
            <option value="-30">-30</option>
            <option value="-20">-20</option>
            <option value="-10">-10</option>
            <option value="-5">-5</option>
            <option value="0" selected="true">0</option>
            <option value="5">+5</option>
            <option value="10">10</option>
            <option value="15">15</option>
            <option value="20">20</option>
            <option value="25">25</option>
            <option value="30">30</option>
            <option value="35">35</option>
            <option value="40">40</option>
            <option value="45">45</option>
          </select>
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="opposed">Opposed</div>
    	    <input type="number" name="attr_per_opposed" max="20" min="0" maxlength="2" value="0" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-dark_row">
    	    <div class="sheet-cell sheet-actual_cell sheet-longbubble" data-i18n="final-opposed">Final Opp.</div>
    	    <input type="number" name="attr_per_opposed_final" max="20" min="0" maxlength="2" value="(@{per_final})+@{per_opposed}+floor(@{aam}/20)" style="width:40px;" disabled="true"/>
    	  </div>
    	</div>
    	<div class="sheet-compact">
    	  <button type="roll" class="sheet-label" name="roll_per"
    	  value="&{template:ABFini} {{name=^{perception}}} {{desc=^{perception-short}}} {{roll=[[1d10+(@{per_final})+?{Modifiers?|0}]]}}">
    	    <span class="sheet-physical sheet-cell" style="width:40px;" data-i18n="perception-short">PER</span>
    	    <input type="number" name="attr_per_final" max="20" min="0" maxlength="2" value="@{per}+@{per_special}+@{per_temp}" style="width:40px;" disabled="true"/>
    	  </button>
    	  <button type="roll" class="sheet-label" name="roll_per_opposed"
    	  value="&{template:ABFini} {{name=^{perception}}} {{desc=^{opposed}}} {{roll=[[1d10+@{per_opposed_final}+?{Modifiers?|0}]]}}">
    	    <span class="sheet-physical sheet-cell" style="width:40px;" data-i18n="opposed">opposed</span>
    	  </button>
      </div>
    </div><!-- End perception -->
    <div class="sheet-style_row sheet-clear"><!-- soul-power -->
    	<input type="checkbox" name="attr_pow_option" class="sheet-option"><span class="sheet-option"></span>
    	<div class="sheet-wrapper sheet-expanded"> 
    	  <div class="sheet-title sheet-smalltitle sheet-physical" data-i18n="soul-power">
    	    Power
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="base-value">Base</div>
    	    <input type="number" name="attr_pow" max="20" min="1" maxlength="2" value="5" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="special-bonus">Special</div>
    	    <input type="number" name="attr_pow_special" max="20" min="0" maxlength="2" value="0" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="temporary-bonus">Temp.</div>
    	    <input type="number" name="attr_pow_temp" max="20" min="0" maxlength="2" value="0" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-dark_row">
    	    <div class="sheet-cell sheet-actual_cell sheet-longbubble" data-i18n="final-value">Final</div>
    	    <input type="number" name="attr_pow_final" max="20" min="0" maxlength="2" value="@{pow}+@{pow_special}+@{pow_temp}" style="width:40px;" disabled="true"/>
    	  </div>
    	  <div class="sheet-dark_row" style="padding-bottom:3px;">
    	    <div class="sheet-cell sheet-actual_cell sheet-longbubble" data-i18n="modifier">Mod</div>
    	    <select name="attr_pow_mod" class="sheet-characteristic_mod" style="width:50px;"> 
            <option value="-30">-30</option>
            <option value="-20">-20</option>
            <option value="-10">-10</option>
            <option value="-5">-5</option>
            <option value="0" selected="true">0</option>
            <option value="5">+5</option>
            <option value="10">10</option>
            <option value="15">15</option>
            <option value="20">20</option>
            <option value="25">25</option>
            <option value="30">30</option>
            <option value="35">35</option>
            <option value="40">40</option>
            <option value="45">45</option>
          </select>
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="opposed">Opposed</div>
    	    <input type="number" name="attr_pow_opposed" max="20" min="0" maxlength="2" value="0" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-dark_row">
    	    <div class="sheet-cell sheet-actual_cell sheet-longbubble" data-i18n="final-opposed">Final Opp.</div>
    	    <input type="number" name="attr_pow_opposed_final" max="20" min="0" maxlength="2" value="(@{pow_final})+@{pow_opposed}+floor(@{aam}/20)" style="width:40px;" disabled="true"/>
    	  </div>
    	</div>
    	<div class="sheet-compact">
    	  <button type="roll" class="sheet-label" name="roll_pow"
    	  value="&{template:ABFini} {{name=^{soul-power}}} {{desc=^{soul-power-short}}} {{roll=[[1d10+(@{pow_final})+?{Modifiers?|0}]]}}">
    	    <span class="sheet-physical sheet-cell" style="width:40px;" data-i18n="soul-power-short">POW</span>
    	    <input type="number" name="attr_pow_final" max="20" min="0" maxlength="2" value="@{pow}+@{pow_special}+@{pow_temp}" style="width:40px;" disabled="true"/>
    	  </button>
    	  <button type="roll" class="sheet-label" name="roll_pow_opposed"
    	  value="&{template:ABFini} {{name=^{soul-power}}} {{desc=^{opposed}}} {{roll=[[1d10+@{pow_opposed_final}+?{Modifiers?|0}]]}}">
    	    <span class="sheet-physical sheet-cell" style="width:40px;" data-i18n="opposed">opposed</span>
    	  </button>
      </div>
    </div><!-- End soul-power -->
    <div class="sheet-style_row sheet-clear"><!-- willpower -->
    	<input type="checkbox" name="attr_wp_option" class="sheet-option"><span class="sheet-option"></span>
    	<div class="sheet-wrapper sheet-expanded"> 
    	  <div class="sheet-title sheet-smalltitle sheet-physical" data-i18n="willpower">
    	    Willpower
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="base-value">Base</div>
    	    <input type="number" name="attr_wp" max="20" min="1" maxlength="2" value="5" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="special-bonus">Special</div>
    	    <input type="number" name="attr_wp_special" max="20" min="0" maxlength="2" value="0" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="temporary-bonus">Temp.</div>
    	    <input type="number" name="attr_wp_temp" max="20" min="0" maxlength="2" value="0" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-dark_row">
    	    <div class="sheet-cell sheet-actual_cell sheet-longbubble" data-i18n="final-value">Final</div>
    	    <input type="number" name="attr_wp_final" max="20" min="0" maxlength="2" value="@{wp}+@{wp_special}+@{wp_temp}" style="width:40px;" disabled="true"/>
    	  </div>
    	  <div class="sheet-dark_row" style="padding-bottom:3px;">
    	    <div class="sheet-cell sheet-actual_cell sheet-longbubble" data-i18n="modifier">Mod</div>
    	    <select name="attr_wp_mod" class="sheet-characteristic_mod" style="width:50px;"> 
            <option value="-30">-30</option>
            <option value="-20">-20</option>
            <option value="-10">-10</option>
            <option value="-5">-5</option>
            <option value="0" selected="true">0</option>
            <option value="5">+5</option>
            <option value="10">10</option>
            <option value="15">15</option>
            <option value="20">20</option>
            <option value="25">25</option>
            <option value="30">30</option>
            <option value="35">35</option>
            <option value="40">40</option>
            <option value="45">45</option>
          </select>
    	  </div>
    	  <div class="sheet-style_row">
    	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="opposed">Opposed</div>
    	    <input type="number" name="attr_wp_opposed" max="20" min="0" maxlength="2" value="0" style="width:40px;"/>
    	  </div>
    	  <div class="sheet-dark_row">
    	    <div class="sheet-cell sheet-actual_cell sheet-longbubble" data-i18n="final-opposed">Final Opp.</div>
    	    <input type="number" name="attr_wp_opposed_final" max="20" min="0" maxlength="2" value="(@{wp_final})+@{wp_opposed}+floor(@{aam}/20)" style="width:40px;" disabled="true"/>
    	  </div>
    	</div>
    	<div class="sheet-compact">
    	  <button type="roll" class="sheet-label" name="roll_wp"
    	  value="&{template:ABFini} {{name=^{willpower}}} {{desc=^{willpower-short}}} {{roll=[[1d10+(@{wp_final})+?{Modifiers?|0}]]}}">
    	    <span class="sheet-physical sheet-cell" style="width:40px;" data-i18n="willpower-short">WIL</span>
    	    <input type="number" name="attr_wp_final" max="20" min="0" maxlength="2" value="@{wp}+@{wp_special}+@{wp_temp}" style="width:40px;" disabled="true"/>
    	  </button>
    	  <button type="roll" class="sheet-label" name="roll_wp_opposed"
    	  value="&{template:ABFini} {{name=^{willpower}}}} {{desc=^{opposed}}}} {{roll=[[1d10+@{wp_opposed_final}+?{Modifiers?|0}]]}}">
    	    <span class="sheet-physical sheet-cell" style="width:40px;" data-i18n="opposed">opposed</span>
    	  </button>
      </div>
    </div><!-- End willpower -->
    </div> <!--End Characteristics -->
   </div><!-- end first row -->
   <div class="sheet-style_row" style="top:0px;"> <!-- second row -->
    <div class="sheet-wrapper"> <!-- movement -->
        <div class="sheet-title" data-i18n="movement">Movement</div>
        <div class="sheet-style_row">
            <div class="sheet-sidebubbled" data-i18n="penalty-short">Pen.</div>
            <input type="number" name="attr_movement_penalty" value="0"  min="0" style="width:43px;"/>
        </div>
        <div class="sheet-style_row">
            <div class="sheet-sidebubbled" data-i18n="bonus">Bonus</div>
            <input type="number" name="attr_movement_bonus" value="0"  min="0" style="width:43px;"/>
        </div>
        <div class="sheet-style_row">
            <div class="sheet-sidebubbled" data-i18n="final-value">Final</div>
            <input type="number" name="attr_movement_final" style="width:43px;"
            value="(@{agi_final})+@{movement_bonus}-abs(@{movement_penalty})+floor(@{aap}/20)" disabled="true"/>
        </div>
        <div class="sheet-dark_row">
            <div class="sheet-cell sheet-actual_cell" data-i18n="full-movement">Full</div>
            <input class="sheet-cell" type="number" name="attr_movement_per_turn" min="0"/>FT
        </div>
        <div class="sheet-dark_row">
            <div class="sheet-cell sheet-actual_cell" data-i18n="1/4-movement">1/4 Move</div>
            <input class="sheet-cell" type="number" name="attr_movement_passive" min="0"/>FT
        </div>
        <div class="sheet-dark_row">
            <div class="sheet-cell sheet-actual_cell"  data-i18n="running-movement">Running</div>
            <input class="sheet-cell" type="number" name="attr_movement_running" min="0"/>FT
        </div>
    </div><!-- end movement -->
    <div class="sheet-wrapper"><!-- life points -->
    <div class="sheet-title" style=""  data-i18n="lifepoints-short">LP</div>
    <div class="sheet-style_row">
        <div class="sheet-sidebubbled"  data-i18n="base-value">Base</div>
        <input type="number" class="sheet-longnum" name="attr_lp_base" value="25+10*(@{con_final})+@{con_mod}-ceil(((@{con_final})-1)/(@{con_final}))*5" disabled="true" style="width:48px;"/>
    </div>
    <div class="sheet-style_row">
        <div class="sheet-sidebubbled" data-i18n="multiples-short">Mult.</div>
        <input type="number" class="sheet-longnum" name="attr_lp_multiples" value="0"  min="0" style="width:48px;"/>
    </div>
    <div class="sheet-style_row">
        <div class="sheet-sidebubbled" data-i18n="class">Class</div>
        <input type="number"class="sheet-longnum" name="attr_lp_class" value="0"  min="0" style="width:48px;"/>
    </div>
    <div class="sheet-style_row">
        <div class="sheet-sidebubbled" data-i18n="special-bonus">Spec.</div>
        <input type="number"class="sheet-longnum" name="attr_lp_special" value="0" style="width:48px;"/>
    </div>
    <div class="sheet-style_row">
        <div class="sheet-sidebubbled" data-i18n="final-value">Final</div>
        <input type="number" class="sheet-longnum" name="attr_lp_max" style="width:48px;"
        value="@{lp_base}+@{lp_multiples}*(@{con_final})+@{lp_class}+@{lp_special}" disabled="true"/>
    </div>
    <div class="sheet-dark_row">
        <div class="sheet-cell sheet-actual_cell" data-i18n="actual-value">Actual</div>
        <input class="sheet-cell sheet-longnum" type="number" name="attr_lp_actual" value="0" min="0" style="width:50px;"/>
    </div>
        
    </div> <!-- end life points -->
    <div class="sheet-wrapper"><!-- Fatigue -->
        <div class="sheet-title"  data-i18n="fatigue">Fatigue</div>
        <div class="sheet-style_row">
            <div class="sheet-sidebubbled" data-i18n="base-value">Base</div>
            <input type="number" name="attr_fatigue_base" value="(@{con_final})" disabled="true" style="width:38px;"/>
        </div>
        <div class="sheet-style_row">
            <div class="sheet-sidebubbled" data-i18n="special-bonus">Spec.</div>
            <input type="number" name="attr_fatigue_special" value="0" style="width:38px;"/>
        </div>
        <div class="sheet-style_row">
            <div class="sheet-sidebubbled" data-i18n="final-value">Final</div>
            <input type="number" name="attr_fatigue_max" value="@{fatigue_special}+@{fatigue_base}" disabled="true" style="width:38px;"/>
        </div>
        <div class="sheet-dark_row">
            <div class="sheet-cell sheet-actual_cell" data-i18n="actual-value">Actual</div>
            <input type="number" class="sheet-cell" name="attr_fatigue_actual" value="0" min="0" style="width:40px;"/>
        </div>
    </div><!-- end fatigue -->
    <div class="sheet-wrapper" style="top:0px;" ><!-- attack -->
    <div class="sheet-title" data-i18n="attack">Attack</div>
    <div class="sheet-style_row">
        <div class="sheet-sidebubbled" data-i18n="base-value">Base</div>
        <input type="number"name="attr_attack_base" value="0"  min="0" />
    </div>
    <div class="sheet-style_row">
        <div class="sheet-sidebubbled" data-i18n="class">Class</div>
    	<input type="number"name="attr_attack_class" value="0"  min="0" />
    </div>
    <div class="sheet-style_row">
        <div class="sheet-sidebubbled" data-i18n="final-value">Final</div>
    	<input type="number"name="attr_attack_final"
        value="@{attack_base}+@{attack_class}+@{dex_mod}+@{aam}" disabled ="true"/>
    </div>
    <div class="sheet-dark_row" style="padding-top:5px;text-align:center;">
      <button type="roll" name="roll_attack" class="sheet-d100-roll-button sheet-widebutton" value="&{template:ABFdefault} {{title=^{attack}}} {{name=^{hit}}} {{roll=[[1d100+@{attack_final}+15*?{Fatigue?|0}+?{Modifiers?|0}]]}}"></button>
    </div>
    </div><!--end attack -->
    <div class="sheet-wrapper" style="top:0px;"><!-- block -->
    <div class="sheet-title" data-i18n="block">Block</div>
    <div class="sheet-style_row">
        <div class="sheet-sidebubbled" data-i18n="base-value">Base</div>
        <input type="number"name="attr_block_base" value="0" min="0" />
    </div>
    <div class="sheet-style_row">
        <div class="sheet-sidebubbled" data-i18n="class">Class</div>
        <input type="number"name="attr_block_class" value="0" min="0" />
    </div>
    <div class="sheet-style_row">
        <div class="sheet-sidebubbled" data-i18n="final-value">Final</div>
    	<input type="number"name="attr_block_final"
        value="@{block_base}+@{block_class}+@{dex_mod}+@{aam}" disabled ="true"/>
    </div>
    <div class="sheet-dark_row" style="padding-top:5px;text-align:center;">
        <button type="roll" name="roll_block" class="sheet-d100-roll-button sheet-widebutton" value="&{template:ABFdefault} {{title=^{defense}}} {{name=^{block}}} {{roll=[[1d100+@{block_final}+15*?{Fatigue?|0}+?{Modifiers?|0}]]}}"></button>
    </div>
    </div><!--end block -->
    <div class="sheet-wrapper" style="top:0px;"><!-- dodge -->
    <div class="sheet-title" data-i18n="dodge">Dodge</div>
    <div class="sheet-style_row">
        <div class="sheet-sidebubbled" data-i18n="base-value">Base</div>
        <input type="number"name="attr_dodge_base" value="0" min="0" />
    </div>
    <div class="sheet-style_row">
        <div class="sheet-sidebubbled" data-i18n="class">Class</div>
        <input type="number"name="attr_dodge_class" value="0" min="0" />
    </div>
    <div class="sheet-style_row">
        <div class="sheet-sidebubbled" data-i18n="final-value">Final</div>
    	<input type="number"name="attr_dodge_final"
        value="@{dodge_base}+@{dodge_class}+@{agi_mod}+@{aam}" disabled ="true"/>
    </div>
    <div class="sheet-dark_row" style="padding-top:5px;text-align:center;">
        <button type="roll" name="roll_dodge" class="sheet-d100-roll-button sheet-widebutton" value="&{template:ABFini} {{name=^{defense}}} {{desc=^{dodge}}} {{roll=[[1d100+@{dodge_final}+15*?{Fatigue?|0}+?{Modifiers?|0}]]}}"></button>
    </div>
    </div><!--end dodge -->
   </div><!-- end second row -->
   <div class="sheet-style_row sheet-2colrow" style="top:0px;"><!-- third row -->
   <div class="sheet-col2 sheet-wrapper" style="sheet-margin-right:0px; width:260px!important;"><!-- initiative -->
        <div class="sheet-title" data-i18n="initiative">Initiative</div>
        <fieldset class="repeating_initiative">
          <div class="sheet-clear">
            <input type="checkbox" name="attr_init_option" class="sheet-option"><span class="sheet-option"></span>
            <div class="sheet-expanded">
              <div class="sheet-style_row">
              	<span class="sheet-sidebubbled" data-i18n="name">Name</span><input type="text" name="attr_init_label" style="width:155px; margin:3px 3px 0px 3px;"/>
              </div>
              <div class="sheet-dark_row">
                <div class="sheet-cell" data-i18n="armor">Armor</div>
                <div class="sheet-cell"  style="width:50px;" data-i18n="weapon">Weapon</div>
                <div class="sheet-cell" data-i18n="class">Class</div>
                <div class="sheet-cell" data-i18n="special-bonus">Special</div>
                <div class="sheet-cell" data-i18n="final-value">Final</div>
              </div>
              <div class="sheet-style_row">
                <input type="number" name="attr_init_armor" value="0"/>
                <input type="number" name="attr_init_weapon" value="20" style="width:50px;"/>
                <input type="number" name="attr_init_class" value="0" min="0"/>
                <input type="number" name="attr_init_special" value="0"/>
                <input type="number" name="attr_init_final" disabled="true"
                value="@{agi_mod}+@{dex_mod}+@{init_armor}+@{init_weapon}+@{init_class}+@{init_special}+20+@{ki_increasedSpeed}+floor(@{aap}/2)"/>
              </div>
            </div>
            <div class="sheet-compact">
              <button type="roll" class="sheet-label" name="roll_init"
              value="&{template:ABFini} {{name=@{init_label}}} {{desc=^{initiative}}} {{roll=[[1d100+@{init_final}&{tracker}]]}}">
                <input type="text" name="attr_init_label" style="width:160px;"/>
                <input type="text" name="attr_init_final" disabled="true" style="width:40px;"
                value="@{agi_mod}+@{dex_mod}+@{init_armor}+@{init_weapon}+@{init_class}+@{init_special}+20+@{ki_increasedSpeed}+floor(@{aap}/2)"/>
              </button> 
            </div>
          </div>
        </fieldset>
   </div><!-- end initiative -->
   <div class="sheet-col2 sheet-wrapper" style="width:auto!important;text-align:center;"><!-- SECONDARY ABILITIES
        For naming, secondary ability variables are named with the first 4 letters of the secondary ability.
        e.g. History -> hist
        The only exceptions are:
            secondary abilities that have less than 4 letters originally (art and law)
            Magic Appraisal (mapp)
            Custom secondary abilities which are noted in the last category of this sectoin as 'custom'.
        -->
        <div class="sheet-title" data-i18n="secondary-abilities">Secondary Abilities</div>
        <div class="sheet-style_row sheet-red" style="margin-left:20px;" data-i18n="secondary-penalty">Secondary Abilities bordered in red are affected by armor penalties</div>
        <input type="radio" name="attr_secondary_tab" class="sheet-small_tab sheet-secondary_tab1" value="1" checked="checked"/><span data-i18n-title="tab-athletics" title="Athletics"></span>
        <input type="radio" name="attr_secondary_tab" class="sheet-small_tab sheet-secondary_tab2" value="2"/><span data-i18n-title="tab-social" title="Social"></span>
        <input type="radio" name="attr_secondary_tab" class="sheet-small_tab sheet-secondary_tab3" value="3"/><span data-i18n-title="tab-perceptive" title="Perceptive"></span>
        <input type="radio" name="attr_secondary_tab" class="sheet-small_tab sheet-secondary_tab4" value="4"/><span data-i18n-title="tab-intellectual" title="Intellectual"></span>
        <br />
        <input type="radio" name="attr_secondary_tab" class="sheet-small_tab sheet-secondary_tab5" value="5"/><span data-i18n-title="tab-vigor" title="Vigor"></span>
        <input type="radio" name="attr_secondary_tab" class="sheet-small_tab sheet-secondary_tab6" value="6"/><span data-i18n-title="tab-subterfuge" title="Subterfuge"></span>
        <input type="radio" name="attr_secondary_tab" class="sheet-small_tab sheet-secondary_tab7" value="7"/><span data-i18n-title="tab-creative" title="Creative"></span>
        <input type="radio" name="attr_secondary_tab" class="sheet-small_tab sheet-secondary_tab8" value="8"/><span data-i18n-title="tab-custom" title="Custom"></span>
        
        <div class="sheet-dark_row" style="margin-top:3px;">
            <div class="sheet-cell" data-i18n="count-natural-bonus-short"># Nat.</div>
            <div class="sheet-cell" style="width:50px;" data-i18n="attribute-short">Atr.</div>
            <div class="sheet-cell" data-i18n="natural-ability-short">N.A.</div>
            <div class="sheet-cell" data-i18n="base-value">Base</div>
            <div class="sheet-cell" data-i18n="class">Class</div>
            <div class="sheet-cell" data-i18n="special-bonus">Special</div>
            <div class="sheet-cell" style="width:82px;" data-i18n="name">Name</div>
            <div class="sheet-cell" data-i18n="final-value">Final</div>
            <div class="sheet-cell" style="wdith:30px;">&nbsp;</div>
        </div>
        <div class="sheet-secondary_tab1 sheet-tab-content"> <!-- athletics -->
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_acro_naturals"/>
                <div class="sheet-cell sheet-physical" data-i18n="agility-short">AGI</div>
                <input type="number" value="0" min="0" name="attr_acro_naturabi"/>
                <input type="number" value="0" min="0" name="attr_acro_base"/>
                <input type="number" value="0" min="0" name="attr_acro_class"/>
                <input type="number" value="0" min="0" name="attr_acro_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble sheet-red" data-i18n="acrobatics">Acrobatics</div>
                <input type="number" name="attr_acro_final" disabled="true"
                value="(((@{acro_naturals}+1)*@{agi_mod}+@{acro_naturabi} + 100) - abs((@{acro_naturals}+1)*@{agi_mod}+@{acro_naturabi} -100)) / 2+@{acro_base}+@{acro_class}+@{acro_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_acro"
                value="&{template:ABFini} {{name=^{tab-athletics}}} {{desc=^{acrobatics}}} {{roll=[[1d100+?{Fatigue?|0}*15+?{Modifiers?|0}+[[@{acro_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_athl_naturals"/>
                <div class="sheet-cell sheet-physical" data-i18n="agility-short">AGI</div>
                <input type="number" value="0" min="0" name="attr_athl_naturabi"/>
                <input type="number" value="0" min="0" name="attr_athl_base"/>
                <input type="number" value="0" min="0" name="attr_athl_class"/>
                <input type="number" value="0" name="attr_athl_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble sheet-red" data-i18n="athleticism">Athleticism</div>
                <input type="number" name="attr_athl_final" disabled="true"
                value="(((@{athl_naturals}+1)*@{agi_mod}+@{athl_naturabi} + 100) - abs((@{athl_naturals}+1)*@{agi_mod}+@{athl_naturabi} -100)) / 2+@{athl_base}+@{athl_class}+@{athl_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_athl"
                value="&{template:ABFini} {{name=^{tab-athletics}}} {{desc=^{athleticism}}} {{roll=[[1d100+?{Fatigue?|0}*15+?{Modifiers?|0}+[[@{athl_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_clim_naturals"/>
                <div class="sheet-cell sheet-physical" data-i18n="agility-short">AGI</div>
                <input type="number" value="0" min="0" name="attr_clim_naturabi"/>
                <input type="number" value="0" min="0" name="attr_clim_base"/>
                <input type="number" value="0" min="0" name="attr_clim_class"/>
                <input type="number" value="0" name="attr_clim_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble sheet-red" data-i18n="climb">Climb</div>
                <input type="number" name="attr_clim_final" disabled="true"
                value="(((@{clim_naturals}+1)*@{agi_mod}+@{clim_naturabi} + 100) - abs((@{clim_naturals}+1)*@{agi_mod}+@{clim_naturabi} -100)) / 2+@{clim_base}+@{clim_class}+@{clim_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_clim"
                value="&{template:ABFini} {{name=^{tab-athletics}}} {{desc=^{climb}}} {{roll=[[1d100+?{Fatigue?|0}*15+?{Modifiers?|0}+[[@{clim_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_jump_naturals"/>
                <div class="sheet-cell sheet-physical" data-i18n="strength-short">STR</div>
                <input type="number" value="0" min="0" name="attr_jump_naturabi"/>
                <input type="number" value="0" min="0" name="attr_jump_base"/>
                <input type="number" value="0" min="0" name="attr_jump_class"/>
                <input type="number" value="0" name="attr_jump_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble sheet-red" data-i18n="jump">Jump</div>
                <input type="number" name="attr_jump_final" disabled="true"
                value="(((@{jump_naturals}+1)*@{str_mod}+@{jump_naturabi} + 100) - abs((@{jump_naturals}+1)*@{str_mod}+@{jump_naturabi} -100)) / 2+@{jump_base}+@{jump_class}+@{jump_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_jump"
                value="&{template:ABFini} {{name=^{tab-athletics}}} {{desc=^{jump}}} {{roll=[[1d100+?{Fatigue?|0}*15+?{Modifiers?|0}+[[@{jump_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_ride_naturals"/>
                <div class="sheet-cell sheet-physical" data-i18n="agility-short">AGI</div>
                <input type="number" value="0" min="0" name="attr_ride_naturabi"/>
                <input type="number" value="0" min="0" name="attr_ride_base"/>
                <input type="number" value="0" min="0" name="attr_ride_class"/>
                <input type="number" value="0" name="attr_ride_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble sheet-red" data-i18n="ride">Ride</div>
                <input type="number" name="attr_ride_final" disabled="true"
                value="(((@{ride_naturals}+1)*@{agi_mod}+@{ride_naturabi} + 100) - abs((@{ride_naturals}+1)*@{agi_mod}+@{ride_naturabi} -100)) / 2+@{ride_base}+@{ride_class}+@{ride_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_ride"
                value="&{template:ABFini} {{name=^{tab-athletics}}} {{desc=^{ride}}} {{roll=[[1d100+?{Fatigue?|0}*15+?{Modifiers?|0}+[[@{ride_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_swim_naturals"/>
                <div class="sheet-cell sheet-physical" data-i18n="agility-short">AGI</div>
                <input type="number" value="0" min="0" name="attr_swim_naturabi"/>
                <input type="number" value="0" min="0" name="attr_swim_base"/>
                <input type="number" value="0" min="0" name="attr_swim_class"/>
                <input type="number" value="0" name="attr_swim_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble sheet-red" data-i18n="swim">Swim</div>
                <input type="number" name="attr_swim_final" disabled="true"
                value="(((@{swim_naturals}+1)*@{agi_mod}+@{swim_naturabi} + 100) - abs((@{swim_naturals}+1)*@{agi_mod}+@{swim_naturabi} -100)) / 2+@{swim_base}+@{swim_class}+@{swim_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_swim"
                value="&{template:ABFini} {{name=^{tab-athletics}}} {{desc=^{swim}}} {{roll=[[1d100+?{Fatigue?|0}*15+?{Modifiers?|0}+[[@{swim_final}]]]]}}"></button>
            </div>
        </div><!-- end athletics -->
        <div class="sheet-secondary_tab2 sheet-tab-content"><!-- social -->
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_etiq_naturals"/>
                <div class="sheet-cell sheet-mental" data-i18n="intelligence-short">INT</div>
                <input type="number" value="0" min="0" name="attr_etiq_naturabi"/>
                <input type="number" value="0" min="0" name="attr_etiq_base"/>
                <input type="number" value="0" min="0" name="attr_etiq_class"/>
                <input type="number" value="0" min="0" name="attr_etiq_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="etiquitte">Etiquitte</div>
                <input type="number" name="attr_etiq_final" disabled="true"
                value="(((@{etiq_naturals}+1)*@{int_mod}+@{etiq_naturabi} + 100) - abs((@{etiq_naturals}+1)*@{int_mod}+@{etiq_naturabi} -100)) / 2+@{etiq_base}+@{etiq_class}+@{etiq_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_etiq"
                value="&{template:ABFini} {{name=^{tab-social}}} {{desc=^{etiquitte}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{etiq_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_inti_naturals"/>
                <div class="sheet-cell sheet-mental" data-i18n="willpower-short">WP</div>
                <input type="number" value="0" min="0" name="attr_inti_naturabi"/>
                <input type="number" value="0" min="0" name="attr_inti_base"/>
                <input type="number" value="0" min="0" name="attr_inti_class"/>
                <input type="number" value="0" min="0" name="attr_inti_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="intimidate">Intimidate</div>
                <input type="number" name="attr_inti_final" disabled="true"
                value="(((@{inti_naturals}+1)*@{wp_mod}+@{inti_naturabi} + 100) - abs((@{inti_naturals}+1)*@{wp_mod}+@{inti_naturabi} -100)) / 2+@{inti_base}+@{inti_class}+@{inti_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_inti"
                value="&{template:ABFini} {{name=^{tab-social}}} {{desc=^{intimidate}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{inti_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_lead_naturals"/>
                <div class="sheet-cell sheet-mental" data-i18n="soul-power-short">POW</div>
                <input type="number" value="0" min="0" name="attr_lead_naturabi"/>
                <input type="number" value="0" min="0" name="attr_lead_base"/>
                <input type="number" value="0" min="0" name="attr_lead_class"/>
                <input type="number" value="0" min="0" name="attr_lead_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="leadership">Leadership</div>
                <input type="number" name="attr_lead_final" disabled="true"
                value="(((@{lead_naturals}+1)*@{pow_mod}+@{lead_naturabi} + 100) - abs((@{lead_naturals}+1)*@{pow_mod}+@{lead_naturabi} -100)) / 2+@{lead_base}+@{lead_class}+@{lead_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_lead"
                value="&{template:ABFini} {{name=^{tab-social}}} {{desc=^{leadership}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{lead_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_pers_naturals"/>
                <div class="sheet-cell sheet-mental" data-i18n="intelligence-short">INT</div>
                <input type="number" value="0" min="0" name="attr_pers_naturabi"/>
                <input type="number" value="0" min="0" name="attr_pers_base"/>
                <input type="number" value="0" min="0" name="attr_pers_class"/>
                <input type="number" value="0" min="0" name="attr_pers_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="persuasion">Persuasion</div>
                <input type="number" name="attr_pers_final" disabled="true"
                value="(((@{pers_naturals}+1)*@{int_mod}+@{pers_naturabi} + 100) - abs((@{pers_naturals}+1)*@{int_mod}+@{pers_naturabi} -100)) / 2+@{pers_base}+@{pers_class}+@{pers_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_pers"
                value="&{template:ABFini} {{name=^{tab-social}}} {{desc=^{persuasion}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{pers_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_stre_naturals"/>
                <div class="sheet-cell sheet-mental" data-i18n="intelligence-short">INT</div>
                <input type="number" value="0" min="0" name="attr_stre_naturabi"/>
                <input type="number" value="0" min="0" name="attr_stre_base"/>
                <input type="number" value="0" min="0" name="attr_stre_class"/>
                <input type="number" value="0" min="0" name="attr_stre_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="streetwise">Streetwise</div>
                <input type="number" name="attr_stre_final" disabled="true"
                value="(((@{stre_naturals}+1)*@{int_mod}+@{stre_naturabi} + 100) - abs((@{stre_naturals}+1)*@{int_mod}+@{stre_naturabi} -100)) / 2+@{stre_base}+@{stre_class}+@{stre_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_stre"
                value="&{template:ABFini} {{name=^{tab-social}}} {{desc=^{streetwise}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{stre_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_styl_naturals"/>
                <div class="sheet-cell sheet-mental" data-i18n="soul-power-short">POW</div>
                <input type="number" value="0" min="0" name="attr_styl_naturabi"/>
                <input type="number" value="0" min="0" name="attr_styl_base"/>
                <input type="number" value="0" min="0" name="attr_styl_class"/>
                <input type="number" value="0" min="0" name="attr_styl_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="style">Style</div>
                <input type="number" name="attr_styl_final" disabled="true"
                value="(((@{styl_naturals}+1)*@{pow_mod}+@{styl_naturabi} + 100) - abs((@{styl_naturals}+1)*@{pow_mod}+@{styl_naturabi} -100)) / 2+@{styl_base}+@{styl_class}+@{styl_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_styl"
                value="&{template:ABFini} {{name=^{tab-social}}} {{desc=^{style}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{styl_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_trad_naturals"/>
                <div class="sheet-cell sheet-mental" data-i18n="intelligence-short">INT</div>
                <input type="number" value="0" min="0" name="attr_trad_naturabi"/>
                <input type="number" value="0" min="0" name="attr_trad_base"/>
                <input type="number" value="0" min="0" name="attr_trad_class"/>
                <input type="number" value="0" min="0" name="attr_trad_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="trading">Trading</div>
                <input type="number" name="attr_trad_final" disabled="true"
                value="(((@{trad_naturals}+1)*@{int_mod}+@{trad_naturabi} + 100) - abs((@{trad_naturals}+1)*@{int_mod}+@{trad_naturabi} -100)) / 2+@{trad_base}+@{trad_class}+@{trad_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_trad"
                value="&{template:ABFini} {{name=^{tab-social}}} {{desc=^{trading}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{trad_final}]]]]}}"></button>
            </div>
        </div><!-- end social -->
        <div class="sheet-secondary_tab3 sheet-tab-content"><!-- perceptive -->
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_noti_naturals"/>
                <div class="sheet-cell sheet-mental" data-i18n="perception-short">PER</div>
                <input type="number" value="0" min="0" name="attr_noti_naturabi"/>
                <input type="number" value="0" min="0" name="attr_noti_base"/>
                <input type="number" value="0" min="0" name="attr_noti_class"/>
                <input type="number" value="0" min="0" name="attr_noti_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="notice">Notice</div>
                <input type="number" name="attr_noti_final" disabled="true"
                value="(((@{noti_naturals}+1)*@{per_mod}+@{noti_naturabi} + 100) - abs((@{noti_naturals}+1)*@{per_mod}+@{noti_naturabi} -100)) / 2+@{noti_base}+@{noti_class}+@{noti_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_noti"
                value="&{template:ABFini} {{name=^{tab-perceptive}}} {{desc=^{notice}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{noti_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_sear_naturals"/>
                <div class="sheet-cell sheet-mental" data-i18n="perception-short">PER</div>
                <input type="number" value="0" min="0" name="attr_sear_naturabi"/>
                <input type="number" value="0" min="0" name="attr_sear_base"/>
                <input type="number" value="0" min="0" name="attr_sear_class"/>
                <input type="number" value="0" min="0" name="attr_sear_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="search">Search</div>
                <input type="number" name="attr_sear_final" disabled="true"
                value="(((@{sear_naturals}+1)*@{per_mod}+@{sear_naturabi} + 100) - abs((@{sear_naturals}+1)*@{per_mod}+@{sear_naturabi} -100)) / 2+@{sear_base}+@{sear_class}+@{sear_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_sear"
                value="&{template:ABFini} {{name=^{tab-perceptive}}} {{desc=^{search}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{sear_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_trac_naturals"/>
                <div class="sheet-cell sheet-mental" data-i18n="perception-short">PER</div>
                <input type="number" value="0" min="0" name="attr_trac_naturabi"/>
                <input type="number" value="0" min="0" name="attr_trac_base"/>
                <input type="number" value="0" min="0" name="attr_trac_class"/>
                <input type="number" value="0" min="0" name="attr_trac_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="track">Track</div>
                <input type="number" name="attr_trac_final" disabled="true"
                value="(((@{trac_naturals}+1)*@{per_mod}+@{trac_naturabi} + 100) - abs((@{trac_naturals}+1)*@{per_mod}+@{trac_naturabi} -100)) / 2+@{trac_base}+@{trac_class}+@{trac_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_trac"
                value="&{template:ABFini} {{name=^{tab-perceptive}}} {{desc=^{track}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{trac_final}]]]]}}"></button>
            </div>
        </div><!-- end perceptive -->
        <div class="sheet-secondary_tab4 sheet-tab-content"><!-- Intellectual -->
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_anim_naturals"/>
                <div class="sheet-cell sheet-mental" data-i18n="intelligence-short">INT</div>
                <input type="number" value="0" min="0" name="attr_anim_naturabi"/>
                <input type="number" value="0" min="0" name="attr_anim_base"/>
                <input type="number" value="0" min="0" name="attr_anim_class"/>
                <input type="number" value="0" min="0" name="attr_anim_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="animals">Animals</div>
                <input type="number" name="attr_anim_final" disabled="true"
                value="(((@{anim_naturals}+1)*@{int_mod}+@{anim_naturabi} + 100) - abs((@{anim_naturals}+1)*@{int_mod}+@{anim_naturabi} -100)) / 2+@{anim_base}+@{anim_class}+@{anim_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_anim"
                value="&{template:ABFini} {{name=^{tab-intellectual}}} {{desc=^{animals}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{anim_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_appr_naturals"/>
                <div class="sheet-cell sheet-mental" data-i18n="intelligence-short">INT</div>
                <input type="number" value="0" min="0" name="attr_appr_naturabi"/>
                <input type="number" value="0" min="0" name="attr_appr_base"/>
                <input type="number" value="0" min="0" name="attr_appr_class"/>
                <input type="number" value="0" min="0" name="attr_appr_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="appraisal">Appraisal</div>
                <input type="number" name="attr_appr_final" disabled="true"
                value="(((@{appr_naturals}+1)*@{int_mod}+@{appr_naturabi} + 100) - abs((@{appr_naturals}+1)*@{int_mod}+@{appr_naturabi} -100)) / 2+@{appr_base}+@{appr_class}+@{appr_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_appr"
                value="&{template:ABFini} {{name=^{tab-intellectual}}} {{desc=^{appraisal}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{appr_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_herb_naturals"/>
                <div class="sheet-cell sheet-mental" data-i18n="intelligence-short">INT</div>
                <input type="number" value="0" min="0" name="attr_herb_naturabi"/>
                <input type="number" value="0" min="0" name="attr_herb_base"/>
                <input type="number" value="0" min="0" name="attr_herb_class"/>
                <input type="number" value="0" min="0" name="attr_herb_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="herbal-lore">Herbal Lore</div>
                <input type="number" name="attr_herb_final" disabled="true"
                value="(((@{herb_naturals}+1)*@{int_mod}+@{herb_naturabi} + 100) - abs((@{herb_naturals}+1)*@{int_mod}+@{herb_naturabi} -100)) / 2+@{herb_base}+@{herb_class}+@{herb_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_herb"
                value="&{template:ABFini} {{name=^{tab-intellectual}}} {{desc=^{herbal-lore}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{herb_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_hist_naturals"/>
                <div class="sheet-cell sheet-mental" data-i18n="intelligence-short">INT</div>
                <input type="number" value="0" min="0" name="attr_hist_naturabi"/>
                <input type="number" value="0" min="0" name="attr_hist_base"/>
                <input type="number" value="0" min="0" name="attr_hist_class"/>
                <input type="number" value="0" min="0" name="attr_hist_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="history">History</div>
                <input type="number" name="attr_hist_final" disabled="true"
                value="(((@{hist_naturals}+1)*@{int_mod}+@{hist_naturabi} + 100) - abs((@{hist_naturals}+1)*@{int_mod}+@{hist_naturabi} -100)) / 2+@{hist_base}+@{hist_class}+@{hist_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_hist"
                value="&{template:ABFini} {{name=^{tab-intellectual}}} {{desc=^{history}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{hist_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_law_naturals"/>
                <div class="sheet-cell sheet-mental" data-i18n="intelligence-short">INT</div>
                <input type="number" value="0" min="0" name="attr_law_naturabi"/>
                <input type="number" value="0" min="0" name="attr_law_base"/>
                <input type="number" value="0" min="0" name="attr_law_class"/>
                <input type="number" value="0" min="0" name="attr_law_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="law">Law</div>
                <input type="number" name="attr_law_final" disabled="true"
                value="(((@{law_naturals}+1)*@{int_mod}+@{law_naturabi} + 100) - abs((@{law_naturals}+1)*@{int_mod}+@{law_naturabi} -100)) / 2+@{law_base}+@{law_class}+@{law_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_law"
                value="&{template:ABFini} {{name=^{tab-intellectual}}} {{desc=^{law}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{law_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_mapp_naturals"/>
                <div class="sheet-cell sheet-mental" data-i18n="soul-power-short">POW</div>
                <input type="number" value="0" min="0" name="attr_mapp_naturabi"/>
                <input type="number" value="0" min="0" name="attr_mapp_base"/>
                <input type="number" value="0" min="0" name="attr_mapp_class"/>
                <input type="number" value="0" min="0" name="attr_mapp_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="magic-appraisal">Magic Appr.</div>
                <input type="number" name="attr_mapp_final" disabled="true"
                value="(((@{mapp_naturals}+1)*@{pow_mod}+@{mapp_naturabi} + 100) - abs((@{mapp_naturals}+1)*@{pow_mod}+@{mapp_naturabi} -100)) / 2+@{mapp_base}+@{mapp_class}+@{mapp_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_mapp"
                value="&{template:ABFini} {{name=^{tab-intellectual}}} {{desc=^{magic-appraisal}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{mapp_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_medi_naturals"/>
                <div class="sheet-cell sheet-mental" data-i18n="intelligence-short">INT</div>
                <input type="number" value="0" min="0" name="attr_medi_naturabi"/>
                <input type="number" value="0" min="0" name="attr_medi_base"/>
                <input type="number" value="0" min="0" name="attr_medi_class"/>
                <input type="number" value="0" min="0" name="attr_medi_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="medicine">Medicine</div>
                <input type="number" name="attr_medi_final" disabled="true"
                value="(((@{medi_naturals}+1)*@{int_mod}+@{medi_naturabi} + 100) - abs((@{medi_naturals}+1)*@{int_mod}+@{medi_naturabi} -100)) / 2+@{medi_base}+@{medi_class}+@{medi_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_medi"
                value="&{template:ABFini} {{name=^{tab-intellectual}}} {{desc=^{medicine}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{medi_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_memo_naturals"/>
                <div class="sheet-cell sheet-mental" data-i18n="intelligence-short">INT</div>
                <input type="number" value="0" min="0" name="attr_memo_naturabi"/>
                <input type="number" value="0" min="0" name="attr_memo_base"/>
                <input type="number" value="0" min="0" name="attr_memo_class"/>
                <input type="number" value="0" min="0" name="attr_memo_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="memorize">Memorize</div>
                <input type="number" name="attr_memo_final" disabled="true"
                value="(((@{memo_naturals}+1)*@{int_mod}+@{memo_naturals} + 100) - abs((@{memo_naturals}+1)*@{int_mod}+@{memo_naturals} -100)) / 2+@{memo_base}+@{memo_class}+@{memo_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_memo"
                value="&{template:ABFini} {{name=^{tab-intellectual}}} {{desc=^{memorize}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{memo_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_navi_naturals"/>
                <div class="sheet-cell sheet-mental" data-i18n="intelligence-short">INT</div>
                <input type="number" value="0" min="0" name="attr_navi_naturabi"/>
                <input type="number" value="0" min="0" name="attr_navi_base"/>
                <input type="number" value="0" min="0" name="attr_navi_class"/>
                <input type="number" value="0" min="0" name="attr_navi_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="navigation">Navigation</div>
                <input type="number" name="attr_navi_final" disabled="true"
                value="(((@{navi_naturals}+1)*@{int_mod}+@{navi_naturabi} + 100) - abs((@{navi_naturals}+1)*@{int_mod}+@{navi_naturabi} -100)) / 2+@{navi_base}+@{navi_class}+@{navi_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_navi"
                value="&{template:ABFini} {{name=^{tab-intellectual}}} {{desc=^{navigation}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{navi_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_occu_naturals"/>
                <div class="sheet-cell sheet-mental" data-i18n="intelligence-short">INT</div>
                <input type="number" value="0" min="0" name="attr_occu_naturabi"/>
                <input type="number" value="0" min="0" name="attr_occu_base"/>
                <input type="number" value="0" min="0" name="attr_occu_class"/>
                <input type="number" value="0" min="0" name="attr_occu_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="occult">Occult</div>
                <input type="number" name="attr_occu_final" disabled="true"
                value="(((@{occu_naturals}+1)*@{int_mod}+@{occu_naturabi} + 100) - abs((@{occu_naturals}+1)*@{int_mod}+@{occu_naturabi} -100)) / 2+@{occu_base}+@{occu_class}+@{occu_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_occu"
                value="&{template:ABFini} {{name=^{tab-intellectual}}} {{desc=^{occult}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{occu_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_scie_naturals"/>
                <div class="sheet-cell sheet-mental" data-i18n="intelligence-short">INT</div>
                <input type="number" value="0" min="0" name="attr_scie_naturabi"/>
                <input type="number" value="0" min="0" name="attr_scie_base"/>
                <input type="number" value="0" min="0" name="attr_scie_class"/>
                <input type="number" value="0" min="0" name="attr_scie_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="sciences">Sciences</div>
                <input type="number" name="attr_scie_final" disabled="true"
                value="(((@{scie_naturals}+1)*@{int_mod}+@{scie_naturabi} + 100) - abs((@{scie_naturals}+1)*@{int_mod}+@{scie_naturabi} -100)) / 2+@{scie_base}+@{scie_class}+@{scie_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_scie"
                value="&{template:ABFini} {{name=^{tab-intellectual}}} {{desc=^{sciences}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{scie_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_tact_naturals"/>
                <div class="sheet-cell sheet-mental" data-i18n="intelligence-short">INT</div>
                <input type="number" value="0" min="0" name="attr_tact_naturabi"/>
                <input type="number" value="0" min="0" name="attr_tact_base"/>
                <input type="number" value="0" min="0" name="attr_tact_class"/>
                <input type="number" value="0" min="0" name="attr_tact_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="tactics">Tactics</div>
                <input type="number" name="attr_tact_final" disabled="true"
                value="(((@{tact_naturals}+1)*@{int_mod}+@{tact_naturabi} + 100) - abs((@{tact_naturals}+1)*@{int_mod}+@{tact_naturabi} -100)) / 2+@{tact_base}+@{tact_class}+@{tact_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_tact"
                value="&{template:ABFini} {{name=^{tab-intellectual}}} {{desc=^{tactics}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{tact_final}]]]]}}"></button>
            </div>
        </div><!-- end intellectual -->
        <div class="sheet-secondary_tab5 sheet-tab-content"><!-- vigor -->
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_comp_naturals"/>
                <div class="sheet-cell sheet-mental" data-i18n="willpower-short">WP</div>
                <input type="number" value="0" min="0" name="attr_comp_naturabi"/>
                <input type="number" value="0" min="0" name="attr_comp_base"/>
                <input type="number" value="0" min="0" name="attr_comp_class"/>
                <input type="number" value="0" min="0" name="attr_comp_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="composure">Composure</div>
                <input type="number" name="attr_comp_final" disabled="true"
                value="(((@{comp_naturals}+1)*@{wp_mod}+@{comp_naturabi} + 100) - abs((@{comp_naturals}+1)*@{wp_mod}+@{comp_naturabi} -100)) / 2+@{comp_base}+@{comp_class}+@{comp_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_comp"
                value="&{template:ABFini} {{name=^{tab-vigor}}} {{desc=^{composure}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{comp_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_feat_naturals"/>
                <div class="sheet-cell sheet-physical" data-i18n="strength-short">STR</div>
                <input type="number" value="0" min="0" name="attr_feat_naturabi"/>
                <input type="number" value="0" min="0" name="attr_feat_base"/>
                <input type="number" value="0" min="0" name="attr_feat_class"/>
                <input type="number" value="0" min="0" name="attr_feat_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble sheet-red" data-i18n="feats-of-strength">Feats of Str.</div>
                <input type="number" name="attr_feat_final" disabled="true"
                value="(((@{feat_naturals}+1)*@{str_mod}+@{feat_naturabi} + 100) - abs((@{feat_naturals}+1)*@{str_mod}+@{feat_naturabi} -100)) / 2+@{feat_base}+@{feat_class}+@{feat_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_feat"
                value="&{template:ABFini} {{name=^{tab-vigor}}} {{desc=^{feats-of-strength}}} {{roll=[[1d100+?{Fatigue?|0}*15+?{Modifiers?|0}+[[@{feat_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_with_naturals"/>
                <div class="sheet-cell sheet-mental" data-i18n="willpower-short">WP</div>
                <input type="number" value="0" min="0" name="attr_with_naturabi"/>
                <input type="number" value="0" min="0" name="attr_with_base"/>
                <input type="number" value="0" min="0" name="attr_with_class"/>
                <input type="number" value="0" min="0" name="attr_with_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="withstand-pain">Withst. Pain</div>
                <input type="number" name="attr_with_final" disabled="true"
                value="(((@{with_naturals}+1)*@{wp_mod}+@{with_naturabi} + 100) - abs((@{with_naturals}+1)*@{wp_mod}+@{with_naturabi} -100)) / 2+@{with_base}+@{with_class}+@{with_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_with"
                value="&{template:ABFini} {{name=^{tab-vigor}}} {{desc=^{withstand-pain}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{with_final}]]]]}}"></button>
            </div>
        </div><!-- end vigor -->
        <div class="sheet-secondary_tab6 sheet-tab-content"><!-- subterfuge -->
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_disg_naturals"/>
                <div class="sheet-cell sheet-physical" data-i18n="dexterity-short">DEX</div>
                <input type="number" value="0" min="0" name="attr_disg_naturabi"/>
                <input type="number" value="0" min="0" name="attr_disg_base"/>
                <input type="number" value="0" min="0" name="attr_disg_class"/>
                <input type="number" value="0" min="0" name="attr_disg_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="disguise">Disguise</div>
                <input type="number" name="attr_disg_final" disabled="true"
                value="(((@{disg_naturals}+1)*@{dex_mod}+@{disg_naturabi} + 100) - abs((@{disg_naturals}+1)*@{dex_mod}+@{disg_naturabi} -100)) / 2+@{disg_base}+@{disg_class}+@{disg_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_disg"
                value="&{template:ABFini} {{name=^{tab-subterfuge}}} {{desc=^{disguise}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{disg_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_hide_naturals"/>
                <div class="sheet-cell sheet-mental" data-i18n="perception-short">PER</div>
                <input type="number" value="0" min="0" name="attr_hide_naturabi"/>
                <input type="number" value="0" min="0" name="attr_hide_base"/>
                <input type="number" value="0" min="0" name="attr_hide_class"/>
                <input type="number" value="0" min="0" name="attr_hide_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble sheet-red" data-i18n="hide">Hide</div>
                <input type="number" name="attr_hide_final" disabled="true"
                value="(((@{hide_naturals}+1)*@{per_mod}+@{hide_naturabi} + 100) - abs((@{hide_naturals}+1)*@{per_mod}+@{hide_naturabi} -100)) / 2+@{hide_base}+@{hide_class}+@{hide_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_hide"
                value="&{template:ABFini} {{name=^{tab-subterfuge}}} {{desc=^{hide}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{hide_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_lock_naturals"/>
                <div class="sheet-cell sheet-physical" data-i18n="dexterity-short">DEX</div>
                <input type="number" value="0" min="0" name="attr_lock_naturabi"/>
                <input type="number" value="0" min="0" name="attr_lock_base"/>
                <input type="number" value="0" min="0" name="attr_lock_class"/>
                <input type="number" value="0" min="0" name="attr_lock_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="lockpicking">Lockpicking</div>
                <input type="number" name="attr_lock_final" disabled="true"
                value="(((@{lock_naturals}+1)*@{dex_mod}+@{lock_naturabi} + 100) - abs((@{lock_naturals}+1)*@{dex_mod}+@{lock_naturabi} -100)) / 2+@{lock_base}+@{lock_class}+@{lock_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_lock"
                value="&{template:ABFini} {{name=^{tab-subterfuge}}} {{desc=^{lockpicking}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{lock_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_pois_naturals"/>
                <div class="sheet-cell sheet-mental" data-i18n="intelligence-short">INT</div>
                <input type="number" value="0" min="0" name="attr_pois_naturabi"/>
                <input type="number" value="0" min="0" name="attr_pois_base"/>
                <input type="number" value="0" min="0" name="attr_pois_class"/>
                <input type="number" value="0" min="0" name="attr_pois_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="poisons">Poisons</div>
                <input type="number" name="attr_pois_final" disabled="true"
                value="(((@{pois_naturals}+1)*@{int_mod}+@{pois_naturabi} + 100) - abs((@{pois_naturals}+1)*@{int_mod}+@{pois_naturabi} -100)) / 2+@{pois_base}+@{pois_class}+@{pois_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_pois"
                value="&{template:ABFini} {{name=^{tab-subterfuge}}} {{desc=^{poisons}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{pois_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_stea_naturals"/>
                <div class="sheet-cell sheet-physical" data-i18n="agility-short">AGI</div>
                <input type="number" value="0" min="0" name="attr_stea_naturabi"/>
                <input type="number" value="0" min="0" name="attr_stea_base"/>
                <input type="number" value="0" min="0" name="attr_stea_class"/>
                <input type="number" value="0" min="0" name="attr_stea_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble sheet-red" data-i18n="stealth">Stealth</div>
                <input type="number" name="attr_stea_final" disabled="true"
                value="(((@{stea_naturals}+1)*@{agi_mod}+@{stea_naturabi} + 100) - abs((@{stea_naturals}+1)*@{agi_mod}+@{stea_naturabi} -100)) / 2+@{stea_base}+@{stea_class}+@{stea_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_stea"
                value="&{template:ABFini} {{name=^{tab-subterfuge}}} {{desc=^{stealth}}} {{roll=[[1d100+?{Fatigue?|0}*15+?{Modifiers?|0}+[[@{stea_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_thef_naturals"/>
                <div class="sheet-cell sheet-physical" data-i18n="dexterity-short">DEX</div>
                <input type="number" value="0" min="0" name="attr_thef_naturabi"/>
                <input type="number" value="0" min="0" name="attr_thef_base"/>
                <input type="number" value="0" min="0" name="attr_thef_class"/>
                <input type="number" value="0" min="0" name="attr_thef_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="theft">Theft</div>
                <input type="number" name="attr_thef_final" disabled="true"
                value="(((@{thef_naturals}+1)*@{dex_mod}+@{thef_naturabi} + 100) - abs((@{thef_naturals}+1)*@{dex_mod}+@{thef_naturabi} -100)) / 2+@{thef_base}+@{thef_class}+@{thef_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_thef"
                value="&{template:ABFini} {{name=^{tab-subterfuge}}} {{desc=^{theft}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{thef_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_trap_naturals"/>
                <div class="sheet-cell sheet-physical" data-i18n="dexterity-short">DEX</div>
                <input type="number" value="0" min="0" name="attr_trap_naturabi"/>
                <input type="number" value="0" min="0" name="attr_trap_base"/>
                <input type="number" value="0" min="0" name="attr_trap_class"/>
                <input type="number" value="0" min="0" name="attr_trap_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="trap-lore">Trap Lore</div>
                <input type="number" name="attr_trap_final" disabled="true"
                value="(((@{trap_naturals}+1)*@{dex_mod}+@{trap_naturabi} + 100) - abs((@{trap_naturals}+1)*@{dex_mod}+@{trap_naturabi} -100)) / 2+@{trap_base}+@{trap_class}+@{trap_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_trap"
                value="&{template:ABFini} {{name=^{tab-subterfuge}}} {{desc=^{trap-lore}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{trap_final}]]]]}}"></button>
            </div>
        </div><!-- end subterfuge -->
        <div class="sheet-secondary_tab7 sheet-tab-content"><!-- creative -->
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_art_naturals"/>
                <div class="sheet-cell sheet-mental" data-i18n="soul-power-short">POW</div>
                <input type="number" value="0" min="0" name="attr_art_naturabi"/>
                <input type="number" value="0" min="0" name="attr_art_base"/>
                <input type="number" value="0" min="0" name="attr_art_class"/>
                <input type="number" value="0" min="0" name="attr_art_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="art">Art</div>
                <input type="number" name="attr_art_final" disabled="true"
                value="(((@{art_naturals}+1)*@{pow_mod}+@{art_naturabi} + 100) - abs((@{art_naturals}+1)*@{pow_mod}+@{art_naturabi} -100)) / 2+@{art_base}+@{art_class}+@{art_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_art"
                value="&{template:ABFini} {{name=^{tab-creative}}} {{desc=^{art}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{art_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_danc_naturals"/>
                <div class="sheet-cell sheet-physical" data-i18n="agility-short">AGI</div>
                <input type="number" value="0" min="0" name="attr_danc_naturabi"/>
                <input type="number" value="0" min="0" name="attr_danc_base"/>
                <input type="number" value="0" min="0" name="attr_danc_class"/>
                <input type="number" value="0" min="0" name="attr_danc_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble sheet-red" data-i18n="dance">Dance</div>
                <input type="number" name="attr_danc_final" disabled="true"
                value="(((@{danc_naturals}+1)*@{agi_mod}+@{danc_naturabi} + 100) - abs((@{danc_naturals}+1)*@{agi_mod}+@{danc_naturabi} -100)) / 2+@{danc_base}+@{danc_class}+@{danc_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_danc"
                value="&{template:ABFini} {{name=^{tab-creative}}} {{desc=^{dance}}} {{roll=[[1d100+?{Fatigue?|0}*15+?{Modifiers?|0}+[[@{danc_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_forg_naturals"/>
                <div class="sheet-cell sheet-physical" data-i18n="dexterity-short">DEX</div>
                <input type="number" value="0" min="0" name="attr_forg_naturabi"/>
                <input type="number" value="0" min="0" name="attr_forg_base"/>
                <input type="number" value="0" min="0" name="attr_forg_class"/>
                <input type="number" value="0" min="0" name="attr_forg_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="forging">Forging</div>
                <input type="number" name="attr_forg_final" disabled="true"
                value="(((@{forg_naturals}+1)*@{dex_mod}+@{forg_naturabi} + 100) - abs((@{forg_naturals}+1)*@{dex_mod}+@{forg_naturabi} -100)) / 2+@{forg_base}+@{forg_class}+@{forg_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_forg"
                value="&{template:ABFini} {{name=^{tab-creative}}} {{desc=^{forging}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{forg_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_musi_naturals"/>
                <div class="sheet-cell sheet-mental" data-i18n="soul-power-short">POW</div>
                <input type="number" value="0" min="0" name="attr_musi_naturabi"/>
                <input type="number" value="0" min="0" name="attr_musi_base"/>
                <input type="number" value="0" min="0" name="attr_musi_class"/>
                <input type="number" value="0" min="0" name="attr_musi_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="music">Music</div>
                <input type="number" name="attr_musi_final" disabled="true"
                value="(((@{musi_naturals}+1)*@{pow_mod}+@{musi_naturabi} + 100) - abs((@{musi_naturals}+1)*@{pow_mod}+@{musi_naturabi} -100)) / 2+@{musi_base}+@{musi_class}+@{musi_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_musi"
                value="&{template:ABFini} {{name=^{tab-creative}}} {{desc=^{music}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{musi_final}]]]]}}"></button>
            </div>
            <div class="sheet-style_row">
                <input type="number" value="0" min="0" name="attr_slig_naturals"/>
                <div class="sheet-cell sheet-physical" data-i18n="dexterity-short" data-i18n="track">DEX</div>
                <input type="number" value="0" min="0" name="attr_slig_naturabi"/>
                <input type="number" value="0" min="0" name="attr_slig_base"/>
                <input type="number" value="0" min="0" name="attr_slig_class"/>
                <input type="number" value="0" min="0" name="attr_slig_special"/>
                <div class="sheet-cell sheet-sidebubbled sheet-secondary_bubble" data-i18n="slight-of-hand">Sl. of Hand</div>
                <input type="number" name="attr_slig_final" disabled="true"
                value="(((@{slig_naturals}+1)*@{dex_mod}+@{slig_naturabi} + 100) - abs((@{slig_naturals}+1)*@{dex_mod}+@{slig_naturabi} -100)) / 2+@{slig_base}+@{slig_class}+@{slig_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_slig"
                value="&{template:ABFini} {{name=^{tab-creative}}} {{desc=^{slight-of-hand}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{slig_final}]]]]}}"></button>
            </div>
        </div><!-- end creative -->
        <div class="sheet-secondary_tab8 sheet-tab-content"><!-- custom -->
            <fieldset class="repeating_secondaryabilities">
                <input type="number" value="0" min="0" name="attr_custom_naturals"/>
                <select name="attr_custom_mod" class="sheet-cell" style="width:50px;"> 
                        <option value="@{agi_mod}" class="sheet-physical" data-i18n="agility-short">AGI</option>
                        <option value="@{con_mod}" class="sheet-physical" data-i18n="constitution-short">CON</option>
                        <option value="@{dex_mod}" class="sheet-physical" data-i18n="dexterity-short">DEX</option>
                        <option value="@{str_mod}" class="sheet-physical" data-i18n="strength-short">STR</option>
                        <option value="@{int_mod}" class="sheet-mental" data-i18n="intelligence-short">INT</option>
                        <option value="@{per_mod}" class="sheet-mental" data-i18n="perception-short">PER</option>
                        <option value="@{pow_mod}" class="sheet-mental" data-i18n="soul-power-short">POW</option>
                        <option value="@{wp_mod}" class="sheet-mental" data-i18n="willpower-short">WP</option>
                </select>
                <input type="number" value="0" min="0" name="attr_custom_naturabi"/>
                <input type="number" value="0" min="0"name="attr_custom_base"/>
                <input type="number" value="0" min="0" name="attr_custom_class"/>
                <input type="number" value="0" min="0" name="attr_custom_special"/>
                <input type="text" name="attr_custom_name" style="width:90px;"/>
                <input type="number" class="sheet-secondary_ability_input" name="attr_custom_final" disabled="true"
                value="(((@{custom_naturals}+1)*@{custom_mod}+@{custom_naturabi} + 100) - abs((@{custom_naturals}+1)*@{custom_mod}+@{custom_naturabi} -100)) / 2+@{custom_base}+@{custom_class}+@{custom_special} +@{aam}"/>
                <button type="roll" class="sheet-d100-roll-button" name="roll_custom"
                value="&{template:ABFini} {{name=^{tab-custom}}} {{desc=@{custom_name}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{custom_final}]]]]}}"></button>
            </fieldset>
        </div><!-- end custom -->
    </div><!-- end secondary abilities -->
    
   </div><!-- end third row -->
   <div class="sheet-style_row sheet-2colrow"><!-- fourth row -->
    <div class="sheet-col2 sheet-wrapper" style="margin-left:5px;"><!-- advantages -->
        <div class="sheet-title" data-i18n="advantages">Advantages</div>
        <div class="sheet-dark_row">
            <div class="sheet-cell sheet-advantage_text" data-i18n="name">Name</div>
            <div class="sheet-cell" data-i18n="benefit">Benefit</div>
        </div>
        <fieldset class="repeating_advantage">
          <div class="sheet-clear">
            <input type="checkbox" name="attr_advanage_option" class="sheet-option"><span class="sheet-option"></span>
            <div class="sheet-style_row">
            	<input type="text" name="attr_advantage_name" class="sheet-advantage_text"/>
            	<input type="number" name="attr_advantage_cost"/>
            </div>
            <div class="sheet-expanded">
              <div class="sheet-style_row">
                <textarea name="attr_advantage_desc" style="width:100%;max-width:100%"></textarea>
              </div>
            </div>
          </div>
        </fieldset>
    </div><!-- end advantages -->
    <div class="sheet-col2 sheet-wrapper"><!-- Disadvantages -->
        <div class="sheet-title" data-i18n="disadvantages">Disadvantages</div>
        <div class="sheet-dark_row">
            <div class="sheet-cell sheet-advantage_text" data-i18n="name">Name</div>
            <div class="sheet-cell" data-i18n="benefit">Benefit</div>
        </div>
        <div class="sheet-clear">
          <input type="checkbox" name="attr_disadvantage1_option" class="sheet-option"><span class="sheet-option"></span>
          <div class="sheet-style_row">
            <input type="text" name="attr_disadvantage1_name" class="sheet-advantage_text"/>
            <input type="number" name="attr_disadvantage1_benefit"/>
          </div>
          <div class="sheet-expanded">
            <div class="sheet-style_row">
              <textarea name="attr_disadvantage1_desc" style="width:100%;max-width:100%"></textarea>
            </div>
          </div>
        </div>
        <div class="sheet-clear">
          <input type="checkbox" name="attr_disadvantage2_option" class="sheet-option"><span class="sheet-option"></span>
          <div class="sheet-style_row">
            <input type="text" name="attr_disadvantage2_name" class="sheet-advantage_text"/>
            <input type="number" name="attr_disadvantage2_benefit"/>
          </div>
          <div class="sheet-expanded">
            <div class="sheet-style_row">
              <textarea name="attr_disadvantage2_desc" style="width:100%;max-width:100%"></textarea>
            </div>
          </div>
        </div>
        <div class="sheet-clear">
          <input type="checkbox" name="attr_disadvantage3_option" class="sheet-option"><span class="sheet-option"></span>
          <div class="sheet-style_row">
            <input type="text" name="attr_disadvantage3_name" class="sheet-advantage_text"/>
            <input type="number" name="attr_disadvantage3_benefit"/>
          </div>
          <div class="sheet-expanded">
            <div class="sheet-style_row">
              <textarea name="attr_disadvantage3_desc" style="width:100%;max-width:100%"></textarea>
            </div>
          </div>
        </div>
        <div class="sheet-clear">
          <input type="checkbox" name="attr_disadvantage4_option" class="sheet-option"><span class="sheet-option"></span>
          <div class="sheet-style_row">
            <input type="text" name="attr_disadvantage4_name" class="sheet-advantage_text"/>
            <input type="number" name="attr_disadvantage4_benefit"/>
          </div>
          <div class="sheet-expanded">
            <div class="sheet-style_row">
              <textarea name="attr_disadvantage4_desc" style="width:100%;max-width:100%"></textarea>
            </div>
          </div>
        </div>
    </div><!-- end Disadvantages -->
    
   </div><!-- end fourth row -->
</div> 
</div><!-- end general page tab -->

<div class="sheet-tab-content sheet-tab2"><!-- magic page tab -->
<div class="sheet-page_wrapper sheet-wrapper">
   <div class="sheet-style_row"><!-- first row -->
    <div class="sheet-wrapper" style="z-index:2;"><!-- Magic projection -->
    <input type="checkbox" name="attr_magicprojection_option" class="sheet-option"><span class="sheet-option sheet-white"></span>
    <div class="sheet-title" data-i18n="magic-projection">Magic Projection</div>
    <div class="sheet-expanded">
      <div class="sheet-style_row">
        <div class="sheet-sidebubbled sheet-longbubble sheet-cell" data-i18n="base-value">Base</div>
        <input type="number" name="attr_magicprojection_base" value="0" min="0" style="width:auto;">
      </div>
      <div class="sheet-style_row">
        <div class="sheet-sidebubbled sheet-longbubble sheet-cell" data-i18n="special-bonus">Special</div>
        <input type="number" name="attr_magicprojection_special" value="0" style="width:auto;">
      </div>
      <div class="sheet-style_row">
        <div class="sheet-sidebubbled sheet-longbubble sheet-cell" data-i18n="temporary-bonus">Temp.</div>
        <input type="number" name="attr_magicprojection_temp" value="0" style="width:auto;">
      </div>
      <div class="sheet-dark_row" style="padding-bottom:3px;">
        <div class="sheet-cell sheet-actual_cell sheet-longbubble" data-i18n="final-value">Final</div>
        <input class="sheet-cell" type="number" name="attr_magicprojection_final" disabled="true" style="width:auto;"
        value="@{magicprojection_base}+@{dex_mod}+@{magicprojection_special}+@{magicprojection_temp}+@{aam}" />
      </div>
      <div class="sheet-style_row" style="margin-bottom:0px;">
        <div style="background-color:black; color:white;border-top-right-radius:1em;border-top-left-radius:1em;
        text-align:center; width:80px; padding-bottom:5px;margin-left:auto;margin-right:auto;">
          <span data-i18n="Imbalance">Imbalance</span>
          <input type="number" value="0" min="-30" max="30" name="attr_magicprojection_imbalance"/>
        </div>
      </div>
      <div class="sheet-dark_row" style="padding-top:5px;text-align:center;">
        <div class="sheet-cell" data-i18n="offensive">Off.</div>
        <input type="number" disabled="true" name="attr_magicprojection_offensive_final" class="sheet-cell" style="width:70px;"
        value="@{magicprojection_final}+@{magicprojection_imbalance}"/>
        
        <div class="sheet-cell" data-i18n="defensive">Def.</div>
        <input type="number" disabled="true" name="attr_magicprojection_defensive_final" class="sheet-cell" style="width:70px;"
        value="-1*@{magicprojection_imbalance}+@{magicprojection_final}"/>
      </div>
    </div>
    <div class="sheet-compact">
    	<div class="sheet-style_row">
        <div class="sheet-sidebubbled sheet-longbubble sheet-cell" data-i18n="temporary-bonus">Temp.</div>
        <input type="number" name="attr_magicprojection_temp" value="0" style="width:auto;">
      </div>
      <div class="sheet-dark_row" style="padding-top:5px;text-align:center;">
      	<button type="roll" class="sheet-label" name="roll_magicprojection_offensiveroll"
      	value="&{template:ABFini} {{name=^{magic-projection}}} {{desc=^{offensive}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{magicprojection_offensive_final}]]]]}}">
          <div class="sheet-cell" data-i18n="offensive">Off.</div>
          <input type="number" disabled="true" name="attr_magicprojection_offensive_final" class="sheet-cell" style="width:70px;"
          value="@{magicprojection_final}+@{magicprojection_imbalance}"/>
        </button> 
        <button type="roll" class="sheet-label" name="roll_magicprojection_defensiveroll"
        value="&{template:ABFini} {{name=^{magic-projection}}} {{desc=^{defensive}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{magicprojection_defensive_final}]]]]}}">
          <div class="sheet-cell" data-i18n="defensive">Def.</div>
          <input type="number" disabled="true" name="attr_magicprojection_defensive_final" class="sheet-cell" style="width:70px;"
          value="-1*@{magicprojection_imbalance}+@{magicprojection_final}"/>
        </button>
      </div>
    </div>
    </div><!-- end magic projection -->
    <div class="sheet-wrapper" style="top:0px;"><!-- magic accumulation -->
    <div class="sheet-title" data-i18n="magic-accumulation">Magic Accumulation</div>
        <div class="sheet-wrapper" style="margin:0px;">
        <input type="checkbox" name="attr_ma_option" class="sheet-option"><span class="sheet-option sheet-white"></span>
        <div class="sheet-title sheet-smalltitle" data-i18n="accumulation">Accumulation</div>
        <div class="sheet-expanded">
          <div class="sheet-style_row">
            <div class="sheet-secondary_bubble sheet-sidebubbled sheet-cell" data-i18n="base-value">Base</div>
            <select name="attr_ma_pow" class="sheet-cell" style="width:50px;">
                <option value="0">0</option>
                <option value="5">5</option>
                <option value="10">10</option>
                <option value="15">15</option>
                <option value="20">20</option>
                <option value="25">25</option>
                <option value="30">30</option>
                <option value="35">35</option>
            </select>
          </div>
          <div class="sheet-style_row">
            <div class="sheet-sidebubbled sheet-secondary_bubble sheet-cell" data-i18n="multiples-short">Mult.</div>
            <input class="sheet-cell" type="number" value="0" min="0" name="attr_ma_multiples" style="width:50px;"/>
          </div>
          <div class="sheet-style_row">
            <div class="sheet-sidebubbled sheet-secondary_bubble sheet-cell" data-i18n="special-bonus">Special</div>
            <input type="number" value="0" name="attr_ma_special" class="sheet-cell" style="width:50px;"/>
          </div>
        </div>
        <div class="sheet-style_row">
          <div class="sheet-sidebubbled sheet-secondary_bubble sheet-cell" data-i18n="temporary-bonus">Temp.</div>
          <input type="number" value="0" name="attr_ma_temp" class="sheet-cell" style="width:50px;"/>
        </div>
        <div class="sheet-dark_row">
            <div class="sheet-cell sheet-actual_cell sheet-secondary_bubble" style="" data-i18n="final-value">Final</div>
              <input type="number" name="attr_ma_final" disabled="true" style="width:50px;"
              value="@{ma_pow}*(1+@{ma_multiples})+@{ma_special}+@{ma_temp}+ceil(@{aap}/2)" class="sheet-cell"/>
        </div>
        </div>
        <div class="sheet-wrapper" style="margin:0px;">
        <input type="checkbox" name="attr_ma_regen_option" class="sheet-option"><span class="sheet-option sheet-white"></span>
        <div class="sheet-title sheet-smalltitle" data-i18n="magic-regeneration">Regeneration</div>
        <div class="sheet-expanded">
          <div class="sheet-style_row">
            <div class="sheet-sidebubbled sheet-secondary_bubble sheet-cell" data-i18n="magic-regneration-multiples">Regen. Mult.</div>
            <input type="number" value="0" min="0" name="attr_ma_regen_multiples" class="sheet-cell" style="width:50px;"/>
          </div>
          <div class="sheet-style_row">
            <div class="sheet-sidebubbled sheet-secondary_bubble sheet-cell" data-i18n="special-bonus">Special</div>
            <input type="number" value="0" name="attr_ma_regen_special" class="sheet-cell" style="width:50px;"/>
          </div>
          <div class="sheet-style_row">
            <div class="sheet-sidebubbled sheet-secondary_bubble sheet-cell" data-i18n="magic-recovery-multiplier">Recovery X</div>
            <input type="number" value="1" min="0" name="attr_ma_superior" class="sheet-cell" style="width:50px;"/>
          </div>
        </div>
        <div class="sheet-style_row">
          <div class="sheet-sidebubbled sheet-secondary_bubble sheet-cell" data-i18n="temporary-bonus">Temp.</div>
          <input type="number" value="0" name="attr_ma_regen_temp" class="sheet-cell" style="width:50px;"/>
        </div>
        <div class="sheet-dark_row">
            <div class="sheet-cell sheet-actual_cell sheet-secondary_bubble" style="width:auto;" data-i18n="magic-final-regeneration-per-day">Final Regen/Day</div>
            <input type="number" name="attr_ma_regen_final" disabled="true" class="sheet-cell" style="width:50px;"
            value="(@{ma_final}-@{ma_temp}+@{ma_regen_temp}-@{ma_special}+@{ma_regen_special}+@{ma_pow}*@{ma_regen_multiples})*@{ma_superior}"/>
        </div>
        </div>
    </div><!-- end magic accumulation -->
    <div class="sheet-wrapper" style="top:0px;"><!-- Zeon -->
      <input type="checkbox" name="attr_zeon_option" class="sheet-option"><span class="sheet-option sheet-white"></span>
      <div class="sheet-title" data-i18n="zeon">Zeon</div>  
      <div class="sheet-expanded">
        <div class="sheet-style_row">
          <div class="sheet-sidebubbled" data-i18n="base-value">Base</div>
          <input type="number" class="sheet-longnum" name="attr_zeon_base" value="0" min="0"/>
        </div>
        <div class="sheet-style_row">
          <div class="sheet-sidebubbled" data-i18n="class">Class</div>
          <input type="number" class="sheet-longnum" name="attr_zeon_class" value="0" min="0"/>
        </div>
        <div class="sheet-style_row">
          <div class="sheet-sidebubbled" data-i18n="special-bonus">Spec.</div>
          <input type="number" class="sheet-longnum" name="attr_zeon_special" value="0"/>
        </div>
      </div>
      <div class="sheet-style_row">
        <div class="sheet-sidebubbled" data-i18n="temporary-bonus">Temp.</div>
        <input type="number" class="sheet-longnum" name="attr_zeon_temp" value="0"/>
      </div>
      <div class="sheet-style_row">
        <div class="sheet-sidebubbled" data-i18n="final-value">Final</div>
        <input type="number" name="attr_zeon_final" disabled="true" class="sheet-longnum"
        value="@{zeon_base}+@{zeon_class}+@{zeon_special}+@{zeon_temp}+(25+10*(@{pow_final})+@{pow_mod}-ceil(((@{pow_final})-1)/(@{pow_final}))*5)"/>
      </div>
      <div class="sheet-dark_row">
        <div class="sheet-cell sheet-actual_cell" data-i18n="actual-value">Actual</div>
        <input class="sheet-longnum" type="number" name="attr_zeon_actual" value="0" min="0"/>
      </div>
    </div><!-- end zeon -->
   </div><!-- end first row -->
    <div class="sheet-2colrow" style="vertical-align:top;"><!-- second row -->
    	<div class="sheet-col2" style="text-align:left;width: 410px !important;vertical-align:top;">
    		<div style="display:inline-block;width:200px;text-align:center;">
          <div class="sheet-wrapper" style="width:180px;"><!-- magic levels -->
        	  <input type="checkbox" name="attr_ml_option" class="sheet-option"><span class="sheet-option sheet-white"></span>
        	  <div class="sheet-title" data-i18n="magic-levels">Magic Levels</div>
        	  <div class="sheet-expanded">
              <div class="sheet-style_row">
                <div class="sheet-sidebubbled sheet-longbubble" data-i18n="base-value">Base</div>
                <input type="number" name="attr_ml_base" min="0" value="0" class="sheet-longnum"/>
              </div>
              <div class="sheet-style_row">
                <div class="sheet-sidebubbled sheet-longbubble" data-i18n="from-intelligence">From INT</div>
                <select name="attr_ml_fromint" class="sheet-longnum">
                  <option value="0">0</option>
                  <option value="10">10</option>
                  <option value="20">20</option>
                  <option value="30">30</option>
                  <option value="40">40</option>
                  <option value="50">50</option>
                  <option value="75">75</option>
                  <option value="100">100</option>
                  <option value="150">150</option>
                  <option value="200">200</option>
                  <option value="300">300</option>
                  <option value="400">400</option>
                  <option value="500">500</option>
                  <option value="600">600</option>
                  <option value="700">700</option>
                  <option value="800">800</option>
                </select>
              </div>
              <div class="sheet-style_row">
                <div class="sheet-sidebubbled sheet-longbubble" data-i18n="special-bonus">Special</div>
                <input type="number" name="attr_ml_spec" value="0" class="sheet-longnum"/>
              </div>
            </div>
        	  <div class="sheet-style_row">
              <div class="sheet-sidebubbled sheet-longbubble" data-i18n="temporary-bonus">Temp.</div>
              <input type="number" name="attr_ml_temp" value="0" class="sheet-longnum"/>
        	  </div>
        	  <div class="sheet-style_row">
              <div class="sheet-sidebubbled sheet-longbubble" data-i18n="final-value">Final</div>
              <input type="number" name="attr_ml_final" disabled="true" class="sheet-longnum"
              value="@{ml_spec}+@{ml_base}+@{ml_fromint}+@{ml_temp}"/>
        	  </div>
        	  <div class="sheet-dark_row">
              <div class="sheet-cell sheet-actual_cell" data-i18n="used-value">Used</div>
              <input class="sheet-cell sheet-longnum" type="number" name="attr_ml_used" value="0" style="width:60px;" min="0"/>
        	  </div>
          </div><br/><!-- end magic levels -->
          <div class="sheet-dark_row sheet-wrapper sheet-point_tracker"><!-- magic theorem -->
        	  <div class="sheet-style_row">
              <div class="sheet-cell sheet-actual_cell" style="width:120px;" data-i18n="magic-theorem">Magic Theorem</div>
        	  </div>
        	  <div class="sheet-style_row">
              <select name="attr_magic_theorem" class="sheet-cell" style="width:120px;">
                <option value="1" data-i18n="magic-theorem-standard">Standard</option>
                <option value="2" data-i18n="magic-theorem-onmyodo">Onmyodo</option>
                <option value="3" data-i18n="magic-theorem-vodoun">Vodoun</option>
                <option value="4" data-i18n="magic-theorem-shamanism">Shamanism</option>
                <option value="5" data-i18n="magic-theorem-natural">Natural Magic</option>
              </select>
          	</div>
      	  </div><br/><!-- end Magic theorem -->
      	  <div class="sheet-dark_row sheet-wrapper sheet-point_tracker"><!-- Innate Magic -->
          <div class="sheet-style_row">
            <div class="sheet-cell sheet-actual_cell" style="width:auto;" data-i18n="innate-magic">Innate Magic</div>
            <input class="sheet-cell" type="number" name="attr_innate_magic" min="0"/>
          </div>
          </div><br/><!-- end Innate magic -->
          <div class="sheet-dark_row sheet-wrapper sheet-point_tracker"><!-- Magic Ability -->
            <div class="sheet-style_row">
              <div class="sheet-cell sheet-actual_cell" style="width:auto;" data-i18n="magic-ability">Magic Ability</div>
              <select name="attr_magic_ability" class="sheet-cell" style="width:50px;">
                <option value="@{agi_final}" class="sheet-physical" data-i18n="agility-short">AGI</option>
                <option value="@{con_final}" class="sheet-physical" data-i18n="constitution-short">CON</option>
                <option value="@{dex_final}" class="sheet-physical" data-i18n="dexterity-short">DEX</option>
                <option value="@{str_final}" class="sheet-physical" data-i18n="strength-short">STR</option>
                <option value="@{int_final}" class="sheet-mental" data-i18n="intelligence-short" selected="true">INT</option>
                <option value="@{per_final}" class="sheet-mental" data-i18n="perception-short">PER</option>
                <option value="@{pow_final}" class="sheet-mental" data-i18n="soul-power-short">POW</option>
                <option value="@{wp_final}" class="sheet-mental" data-i18n="willpower-short">WP</option>
              </select>
            </div>
          </div><!-- end Magic Ability -->
        </div>
        <div style="display:inline-block;width:210px;float:right;">
          <div class="sheet-wrapper"><!-- Spell paths -->
            <div class="sheet-title" data-i18n="spell-paths">Spell Paths</div>
            <div class="sheet-dark_row">
              <div class="sheet-cell" style="width:130px;" data-i18n="spell-path">Path</div>
              <div class="sheet-cell" data-i18n="level">Level</div>
            </div>
            <fieldset class="repeating_spellpaths">
              <input type="text" name="attr_spellpath_name" style="width:130px;"/>
              <input type="number" name="attr_spellpath_level" min="0" max="100"/>
            </fieldset>
          </div><!-- end spell paths -->
        </div>
    	  <div class="sheet-wrapper sheet-clear" style="text-align:left;"><!-- summoning -->
        	<div class="sheet-title" data-i18n="summoning-abilities">Summoning Abilities</div>
        	<div class="sheet-dark_row">
            <div class="sheet-cell sheet-longbubble" data-i18n="ability">Ability</div>
            <div class="sheet-cell" data-i18n="base-value">Base</div>
            <div class="sheet-cell" data-i18n="class">Class</div>
            <div class="sheet-cell" data-i18n="special-bonus">Special</div>
            <div class="sheet-cell" data-i18n="final-value">Final</div>
        	</div>
        	<div class="sheet-style_row ">
            <div class="sheet-sidebubbled sheet-longbubble" data-i18n="summon-ritual">Summon</div>
            <input type="number" name="attr_summon_base" value="0" min="0"/>
            <input type="number" name="attr_summon_class" value="0" min="0"/>
            <input type="number" name="attr_summon_special" value="0"/>
            <input type="number" name="attr_summon_final" disabled="true"
            value="@{summon_base}+@{summon_class}+@{summon_special}+@{pow_mod}+@{aap}"/>
            <button type="roll" name="roll_summon" class="sheet-d100-roll-button"
            value="&{template:ABFini} {{name=^{summon-ritual}}} {{desc=^{ritual}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{summon_final}]]]]}}"></button>
        	</div>
        	<div class="sheet-style_row" style="margin-top:0px; margin-bottom:0px;">
            <div class="sheet-sidebubbled sheet-longbubble" data-i18n="control-ritual">Control</div>
            <input type="number" name="attr_control_base" value="0" min="0"/>
            <input type="number" name="attr_control_class" value="0" min="0"/>
            <input type="number" name="attr_control_special" value="0"/>
            <input type="number" name="attr_control_final" disabled="true"
            value="@{control_base}+@{control_class}+@{control_special}+@{wp_mod}+@{aap}"/>
            <button type="roll" name="roll_control" class="sheet-d100-roll-button"
            value="&{template:ABFini} {{name=^{control-ritual}}} {{desc=^{ritual}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{control_final}]]]]}}"></button>
        	</div>
        	<div class="sheet-style_row">
            <div class="sheet-sidebubbled sheet-longbubble" data-i18n="bind-ritual">Bind</div>
            <input type="number" name="attr_bind_base" value="0" min="0"/>
            <input type="number" name="attr_bind_class" value="0" min="0"/>
            <input type="number" name="attr_bind_special" value="0"/>
            <input type="number" name="attr_bind_final" disabled="true"
            value="@{bind_base}+@{bind_class}+@{bind_special}+@{pow_mod}+@{aap}"/>
            <button type="roll" name="roll_bind" class="sheet-d100-roll-button"
            value="&{template:ABFini} {{name=^{bind-ritual}}} {{desc=^{ritual}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{bind_final}]]]]}}"></button>
        	</div>
        	<div class="sheet-style_row">
            <div class="sheet-sidebubbled sheet-longbubble" data-i18n="banish-ritual">Banish</div>
            <input type="number" name="attr_banish_base" value="0" min="0"/>
            <input type="number" name="attr_banish_class" value="0" min="0"/>
            <input type="number" name="attr_banish_special" value="0" />
            <input type="number" name="attr_banish_final" disabled="true"
            value="@{banish_base}+@{banish_class}+@{banish_special}+@{pow_mod}+@{aap}"/>
            <button type="roll" name="roll_banish" class="sheet-d100-roll-button"
            value="&{template:ABFini} {{name=^{banish-ritual}}} {{desc=^{ritual}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{banish_final}]]]]}}"></button>
        	</div>
        </div><!-- end summoning -->
      </div><!-- end 1nd col -->
      <div class="sheet-col2" style="width:auto;vertical-align:top;">
        <div class="sheet-wrapper" style="width:362px;"><!-- spells -->
          <div class="sheet-title" data-i18n="free-access-and-bought-spells">Free Access and Bought Spells</div>
          <fieldset class="repeating_spells">
            <div class="sheet-clear" style="vertical-align:top;">
                <input type="checkbox" name="attr_spell_option" class="sheet-option"><span class="sheet-option"></span>
    	          <div class="sheet-expanded"> 
    	            <div class="sheet-style_row">
    	              <div class="sheet-sidebubbled sheet-longbubble" data-i18n="name">Name</div>
    	              <input type="text" name="attr_spell_name" style="width:240px;"/>
    	            </div>
    	            <div class="sheet-style_row">
    	              <div class="sheet-sidebubbled sheet-longbubble" data-i18n="spell-path">Path</div>
    	              <input type="text" name="attr_spell_path" style="width:130px;"/>
    	              <div class="sheet-sidebubbled sheet-longbubble" data-i18n="bought">Bought?</div>
    	              <select name="attr_spell_bought" class="sheet-cell" style="width:50px;">
                      <option value="yes" data-i18n="yes">Yes</option>
                      <option value="no" data-i18n="no">No</option>
                    </select>
    	            </div>
    	            <div class="sheet-style_row">
    	              <div class="sheet-sidebubbled sheet-longbubble" data-i18n="level">Level</div>
    	              <input type="number" name="attr_spell_level" style="width:130px;"/>
    	              <div class="sheet-sidebubbled sheet-longbubble" data-i18n="spell-mastery">Mastery?</div>
    	              <input type="number" name="attr_spell_mastery" style="width:50px;" value="0"/>
    	            </div>
    	            <div class="sheet-style_row">
    	              <div class="sheet-sidebubbled sheet-longbubble" data-i18n="type">Type</div>
    	              <input type="text" name="attr_spell_type" style="width:130px;" />
    	              <div class="sheet-sidebubbled sheet-longbubble" data-i18n="cost">Cost</div>
    	              <input type="number" name="attr_spell_cost" style="width:50px;" value="0"/>
    	            </div>
    	            <div class="sheet-style_row">
    	              <div class="sheet-sidebubbled sheet-longbubble" data-i18n="maintanance">Maint.</div>
    	              <input type="text" name="attr_spell_maint" style="width:130px;">
                    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="projection">Projection</div>
    	              <select name="attr_spell_projection" class="sheet-cell" style="width:50px;">
                      <option value="[^{projection}](~repeating_spells_offensiveroll)" data-i18n="offensive">Offensive</option>
                      <option value="[^{projection}](~repeating_spells_defensiveroll)" data-i18n="defensive">Defensive</option>
                    </select>
    	            </div>
    	            <div class="sheet-style_row">
    	            	<button type="roll" class="sheet-label" name="roll_offensiveroll"
    	            	value="&{template:ABFdefault} {{title=^{magic-projection}}} {{name=^{offensive}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{magicprojection_offensive_final}]]]]}}">
    	            	<div class="sheet-cell" data-i18n="offensive">Off.</div>
    	            	</button>
    	              <button type="roll" class="sheet-label" name="roll_defensiveroll"
    	              value="&{template:ABFdefault} {{title=^{magic-projection}}} {{name=^{defensive}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{magicprojection_defensive_final}]]]]}}">
    	                <div class="sheet-cell" data-i18n="defensive">Def.</div>
    	              </buton>
    	            </div>
    	            <div class="sheet-dark_row">
    	              <div class="sheet-cell" data-i18n="description">Description</div>
    	            </div>
    	            <div class="sheet-style_row">
    	              <textarea name="attr_spell_desc" style="width:333px;max-width:100%;height:20px"></textarea>
    	            </div>
    	            <div class="sheet-style_row">
    	            	<div class="sheet-sidebubbled sheet-longbubble" data-i18n="system">System</div>
    	            	<input type="radio" name="attr_spell_system" class="sheet-small_tab sheet-option2" value="0" checked="checked"><span data-i18n-title="new" title="New"></span>
    	            	<input type="radio" name="attr_spell_system" class="sheet-small_tab" value="1"><span data-i18n-title="old" title="Old"></span>
    	            	<div class="sheet-expanded">
    	            	  <div class="sheet-dark_row">
    	            	  	<div class="sheet-cell sheet-longbubble" data-i18n="rank" style="width:90px;">Rank</div>
    	            	    <div class="sheet-cell" data-i18n="requirement" style="width:80px;">Req.</div>
    	            	    <div class="sheet-cell" data-i18n="zeon" style="width:80px;">Zeon</div>
    	            	    <div class="sheet-cell" data-i18n="maintanance" style="width:80px;">Maint.</div>
    	            	  </div>
    	            	  <div class="sheet-style_row">
    	            	  	<div class="sheet-sidebubbled sheet-longbubble" data-i18n="basic" style="width:90px;">Basic</div>
    	            	    <input type="number" name="attr_spell_basic_req" style="width:79px;"/>
    	            	    <input type="number" name="attr_spell_basic_zeon" style="width:78px;"/>
    	            	    <input type="number" name="attr_spell_basic_maint" style="width:79px;"/>
    	            	  </div>
    	            	  <div class="sheet-style_row">
    	            	  	<textarea name="attr_spell_basic_desc" style="width:333px;max-width:100%;height:20px"></textarea>
    	            	  </div>
    	            	  <div class="sheet-style_row">
    	            	    <span class="sheet-longbubble" style="display:inline-block">
    	            	      <button type="roll" class="sheet-label" name="roll_spell_basic"
    	                    value="&{template:ABFini} {{name=^{basic}}} {{desc=@{spell_basic_name}}} {{roll=@{spell_basic_roll}}} ">
    	                      <span data-i18n="basic">Basic</span>
    	                    </button>
    	                  </span>
    	            	    <span data-i18n="roll">Roll</span>
    	            	    <input type="text" name="attr_spell_basic_roll" style="width:110px;"/>
    	            	    <span data-i18n="roll-as">as</span>
    	            	    <input type="text" name="attr_spell_basic_name" style="width:80px;"/>
    	            	  </div>
    	            	  <div class="sheet-style_row">
    	            	  	<div class="sheet-sidebubbled sheet-longbubble" data-i18n="intermediate" style="width:90px;">Intermediate</div>
    	            	    <input type="number" name="attr_spell_inter_req" style="width:79px;"/>
    	            	    <input type="number" name="attr_spell_inter_zeon" style="width:78px;"/>
    	            	    <input type="number" name="attr_spell_inter_maint" style="width:79px;"/>
    	            	  </div>
    	            	  <div class="sheet-style_row">
    	            	  	<textarea name="attr_spell_inter_desc" style="width:333px;max-width:100%;height:20px"></textarea>
    	            	  </div>
    	            	  <div class="sheet-style_row">
    	            	    <span class="sheet-longbubble" style="display:inline-block">
    	            	      <button type="roll" class="sheet-label" name="roll_spell_inter"
    	                      value="&{template:ABFini} {{name=^{intermediate}}} {{desc=@{spell_inter_name}}} {{roll=@{spell_inter_roll}}} ">
    	                        <span data-i18n="intermediate">Intermediate</span>
    	                    </button>
    	            	    </span>
    	            	    <span data-i18n="roll">Roll</span>
    	            	    <input type="text" name="attr_spell_inter_roll" style="width:110px;"/>
    	            	    <span data-i18n="roll-as">as</span>
    	            	    <input type="text" name="attr_spell_inter_name" style="width:80px;"/>
    	            	  </div>
    	            	  <div class="sheet-style_row">
    	            	  	<div class="sheet-sidebubbled sheet-longbubble" data-i18n="advanced" style="width:90px;">Advanced</div>
    	            	    <input type="number" name="attr_spell_advan_req" style="width:79px;"/>
    	            	    <input type="number" name="attr_spell_advan_zeon" style="width:78px;"/>
    	            	    <input type="number" name="attr_spell_advan_maint" style="width:79px;"/>
    	            	  </div>
    	            	  <div class="sheet-style_row">
    	            	  	<textarea name="attr_spell_advan_desc" style="width:333px;max-width:100%;height:20px"></textarea>
    	            	  </div>
    	            	  <div class="sheet-style_row">
    	            	    <span class="sheet-longbubble" style="display:inline-block" style="width:90px;">
    	            	      <button type="roll" class="sheet-label" name="roll_spell_advan"
    	                      value="&{template:ABFini} {{name=^{advanced}}} {{desc=@{spell_advan_name}}} {{roll=@{spell_advan_roll}}} ">
    	                        <span data-i18n="advanced">Advanced</span>
    	                    </button>
    	            	    </span>
    	            	    <span data-i18n="roll">Roll</span>
    	            	    <input type="text" name="attr_spell_advan_roll" style="width:110px;"/>
    	            	    <span data-i18n="roll-as">as</span>
    	            	    <input type="text" name="attr_spell_advan_name" style="width:80px;"/>
    	            	  </div>
    	            	  <div class="sheet-style_row">
    	            	  	<div class="sheet-sidebubbled sheet-longbubble" data-i18n="arcane" style="width:90px;">Arcane</div>
    	            	    <input type="number" name="attr_spell_arcan_req" style="width:79px;"/>
    	            	    <input type="number" name="attr_spell_arcan_zeon" style="width:78px;"/>
    	            	    <input type="number" name="attr_spell_arcan_maint" style="width:79px;"/>
    	            	  </div>
    	            	  <div class="sheet-style_row">
    	            	  	<textarea name="attr_spell_arcan_desc" style="width:333px;max-width:100%;height:20px"></textarea>
    	            	  </div>
    	            	  <div class="sheet-style_row">
    	            	    <span class="sheet-longbubble" style="display:inline-block" style="width:90px;">
    	            	      <button type="roll" class="sheet-label" name="roll_spell_arcan"
    	                      value="&{template:ABFini} {{name=^{arcane}}} {{desc=@{spell_arcan_name}}} {{roll=@{spell_arcan_roll}}} ">
    	                        <span data-i18n="arcane">Arcane</span>
    	                    </button>
    	            	    </span>
    	            	    <span data-i18n="roll">Roll</span>
    	            	    <input type="text" name="attr_spell_arcan_roll" style="width:110px;"/>
    	            	    <span data-i18n="roll-as">as</span>
    	            	    <input type="text" name="attr_spell_arcan_name" style="width:80px;"/>
    	            	  </div>
    	            	</div>
    	            	<div class="sheet-compact">
    	            	  <div class="sheet-style_row">
    	            	  	<div class="sheet-sidebubbled sheet-longbubble" data-i18n="added-effect" style="width:90px;">Added effect</div>
    	            	    <input type="text" name="attr_spell_addef1_name" style="width:58px;"/>
    	            	    <input type="text" name="attr_spell_addef2_name" style="width:58px;"/>
    	            	    <input type="text" name="attr_spell_addef3_name" style="width:58px;"/>
    	            	    <input type="text" name="attr_spell_addef4_name" style="width:58px;"/>
    	            	  </div>
    	            	  <div class="sheet-style_row">
    	            	  	<div class="sheet-sidebubbled sheet-longbubble" data-i18n="base-value" style="width:90px;">Base</div>
    	            	    <input type="number" name="attr_spell_addef1_base" style="width:58px;" value="0"/>
    	            	    <input type="number" name="attr_spell_addef2_base" style="width:58px;" value="0"/>
    	            	    <input type="number" name="attr_spell_addef3_base" style="width:58px;" value="0"/>
    	            	    <input type="number" name="attr_spell_addef4_base" style="width:58px;" value="0"/>
    	            	  </div>
    	            	  <div class="sheet-style_row">
    	            	  	<div class="sheet-sidebubbled sheet-longbubble" data-i18n="added-value" style="width:90px;">Added</div>
    	            	    <input type="number" name="attr_spell_addef1_add" style="width:58px;" value="0"/>
    	            	    <input type="number" name="attr_spell_addef2_add" style="width:58px;" value="0"/>
    	            	    <input type="number" name="attr_spell_addef3_add" style="width:58px;" value="0"/>
    	            	    <input type="number" name="attr_spell_addef4_add" style="width:58px;" value="0"/>
    	            	  </div>
    	            	  <div class="sheet-style_row">
    	            	  	<div class="sheet-sidebubbled sheet-longbubble" data-i18n="maximum-zeon-multiplier" style="width:115px;">Max. Zeon Multi.</div>
    	            	    <input type="number" name="attr_spell_zeonmulti" value="0" style="width:60px;"/>
    	            	    <div class="sheet-sidebubbled sheet-longbubble" data-i18n="base-zeon" style="width:90px;">Base Zeon</div>
    	            	    <input type="number" name="attr_spell_zeon" value="0" style="width:54px;"/>
    	            	  </div>
    	            	  <div class="sheet-style_row">
    	            	    <span class="sheet-longbubble" style="display:inline-block" style="width:90px;">
    	            	      <button type="roll" class="sheet-label" name="roll_spell_old"
    	                      value="&{template:ABFspellOld} {{addef1_name=@{spell_addef1_name}}} {{addef1_roll=[[@{spell_addef1_base}+@{spell_addef1_add}*?{Added Effects|0}]]}} {{addef2_name=@{spell_addef2_name}}} {{addef2_roll=[[@{spell_addef2_base}+@{spell_addef2_add}*?{Added Effects|0}]]}} {{addef3_name=@{spell_addef3_name}}} {{addef3_roll=[[@{spell_addef3_base}+@{spell_addef3_add}*?{Added Effects|0}]]}} {{addef4_name=@{spell_addef4_name}}} {{addef4_roll=[[@{spell_addef4_base}+@{spell_addef4_add}*?{Added Effects|0}]]}} {{zeon=[[@{spell_zeon}+10*?{Added Effects|0}]]}} {{zeon-max=[[@{spell_zeonmulti}*((@{magic_ability})+@{spell_mastery})]]}}">
    	                        <span data-i18n="cast-spell">Cast Spell</span>
    	                    </button>
    	            	    </span>
    	            	  </div>
    	            	  
    	            	</div>
    	            </div>
    	          </div>
    	          <div class="sheet-compact">
    	            <button type="roll" class="sheet-label" name="roll_spell"
    	            value="&{template:ABFspell} {{name=@{spell_name}}} {{path=@{spell_path}}} {{level=@{spell_level}}} {{mastery=@{spell_mastery}}} {{desc=@{spell_desc}}} {{maint=@{spell_maint}}} {{type=@{spell_type}}} {{projection=@{spell_projection}}} {{system=[[@{spell_system}]]}} {{basic_req=@{spell_basic_req}}} {{basic_zeon=@{spell_basic_zeon}}} {{basic_maint=@{spell_basic_maint}}} {{basic_desc=@{spell_basic_desc}}} {{basic_roll_name=[^{basic}](~repeating_spells_spell_basic)}} {{inter_req=@{spell_inter_req}}} {{inter_zeon=@{spell_inter_zeon}}} {{inter_maint=@{spell_inter_maint}}} {{inter_desc=@{spell_inter_desc}}} {{inter_roll_name=[^{intermediate}](~repeating_spells_spell_inter)}} {{advan_req=@{spell_advan_req}}} {{advan_zeon=@{spell_advan_zeon}}} {{advan_maint=@{spell_advan_maint}}} {{advan_desc=@{spell_advan_desc}}} {{advan_roll_name=[^{advanced}](~repeating_spells_spell_advan)}} {{arcan_req=@{spell_arcan_req}}} {{arcan_zeon=@{spell_arcan_zeon}}} {{arcan_maint=@{spell_arcan_maint}}} {{arcan_desc=@{spell_arcan_desc}}} {{arcan_roll_name=[^{arcane}](~repeating_spells_spell_arcan)}} {{zeon=@{spell_zeon}}} {{zeon-max=[[@{spell_zeonmulti}*((@{magic_ability})+@{spell_mastery})]]}} {{old_roll_name=[cast-spell](~repeating_spells_spell_old)}}">
    	              <input type="text" name="attr_spell_name" style="width:190px;"/>
    	              <input type="text" name="attr_spell_path" style="width:130px;"/>
    	            </button>
    	          </div>
    	      </div>
          </fieldset>
        </div><!-- end spells -->  
      </div>
    </div><!-- end second row -->
    <div class="sheet-style_row sheet-2colrow"><!-- third row -->
    <div class="sheet-col2" style="margin-right:0px; width:335px;">
        <div class="sheet-wrapper"><!-- Acive spells and creatures -->
        <div class="sheet-title" data-i18n="active-spells-and-creatures">Active Spells and Creatures</div>
        <div class="sheet-dark_row">
                <div class="sheet-cell" style="width:160px;" data-i18n="active-spell-or-bound-creature">Active spell or Bound Creature</div>
                <div class="sheet-cell" data-i18n="zeon" style="width:60px">Zeon</div>
                <div class="sheet-cell" data-i18n="daily-cost">Daily Cost</div>
            </div>
            <fieldset class="repeating_spellcreature">
                <div class="sheet-clear" style="vertical-align:top;">
                  <input type="checkbox" name="attr_daily_spell_option" class="sheet-option"><span class="sheet-option"></span>
                  <input class="sheet-cell" type="text" name="attr_daily_spell_creature_name" style="width:160px;"/>
                  <input class="sheet-cell" type="number" name="attr_daily_spell_zeon" value="0"  min="0"  style="width:60px"/>
                  <input class="sheet-cell" type="number" name="attr_daily_spell_creature_cost" value="0"  min="0"/>
                  <div class="sheet-expanded sheet-style_row">
                    <textarea name="attr_daily_spell_desc" style="width:100%;max-width:100%;"></textarea>
                  </div>
                </div>	
            </fieldset>
            <div class="sheet-dark_row" style="padding-top: 4px;">
                <div class="sheet-cell sheet-actual_cell" style="margin-left:5px; width:auto;" data-i18n="total-cost">Total Cost</div>
                <input type="number" name="attr_daily_spell_creature_totalcost"
                class="sheet-cell" value="0" min="0" style="margin-left:5px;"/>
                <div class="sheet-cell sheet-actual_cell"style="margin-left:5px; width:auto;" data-i18n="final-daily-regeneration">Final Daily Regen</div>
                <input class="sheet-cell" type="number" value="0"
                name="attr_daily_spell_creature_regen"/>
            </div>
        </div><!-- end active spells and creatures -->
   </div><!-- end first column -->
   <div class="sheet-col2" style="width:460px">
        <div class="sheet-wrapper" style="width:440px"><!-- Invocations -->
        <div class="sheet-title" data-i18n="invocations">Invocations</div>
        <div class="sheet-dark_row">
            <div class="sheet-cell" style="width:240px;" data-i18n="name">Name</div>
            <div class="sheet-cell" style="width:70px;" data-i18n="cost">Cost</div>
            <div class="sheet-cell" style="width:70px;" data-i18n="difficulty">Difficulty</div>
        </div>
        <fieldset class="repeating_invocations">
          <div class="sheet-clear" style="vertical-align:top;">
            <input type="checkbox" name="attr_invocation_option" class="sheet-option"><span class="sheet-option"></span>
    	      <div class="sheet-expanded"> 
    	      	<div class="sheet-style_row">
                <input type="text" style="width:240px;" name="attr_invocation_name"/>
                <input type="number" class="sheet-cell" name="attr_invocation_cost" value="0" min="0" style="width:70px;"/>
                <input type="number" class="sheet-cell" name="attr_invocation_diff" value="0"  min="0" style="width:70px;"/>
              </div>
              <div class="sheet-style_row">
                <textarea name="attr_invocation_desc" style="width:100%;max-width:100%;"></textarea>
              </div>
            </div>
            <div class="sheet-compact">
              <button type="roll" name="roll_invocation"  class="sheet-label"
              value="&{template:ABFdefault} {{title=@{invocation_name}}} {{name=@{invocation_name}}} {{roll=[[1d100+@{summon_final}+?{Modifiers?|0}]]}} {{diff=[[@{invocation_diff}]]}} {{cost=[[@{invocation_cost}]] ^{zeon}}} {{desc=@{invocation_desc}}}">
                <input type="text" style="width:240px;" name="attr_invocation_name"/>
                <input type="number" class="sheet-cell" name="attr_invocation_cost" value="0" min="0" style="width:70px;"/>
                <input type="number" class="sheet-cell" name="attr_invocation_diff" value="0"  min="0" style="width:70px;"/>
              </button>
            </div>
          </div>
        </fieldset>
        </div><!-- end invocations-->
        
   </div><!-- end second column -->
   </div><!-- end third row -->
   <div class="sheet-style_row"><!-- fourth row -->
   </div><!-- end fourth row -->
</div>
</div><!-- end magic page tab -->

<div class="sheet-tab-content sheet-tab3"><!-- Psychic Page tab -->
<div class="sheet-page_wrapper sheet-wrapper">
    <div class="sheet-2colrow">
        <div class="sheet-col2" style="width:510px!important;margin-right:0px;">
          <div class="sheet-wrapper" style="width:151px;"><!-- Psychic points -->
            <input type="checkbox" name="attr_pp_option" class="sheet-option"><span class="sheet-option sheet-white"></span>
            <div class="sheet-title" data-i18n="psychic-points">Psychic Points</div>
            <div class="sheet-expanded"> 
              <div class="sheet-style_row">
                <div class="sheet-sidebubbled sheet-longbubble" data-i18n="base-value">Base</div>
                <input type="number" name="attr_pp_base" value="0" min="0"/>
              </div>
              <div class="sheet-style_row">
                <div class="sheet-sidebubbled sheet-longbubble" data-i18n="class">Class</div>
                <input type="number" name="attr_pp_class" value="0" min="0"/>
              </div>
            </div>
            <div class="sheet-style_row">
              <div class="sheet-sidebubbled sheet-longbubble" data-i18n="final-value">Final</div>
              <input type="number" name="attr_pp_final" disabled="true" value="@{pp_class}+@{pp_base}"/>
            </div>
            <div class="sheet-dark_row">
              <div class="sheet-cell sheet-actual_cell sheet-longbubble" data-i18n="used-value">Used</div>
              <input class="sheet-cell" type="number" name="attr_pp_used" value="0" min="0"/>
            </div>
            <div class="sheet-dark_row">
              <div class="sheet-cell sheet-actual_cell sheet-longbubble" data-i18n="free-psychic-points">Free PP</div>
              <input class="sheet-cell" type="number" name="attr_pp_free" value="0" min="0"/>
            </div>
          </div><!-- end psychic points -->
          <div class="sheet-wrapper" style="width:151px;"><!-- psychic potential -->
          	<input type="checkbox" name="attr_potential_option" class="sheet-option"><span class="sheet-option sheet-white"></span>
            <div class="sheet-title" data-i18n="psychic-potential">Potential</div>
            <div class="sheet-expanded">
              <div class="sheet-style_row">
                <div class="sheet-sidebubbled sheet-longbubble" data-i18n="base-value">Base</div>
                <input type="number" value="0" min="0" name="attr_potential_base"/>
              </div>
              <div class="sheet-style_row">
                <div class="sheet-sidebubbled sheet-longbubble" data-i18n="spent-psychic-points">Spent PP</div>
                <select name="attr_potential_spent" class="sheet-cell">
                  <option value="0">0</option>
                  <option value="10">1</option>
                  <option value="20">3</option>
                  <option value="30">6</option>
                  <option value="40">10</option>
                  <option value="50">15</option>
                  <option value="60">21</option>
                  <option value="70">28</option>
                  <option value="80">36</option>
                  <option value="90">45</option>
                  <option value="100">55</option>
                </select>
              </div>
              <div class="sheet-style_row">
                <div class="sheet-sidebubbled sheet-longbubble" data-i18n="special-bonus">Special</div>
                <input type="number" value="0" name="attr_potential_special"/>
              </div>
            </div>
            <div class="sheet-style_row">
              <div class="sheet-sidebubbled sheet-longbubble" data-i18n="temporary-bonus">Temp.</div>
              <input type="number" value="0" name="attr_potential_temp"/>
            </div>
            <div class="sheet-dark_row" style="padding-bottom:3px;">
              <div class="sheet-cell sheet-actual_cell sheet-longbubble" data-i18n="final-value">Final</div>
              <input type="hidden" disabled="true" name="attr_max_xy" value="((((@{wp_final})+4) + abs((@{wp_final})-4)) / 2)" />
              <input type="number" name="attr_potential_final" disabled="true"
              value="@{potential_spent}+@{potential_base}+@{potential_special}+@{potential_temp}+((@{max_xy}*10)-40)+((@{max_xy}*10)-140)*floor(@{max_xy}/15)+@{aap}" class="sheet-cell"/>
            </div>
            <div class="sheet-dark_row" style="text-align:center;">
              <button type="roll" name="roll_psychic_potential" class="sheet-d100-roll-button sheet-widebutton"
              value="&{template:ABFdefault} {{title=^{psychic}}} {{name=^{psychic-potential}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{potential_final}]]]]}}"></button>
            </div>
          </div><!-- end Psychic Potential -->
          <div class="sheet-wrapper" style="width:151px;"><!-- psychic projection -->
          	<input type="checkbox" name="attr_projection_option" class="sheet-option"><span class="sheet-option sheet-white"></span>
            <div class="sheet-title" data-i18n="psychic-projection">Projection</div>
            <div class="sheet-expanded">
              <div class="sheet-style_row">
                <div class="sheet-sidebubbled sheet-longbubble" data-i18n="base-value">Base</div>
                <input type="number" value="0" min="0" name="attr_projection_base"/>
              </div>
              <div class="sheet-style_row">
                <div class="sheet-sidebubbled sheet-longbubble" data-i18n="special-bonus">Special</div>
                <input type="number" value="0" name="attr_projection_special"/>
              </div>
            </div>
            <div class="sheet-style_row">
              <div class="sheet-sidebubbled sheet-longbubble" data-i18n="temporary-bonus">Temp.</div>
              <input type="number" value="0" name="attr_projection_temp"/>
            </div>
            <div class="sheet-dark_row" style="padding-bottom:3px;">
              <div class="sheet-cell sheet-actual_cell sheet-longbubble" data-i18n="final-value">Final</div>
              <input type="number" name="attr_projection_final" disabled="true"
              value="@{projection_base}+@{projection_special}+@{projection_temp}+@{dex_mod}+@{aam}"
              class="sheet-cell"/>
            </div>
            <div class="sheet-dark_row" style="text-align:center;height:auto;">
              <button type="roll" name="roll_psychic_projection" class="sheet-d100-roll-button sheet-widebutton"
              value="&{template:ABFdefault} {{title=^{psychic}}} {{name=^{psychic-projection}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{projection_final}]]]]}}"></button>
            </div>
          </div><!-- end Psychic Projection -->
        </div>
        <div class="sheet-col2" style="width:285px!important;vertical-align:top;">
          <div class="sheet-wrapper"><!-- psychic disciplines -->
            <div class="sheet-title" data-i18n="psychic-disciplines">Disciplines</div>
            <fieldset class="repeating_disciplines">
              <input type="text" name="attr_discipline_name" style="width:260px;">
            </fieldset>
          </div><!-- end disciplines -->
        </div>
    </div>
    
    <div class="sheet-2colrow" style="vertical-align:top;">
        <div class="sheet-col2" style="width:370px!important;margin-right:0px">
                <div class="sheet-wrapper"><!--Mental Patterns-->
                <div class="sheet-title" data-i18n="mental-patterns">Mental Patterns</div>
                <div class="sheet-dark_row">
                    <div class="sheet-cell" style="width:160px;" data-i18n="name">Name</div>
                    <div class="sheet-cell" style="" data-i18n="cost">Cost</div>
                    <div class="sheet-cell" style="width:80px;" data-i18n="cancelled">Cancelled</div>
                    <div class="sheet-cell" style="" data-i18n="total-cost">Total Cost</div>
                </div>
                <fieldset class="repeating_mentalpatterns">
                    <input name="attr_mental_pattern_name" type="text" style="width:160px;"/>
                    <input name="attr_mental_pattern_cost" type="number" value="0" min="0"/>
                    <input name="attr_mental_pattern_cancelled" type="checkbox" class="sheet-cell" style="width:80px;"/>
                    <input name="attr_mental_pattern_total" type="number" value="0"
                    min="0"/>
                </fieldset>
                <div class="sheet-dark_row">
                    <div style="text-align:center;" data-i18n="modifiers">Modifiers</div>
                </div>
                <fieldset class="repeating_mentalmods">
                    <input class="sheet-cell" type="text" style="width:339px;" name="attr_mental_pattern_effects" />
                </fieldset>
            </div><!-- end Mental Patterns-->
            <div class="sheet-wrapper" style="width:320px;"><!-- known powers -->
                <div class="sheet-title" data-i18n="known-powers">Known Powers</div>
                <fieldset class="repeating_psychicpowers">
                  <div class="sheet-clear" style="vertical-align:top;">
                    <input type="checkbox" name="attr_psychic_power_option" class="sheet-option"><span class="sheet-option"></span>
                    <div class="sheet-expanded"> 
                      <div class="sheet-style_row">
                        <span class="sheet-sidebubbled" data-i18n="name">Name</span>
                        <input type="text" name="attr_psychic_power_name" style="width:220px;">
                      </div>
                      <div class="sheet-style_row">
                        <span class="sheet-sidebubbled" data-i18n="bonus">Bonus</span>
                        <input type="number" name="attr_psychic_power_bonus" value="0" min="0">
                      </div>
                      <div class="sheet-dark_row">
                        <span data-i18n="description">Description</span>
                      </div>
                      <div class="sheet-style_row">
                        <textarea name="attr_psychic_power_desc" style="width:295px;max-width:100%;"></textarea>
                      </div>
                      <div class="sheet-dark_row">
                        <div data-i18n="difficulty-short" class="sheet-sidebubbled">Diff.</div>
                        <span data-i18n="effect" style="width:220px;">Effect</span>
                      </div>
                      <div class="sheet-style_row">
                        <div class="sheet-sidebubbled">20</div>
                        <textarea name="attr_psychic_power_diff20" style="width:235px;height:20px;"></textarea>
                      </div>
                      <div class="sheet-style_row">
                        <div class="sheet-sidebubbled">40</div>
                        <textarea name="attr_psychic_power_diff40" style="width:235px;height:20px;"></textarea>
                      </div>
                      <div class="sheet-style_row">
                        <div class="sheet-sidebubbled">80</div>
                        <textarea name="attr_psychic_power_diff80" style="width:235px;height:20px;"></textarea>
                      </div>
                      <div class="sheet-style_row">
                        <div class="sheet-sidebubbled">120</div>
                        <textarea name="attr_psychic_power_diff120" style="width:235px;height:20px;"></textarea>
                      </div>
                      <div class="sheet-style_row">
                        <div class="sheet-sidebubbled">140</div>
                        <textarea name="attr_psychic_power_diff140" style="width:235px;height:20px;"></textarea>
                      </div>
                      <div class="sheet-style_row">
                        <div class="sheet-sidebubbled">180</div>
                        <textarea name="attr_psychic_power_diff180" style="width:235px;height:20px;"></textarea>
                      </div>
                      <div class="sheet-style_row">
                        <div class="sheet-sidebubbled">240</div>
                        <textarea name="attr_psychic_power_diff240" style="width:235px;height:20px;"></textarea>
                      </div>
                      <div class="sheet-style_row">
                        <div class="sheet-sidebubbled">280</div>
                        <textarea name="attr_psychic_power_diff280" style="width:235px;height:20px;"></textarea>
                      </div>
                      <div class="sheet-style_row">
                        <div class="sheet-sidebubbled">320</div>
                        <textarea name="attr_psychic_power_diff320" style="width:235px;height:20px;"></textarea>
                      </div>
                      <div class="sheet-style_row">
                        <div class="sheet-sidebubbled">440</div>
                        <textarea name="attr_psychic_power_diff440" style="width:235px;height:20px;"></textarea>
                      </div>
                      <div class="sheet-style_row">
                        <button type="roll" name="roll_power_projection"  class="sheet-label"
                        value="&{template:ABFdefault} {{title=@{psychic_power_name}}} {{name=^{psychic-projection}}} {{roll=[[1d100+?{Modifiers?|0}+[[@{projection_final}]]]]}}">
                          <span data-i18n="psychic-projection">Projection</span>
                        </button>
                        <button type="roll" name="roll_power_potential"  class="sheet-label"
                        value="&{template:ABFdefault} {{title=@{psychic_power_name}}} {{name=^{psychic-potential}}} {{roll=[[1d100+[[?{Potential?|@{potential_final}}]]+?{Modifier?|0}+@{psychic_power_bonus}]]}}">
                          <span data-i18n="psychic-potential">Potential</span>
                        </button>
                      </div>
                    </div>
                    <div class="sheet-compact">
                      <button type="roll" name="roll_psychic_power"  class="sheet-label"
                      value="&{template:ABFpsi} {{title=@{psychic_power_name}}} {{projection=[^{psychic-projection}](~repeating_psychicpowers_power_projection)}} {{potential=[^{psychic-potential}](~repeating_psychicpowers_power_potential)}} {{potential-round=[[[[@{potential_final}]]]]}} {{desc=@{psychic_power_desc}}} {{diff20=@{psychic_power_diff20}}} {{diff40=@{psychic_power_diff40}}}  {{diff80=@{psychic_power_diff80}}}  {{diff120=@{psychic_power_diff120}}}  {{diff140=@{psychic_power_diff140}}}  {{diff180=@{psychic_power_diff180}}}  {{diff240=@{psychic_power_diff240}}} {{diff280=@{psychic_power_diff280}}} {{diff320=@{psychic_power_diff320}}} {{diff440=@{psychic_power_diff440}}}">
                        <input type="text" name="attr_psychic_power_name" style="width:220px;">
                        <input type="number" name="attr_psychic_power_bonus" value="0" min="0">
                      </button>
                    </div>
                  </div>
                </fieldset>
                <div class="sheet-dark_row">
                    <div class="sheet-cell" style="width:100px;" data-i18n="total-cost">Total Cost</div>
                    <input class="sheet-cell" type="number" name="attr_powers_ppcost" min="0" value="0" min="0" style="margin-top:4px;"/>
                    <div class="sheet-cell">PP</div>
                </div>
            </div><!-- end known powers -->
        </div>
        <div class="sheet-col2" style="width:425px!important;vertical-align:top;">
            <div class="sheet-wrapper"><!-- maintained powers -->
            <div class="sheet-title" data-i18n="maintained-powers">Maintained Powers</div>
            <div class="sheet-dark_row">
                <div class="sheet-cell" style="width:120px" data-i18n="number-of-innate-slots"># Innate Slots</div>
                <input class="sheet-cell" type="number" name="attr_number_innate_slots" min="0" value="0"/>
                <div class="sheet-cell" style="width:120px" data-i18n="total-cost">Total Cost</div>
                <input class="sheet-cell" type="number" name="attr_innate_slots_ppcost" min="0" value="0"/>
                <div class="sheet-cell" data-i18n="psychic-points">PP</div>
            </div>
            <div class="sheet-dark_row">
                <div class="sheet-cell" style="width:150px;" data-i18n="name">Name</div>
                <div class="sheet-cell" style="" data-i18n="value">Value</div>
                <div class="sheet-cell" style="width:180px;" data-i18n="effects">Effects</div>
            </div>
            <fieldset class="repeating_maintainedpowers">
                    <input type="text" name="attr_maintained_powername" style="width:150px;"/>
                    <input type="number" name="attr_maintained_powervalue" value="0" min="0"/>
                    <input type="text" name="attr_maintained_powereffects" style="width:180px;"/>
                </fieldset>
            </div><!-- end maintained powers -->
        </div>
    </div>
</div>
</div><!-- end psychic page tab -->

<div class="sheet-tab-content sheet-tab4"><!-- Ki page tab -->
<div class="sheet-page_wrapper sheet-wrapper">
    <div class="sheet-2colrow"><!-- column div -->
        <div class="sheet-col2" style="width:330px!important; margin-right:0px;vertical-align:top;">
        
            <div class="sheet-wrapper" style="width:320px;"><!-- ki abilities -->
            <div class="sheet-title" data-i18n="ki-abilities">Ki Abilities</div>
            <div class="sheet-ki_row">
                <div class="sheet-cell sheet-ki_title" data-i18n="use-of-ki">Use of Ki</div>              
                <div class="sheet-cell sheet-ki_cost">(40)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-useofki" name="attr_use_of_ki"/>
            
            <div class="sheet-req_useofki sheet-ki_row">
                <div class="sheet-cell sheet-ki_indent1 sheet-ki_title" data-i18n="ki-control">Ki Control</div>          
                <div class="sheet-cell sheet-ki_cost">(30)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_useofki sheet-kicontrol" name="attr_ki_control"/>
            
            <div class="sheet-req_kicontrol sheet-ki_row sheet-kidetection">
                <div class="sheet-cell sheet-ki_indent2 sheet-ki_title" data-i18n="ki-detection">Ki Detection</div>
                <input type="number" disabled="true" name="attr_ki_detection_value" value="round((@{noti_final} + @{mk_final})/2)+@{aam}"/>
                <button type='roll' value='&{template:ABFdefault} {{title=^{ki-abilities}}} {{name=^{ki-detection}}} {{roll=[[1d100+[[@{ki_detection_value}]]+?{Modifiers?|0}]]}} {{desc=^{@{ki_erudition}}}}' class="sheet-d100-roll-button" name='roll_ki_detection'></button>
                <div class="sheet-cell sheet-ki_cost" style="padding-top: 4px;">(20)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_kicontrol sheet-kidetection" name="attr_ki_detection"/>
            
            <div class="sheet-ki_row sheet-req_kidetection">
                <div class="sheet-cell sheet-ki_indent3 sheet-ki_title" data-i18n="ki-erudition">Erudition</div>
                <div class="sheet-cell sheet-ki_cost">(10)</div>    
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_kidetection" name="attr_ki_erudition" value="ki-erudition"/>
            
            <div class="sheet-ki_row sheet-req_kicontrol">
                <div class="sheet-cell sheet-ki_indent2 sheet-ki_title" data-i18n="combat-aura">Combat Aura</div>
                <div class="sheet-cell sheet-ki_cost">(40)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_kicontrol" name="attr_ki_combatAura"/>
            
            <div class="sheet-ki_row sheet-req_kicontrol">
                <div class="sheet-cell sheet-ki_indent2 sheet-ki_title" data-i18n="physical-dominion">Physical Dominion</div>
                <div class="sheet-cell sheet-ki_cost">(10)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_kicontrol sheet-physdom" name="attr_ki_physicalDominion"/>
            
            <div class="sheet-ki_row sheet-req_physdom">
                <div class="sheet-cell sheet-ki_indent3 sheet-ki_title" data-i18n="physical-change">Physical Change</div>
                <div class="sheet-cell sheet-ki_cost">(30)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_physdom sheet-physchange" name="attr_ki_physicalChange"/>
            
            <div class="sheet-ki_row sheet-req_physchange">
                <div class="sheet-cell sheet-ki_indent4 sheet-ki_title" data-i18n="superior-change">Superior Change</div>
                <div class="sheet-cell sheet-ki_cost">(20)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_physchange" name="attr_ki_superiorChange"/>
            
            <div class="sheet-ki_row sheet-req_physdom">
                <div class="sheet-cell sheet-ki_indent3 sheet-ki_title" data-i18n="multiplication-of-bodies">Multiplication of Bodies</div>
                <div class="sheet-cell sheet-ki_cost">(30)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_physdom sheet-multbody" name="attr_ki_multBodies"/>
            
            <div class="sheet-ki_row sheet-req_multbody">
                <div class="sheet-cell sheet-ki_indent4 sheet-ki_title" data-i18n="greater-multiplication-of-bodies">Greater Mult. of Bodies</div>
                <div class="sheet-cell sheet-ki_cost">(30)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_multbody sheet-grtmultbody" name="attr_ki_grtMultBodies"/>
            
            <div class="sheet-ki_row sheet-req_grtmultbody">
                <div class="sheet-cell sheet-ki_indent5 sheet-ki_title" data-i18n="arcane-multiplication-of-bodies">Arcane Mult. of Bodies</div>
                <div class="sheet-cell sheet-ki_cost">(40)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_grtmultbody" name="attr_ki_arcMultBodies"/>
            
            <div class="sheet-ki_row sheet-req_multbody">
                <div class="sheet-cell sheet-ki_indent4 sheet-ki_title" data-i18n="magnitude">Magnitude</div>
                <div class="sheet-cell sheet-ki_cost">(30)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_multbody sheet-magnitude" name="attr_ki_magnitude"/>
            
            <div class="sheet-ki_row sheet-req_magnitude">
                <div class="sheet-cell sheet-ki_indent5 sheet-ki_title" data-i18n="arcane-magnitude">Arcane Magnitude</div>
                <div class="sheet-cell sheet-ki_cost">(30)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_magnitude" name="attr_ki_arcMagnitude"/>
            
            <div class="sheet-ki_row sheet-req_physdom">
                <div class="sheet-cell sheet-ki_indent3 sheet-ki_title" data-i18n="age-control">Age Control</div>
                <div class="sheet-cell sheet-ki_cost">(20)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_physdom" name="attr_ki_ageControl"/>
            
            <div class="sheet-ki_row sheet-req_kicontrol">
                <div class="sheet-cell sheet-ki_indent2 sheet-ki_title" data-i18n="technique-imitation">Technique Imitation</div>
                <div class="sheet-cell sheet-ki_cost">(50)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_kicontrol" name="attr_ki_techniqueImitation"/>
            
            <div class="sheet-ki_row sheet-req_useofki">
                <div class="sheet-cell sheet-ki_indent1 sheet-ki_title" data-i18n="weight-elimination">Weight Elimination </div>
                <div class="sheet-cell sheet-ki_cost">(10)</div>    
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_useofki sheet-weightelim" name="attr_ki_weight_elimination"/>
            
            <div class="sheet-ki_row sheet-req_weightelim">
                <div class="sheet-cell sheet-ki_indent2 sheet-ki_title" data-i18n="leviation">Levitation</div>            
                <div class="sheet-cell sheet-ki_cost">(20)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_weightelim sheet-levitation" name="attr_ki_levitation"/>
            
            <div class="sheet-ki_row sheet-req_levitation">
                <div class="sheet-cell sheet-ki_indent3 sheet-ki_title" data-i18n="object-motion">Object Motion</div>
                <div class="sheet-cell sheet-ki_cost">(10)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-objectMotion sheet-req_levitation" name="attr_ki_objectMotion"/>
            
            <div class="sheet-ki_row sheet-req_objectMotion">
                <div class="sheet-cell sheet-ki_indent4 sheet-ki_title" data-i18n="mass-movement">Mass Movement</div>
                <div class="sheet-cell sheet-ki_cost">(20)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_objectMotion" name="attr_ki_massMovement"/>
            
            <div class="sheet-ki_row sheet-req_levitation">
                <div class="sheet-cell sheet-ki_indent3 sheet-ki_title" data-i18n="flight">Flight</div>
                <div class="sheet-cell sheet-ki_cost">(20)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_levitation" name="attr_ki_flight"/>
            
            <div class="sheet-ki_row sheet-req_useofki">
                <div class="sheet-cell sheet-ki_indent1 sheet-ki_title" data-i18n="presence-extrusion">Presence Extrusion</div>
                <div class="sheet-cell sheet-ki_cost">(10)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_useofki sheet-pext" name="attr_ki_presenceExtrusion"/>
            
            <div class="sheet-ki_row sheet-req_pext">
                <div class="sheet-cell sheet-ki_indent2 sheet-ki_title" data-i18n="anergy-armor">Energy Armor</div>
                <div class="sheet-cell sheet-ki_cost">(10)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_pext sheet-enearmor" name="attr_ki_energyArmor"/>
            
            <div class="sheet-ki_row sheet-req_enearmor">
                <div class="sheet-cell sheet-ki_indent3 sheet-ki_title" data-i18n="armor-of-greater-energy">Armor of Greater Energy</div>
                <div class="sheet-cell sheet-ki_cost">(10)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_enearmor sheet-grtarmor" name="attr_ki_grtEnergyArmor"/>
            
            <div class="sheet-ki_row sheet-req_grtarmor">
                <div class="sheet-cell sheet-ki_indent4 sheet-ki_title" data-i18n="armor-of-arcane-energy">Armor of Arcane Energy</div>
                <div class="sheet-cell sheet-ki_cost">(10)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_grtarmor" name="attr_ki_arcaneEnergyArmor"/>
            
            <div class="sheet-ki_row sheet-req_pext">
                <div class="sheet-cell sheet-ki_indent2 sheet-ki_title" data-i18n="aura-extension">Aura Extension</div>
                <div class="sheet-cell sheet-ki_cost">(10)</div>
            </div>
            <input type="checkbox" name="attr_aura_extension" value="10" class="sheet-ki_learned sheet-req_pext sheet-aext"/>
            
            <div class="sheet-ki_row sheet-req_aext">
                <div class="sheet-cell sheet-ki_indent3 sheet-ki_title" data-i18n="elemental-attack-fire">Elemental Attack: Fire</div>
                <div class="sheet-cell sheet-ki_cost">(10)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_aext" name="attr_ki_eleAttackFire"/>
            
            <div class="sheet-ki_row sheet-req_aext">
                <div class="sheet-cell sheet-ki_indent3 sheet-ki_title" data-i18n="elemental-attack-ice">Elemental Attack: Ice</div>
                <div class="sheet-cell sheet-ki_cost">(10)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_aext" name="attr_ki_eleAttackIce"/>
            
            <div class="sheet-ki_row sheet-req_aext">
                <div class="sheet-cell sheet-ki_indent3 sheet-ki_title" data-i18n="elemental-attack-air">Elemental Attack: Air</div>
                <div class="sheet-cell sheet-ki_cost">(10)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_aext" name="attr_ki_eleAttackAir"/>
            
            <div class="sheet-ki_row sheet-req_aext">
                <div class="sheet-cell sheet-ki_indent3 sheet-ki_title" data-i18n="elemental-attack-earth">Elemental Attack: Earth</div>
                <div class="sheet-cell sheet-ki_cost">(10)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_aext" name="attr_ki_eleAttackEarth"/>
            
            <div class="sheet-ki_row sheet-req_aext">
                <div class="sheet-cell sheet-ki_indent3 sheet-ki_title" data-i18n="elemental-attack-light">Elemental Attack: Light</div>
                <div class="sheet-cell sheet-ki_cost">(10)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_aext" name="attr_ki_eleAttackLight"/>
            
            <div class="sheet-ki_row sheet-req_aext">
                <div class="sheet-cell sheet-ki_indent3 sheet-ki_title" data-i18n="elemental-attack-darkness">Elemental Attack: Darkness</div>
                <div class="sheet-cell sheet-ki_cost">(10)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_aext" name="attr_ki_eleAttackDark"/>
            
            <div class="sheet-ki_row sheet-req_aext">
                <div class="sheet-cell sheet-ki_indent3 sheet-ki_title" data-i18n="increased-damage">Increased Damage</div>
                <div class="sheet-cell sheet-ki_cost">(10)</div>
            </div>
            <input type="checkbox" name="attr_increased_damage" value="10" class="sheet-ki_learned sheet-req_aext"/>
            
            <div class="sheet-ki_row sheet-req_aext">
                <div class="sheet-cell sheet-ki_indent3 sheet-ki_title" data-i18n="increased-reach">Increased Reach</div>
                <div class="sheet-cell sheet-ki_cost">(10)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_aext" name="attr_ki_increasedReach"/>
            
            <div class="sheet-ki_row sheet-req_aext">
                <div class="sheet-cell sheet-ki_indent3 sheet-ki_title" data-i18n="increased-speed">Increased Speed</div>
                <div class="sheet-cell sheet-ki_cost">(10)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_aext" name="attr_ki_increasedSpeed"value="10"/>
            
            <div class="sheet-ki_row sheet-req_pext">
                <div class="sheet-cell sheet-ki_indent2 sheet-ki_title" data-i18n="destruction-by-ki">Destruction By Ki</div>
                <div class="sheet-cell sheet-ki_cost">(20)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_pext" name="attr_ki_destructionByKi"/>
            
            <div class="sheet-ki_row sheet-req_pext">
                <div class="sheet-cell sheet-ki_indent2 sheet-ki_title" data-i18n="absorbtion-of-energy">Absorbtion of Energy</div>
                <div class="sheet-cell sheet-ki_cost">(30)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_pext" name="attr_ki_absorbEnergy"/>
            
            <div class="sheet-ki_row sheet-req_pext">
                <div class="sheet-cell sheet-ki_indent2 sheet-ki_title" data-i18n="physical-shield">Physical Shield</div>
                <div class="sheet-cell sheet-ki_cost">(10)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_pext" name="attr_ki_physicalShield"/>
            
            <div class="sheet-ki_row sheet-req_useofki">
                <div class="sheet-cell sheet-ki_indent1 sheet-ki_title" data-i18n="ki-transmission">Ki Transmission</div>
                <div class="sheet-cell sheet-ki_cost">(10)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_useofki sheet-kitransmit" name="attr_ki_transmission"/>
            
            <div class="sheet-ki_row sheet-req_kitransmit">
                <div class="sheet-cell sheet-ki_indent2 sheet-ki_title" data-i18n="ki-healing">Ki Healing</div>
                <div class="sheet-cell sheet-ki_cost">(10)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_kitransmit sheet-kiheal" name="attr_ki_healing"/>
            
            <div class="sheet-ki_row sheet-req_kiheal">
                <div class="sheet-cell sheet-ki_indent3 sheet-ki_title" data-i18n="superior-healing">Superior Healing</div>
                <div class="sheet-cell sheet-ki_cost">(10)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_kiheal" name="attr_ki_superiorHealing"/>
            
            <div class="sheet-ki_row sheet-req_kiheal">
                <div class="sheet-cell sheet-ki_indent3 sheet-ki_title" data-i18n="stabilize">Stabilize</div>
                <div class="sheet-cell sheet-ki_cost">(10)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_kiheal" name="attr_ki_stabilize"/>
            
            <div class="sheet-ki_row sheet-req_kitransmit">
                <div class="sheet-cell sheet-ki_indent2 sheet-ki_title" data-i18n="life-sacrifice">Life Sacrifice</div>
                <div class="sheet-cell sheet-ki_cost">(10)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_kitransmit" name="attr_ki_lifeSacrifice"/>
            
            <div class="sheet-ki_row sheet-req_useofki">
                <div class="sheet-cell sheet-ki_indent1 sheet-ki_title" data-i18n="use-of-necessary-energy">Use of Necessary Energy</div>
                <div class="sheet-cell sheet-ki_cost">(10)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_useofki sheet-useofnecenergy" name="attr_ki_useOfNecessaryEnergy"/>
            
            <div class="sheet-ki_row sheet-req_useofnecenergy">
                <div class="sheet-cell sheet-ki_indent2 sheet-ki_title" data-i18n="ki-concealment">Ki Concealment</div>
                <input type="number" disabled="true" name="attr_ki_concealment_value" value="round((@{stea_final} + @{mk_final})/2)+@{aam}"/>
                <button type='roll' value='&{template:ABFdefault} {{title=^{ki-abilities}}} {{name=^{ki-concealment}}} {{roll=[[1d100+[[@{ki_concealment_value}]]+?{Modifiers?|0}]]}}' class="sheet-d100-roll-button" name='roll_ki_concealment'></button>          
                <div class="sheet-cell sheet-ki_cost" style="margin-top:4px;">(10)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_useofnecenergy sheet-kiconceal" name="attr_ki_concealment"/>
            
            <div class="sheet-ki_row sheet-req_kiconceal">
                <div class="sheet-cell sheet-ki_indent3 sheet-ki_title" data-i18n="aura-of-concealment">Aura of Concealment</div>
                <div class="sheet-cell sheet-ki_cost">(10)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_kiconceal" name="attr_ki_concealmentAura"/>
            
            <div class="sheet-ki_row sheet-req_kiconceal">
                <div class="sheet-cell sheet-ki_indent3 sheet-ki_title" data-i18n="false-death">False Death</div>
                <div class="sheet-cell sheet-ki_cost">(10)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_kiconceal" name="attr_ki_falseDeath"/>
            
            <div class="sheet-ki_row sheet-req_useofnecenergy">
                <div class="sheet-cell sheet-ki_indent2 sheet-ki_title" data-i18n="elimination-of-necessities">Elimination of Necessities</div>
                <div class="sheet-cell sheet-ki_cost">(10)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_useofnecenergy sheet-elimofnecess" name="attr_ki_eliminateNecessities"/>
            
            <div class="sheet-ki_row sheet-req_elimofnecess">
                <div class="sheet-cell sheet-ki_indent3 sheet-ki_title" data-i18n="elemental-immunity-heat">Elemental Immunity: Heat</div>
                <div class="sheet-cell sheet-ki_cost">(20)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_elimofnecess" name="attr_ki_eleImmuneHeat"/>
            
            <div class="sheet-ki_row sheet-req_elimofnecess">
                <div class="sheet-cell sheet-ki_indent3 sheet-ki_title" data-i18n="elemental-immunity-cold">Elemental Immunity: Cold</div>
                <div class="sheet-cell sheet-ki_cost">(20)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_elimofnecess" name="attr_ki_eleImmuneCold"/>
            
            <div class="sheet-ki_row sheet-req_elimofnecess">
                <div class="sheet-cell sheet-ki_indent3 sheet-ki_title" data-i18n="elemental-immunity-electricity">Elemental Immunity: Electricity</div>
                <div class="sheet-cell sheet-ki_cost">(20)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_elimofnecess" name="attr_ki_eleImmuneElectric"/>
            
            <div class="sheet-ki_row sheet-req_useofnecenergy">
                <div class="sheet-cell sheet-ki_indent2 sheet-ki_title" data-i18n="penalty-reduction">Penalty Reduction</div>
                <div class="sheet-cell sheet-ki_cost">(20)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_useofnecenergy sheet-penreduction" name="attr_ki_penaltyReduction"/>
            
            <div class="sheet-ki_row sheet-req_penreduction">
                <div class="sheet-cell sheet-ki_indent3 sheet-ki_title" data-i18n="recovery">Recovery</div>
                <div class="sheet-cell sheet-ki_cost">(20)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-recovery sheet-req_penreduction" name="attr_ki_recovery"/>
            
            <div class="sheet-ki_row sheet-req_recovery">
                <div class="sheet-cell sheet-ki_indent4 sheet-ki_title" data-i18n="restore-others">Restore Others</div>
                <div class="sheet-cell sheet-ki_cost">(10)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_recovery" name="attr_ki_restoreOthers"/>
            
            <div class="sheet-ki_row sheet-req_useofnecenergy">
                <div class="sheet-cell sheet-ki_indent2 sheet-ki_title" data-i18n="characteristic-augmentation">Charact. Augmentation</div>
                <div class="sheet-cell sheet-ki_cost">(20)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_useofnecenergy sheet-charaugment" name="attr_ki_charAugmentation"/>
            
            <div class="sheet-ki_row sheet-req_charaugment">
                <div class="sheet-cell sheet-ki_indent3 sheet-ki_title" data-i18n="superior-characteristic-augmentation">Superior Charact. Augmentation</div>
                <div class="sheet-cell sheet-ki_cost">(20)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_charaugment" name="attr_ki_superiorCharAugmentation"/>
            
            <div class="sheet-ki_row sheet-req_useofki">
                <div class="sheet-cell sheet-ki_indent1 sheet-ki_title" data-i18n="improvised-combat-techniques">Improvised Combat Techniques</div>
                <div class="sheet-cell sheet-ki_cost">(50)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_useofki" name="attr_ki_improvisedTechnique"/>
            
            <div class="sheet-ki_row sheet-req_useofki">
                <div class="sheet-cell sheet-ki_indent1 sheet-ki_title" data-i18n="technique-pushing">Technique Pushing</div>
                <div class="sheet-cell sheet-ki_cost">(20)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_useofki" name="attr_ki_techPushing"/>
            
            <div class="sheet-ki_row sheet-req_useofki">
                <div class="sheet-cell sheet-ki_indent1 sheet-ki_title" data-i18n="inhumanity">Inhumanity</div>
                <div class="sheet-cell sheet-ki_cost">(30)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_useofki sheet-ki_inhumanity" name="attr_ki_inhumanity"/>
            
            <div class="sheet-ki_row sheet-req_ki_inhumanity">
                <div class="sheet-cell sheet-ki_indent2 sheet-ki_title" data-i18n="zen">Zen</div>
                <div class="sheet-cell sheet-ki_cost">(50)</div>
            </div>
            <input type="checkbox" class="sheet-ki_learned sheet-req_ki_inhumanity" name="attr_ki_zen"/>
            </div><!-- end ki abilities -->
            
            <div class="sheet-wrapper" style="width:320px;"><!-- Nemesis Abilities-->
            <div class="sheet-title" data-i18n="nemesis-abilities">Nemesis Abilities</div>
                <div class="sheet-ki_row">
                    <div class="sheet-cell sheet-ki_title" data-i18n="use-of-nemesis">Use of Nemesis</div>       
                    <div class="sheet-ki_cost">(70)</div>
                </div>
                <input type="checkbox" name="attr_use_of_nemesis" class="sheet-ki_learned sheet-useofnemesis"/>
                
                <div class="sheet-ki_row sheet-req_useofnemesis">
                    <div class="sheet-cell sheet-ki_title sheet-ki_indent1" data-i18n="armor-of-emptiness">Armor of Emptiness</div>       
                    <div class="sheet-ki_cost">(20)</div>
                </div>
                <input type="checkbox" name="attr_armor_of_emptiness" class="sheet-ki_learned sheet-req_useofnemesis sheet-armemptiness"/>
                
                <div class="sheet-ki_row sheet-req_armemptiness">
                    <div class="sheet-cell sheet-ki_title sheet-ki_indent2" data-i18n="noht">Noht</div>       
                    <div class="sheet-ki_cost">(30)</div>
                </div>
                <input type="checkbox" name="attr_noht" class="sheet-ki_learned sheet-req_armemptiness"/>
                
                <div class="sheet-ki_row sheet-req_useofnemesis">
                    <div class="sheet-cell sheet-ki_title sheet-ki_indent1" data-i18n="ki-cancellation">Ki Cancellation</div>       
                    <div class="sheet-ki_cost">(30)</div>
                </div>
                <input type="checkbox" name="attr_ki_cancellation" class="sheet-ki_learned sheet-ki_learned sheet-req_useofnemesis sheet-kicancel"/>
                
                <div class="sheet-ki_row sheet-req_kicancel">
                    <div class="sheet-cell sheet-ki_title sheet-ki_indent2" data-i18n="greater-ki-cancellation">Greater Ki Cancellation</div>       
                    <div class="sheet-ki_cost">(20)</div>
                </div>
                <input type="checkbox" name="attr_greater_ki_cancellation" class="sheet-ki_learned sheet-req_kicancel"/>
                
                <div class="sheet-ki_row sheet-req_useofnemesis">
                    <div class="sheet-cell sheet-ki_title sheet-ki_indent1" data-i18n="magic-cancellation">Magic Cancellation</div>       
                    <div class="sheet-ki_cost">(30)</div>
                </div>
                <input type="checkbox" name="attr_magic_cancellation" class="sheet-ki_learned sheet-req_useofnemesis sheet-magicancel"/>
                
                <div class="sheet-ki_row sheet-req_magicancel">
                    <div class="sheet-cell sheet-ki_title sheet-ki_indent2" data-i18n="greater-magic-cancellation">Greater Magic Cancellation</div>       
                    <div class="sheet-ki_cost">(20)</div>
                </div>
                <input type="checkbox" name="attr_greater_magic_cancellation" class="sheet-ki_learned sheet-req_magicancel"/>
                
                <div class="sheet-ki_row sheet-req_useofnemesis">
                    <div class="sheet-cell sheet-ki_title sheet-ki_indent1" data-i18n="matrices-cancellation">Matrices Cancellation</div>       
                    <div class="sheet-ki_cost">(30)</div>
                </div>
                <input type="checkbox" name="attr_matrices_cancellation" class="sheet-ki_learned sheet-req_useofnemesis sheet-matricancel"/>
                
                <div class="sheet-ki_row sheet-req_matricancel">
                    <div class="sheet-cell sheet-ki_title sheet-ki_indent2" data-i18n="greater-matrices-cancellation">Greater Matrices Cancellation</div>       
                    <div class="sheet-ki_cost">(20)</div>
                </div>
                <input type="checkbox" name="attr_greater_matrices_cancellation" class="sheet-ki_learned sheet-req_matricancel"/>
                
                <div class="sheet-ki_row sheet-req_useofnemesis">
                    <div class="sheet-cell sheet-ki_title sheet-ki_indent1" data-i18n="binding-cancellation">Binding Cancellation</div>       
                    <div class="sheet-ki_cost">(30)</div>
                </div>
                <input type="checkbox" name="attr_binding_cancellation" class="sheet-ki_learned sheet-req_useofnemesis"/>
                
                <div class="sheet-ki_row sheet-req_useofnemesis">
                    <div class="sheet-cell sheet-ki_title sheet-ki_indent1" data-i18n="emptiness-extrusion">Emptiness Extrusion</div>       
                    <div class="sheet-ki_cost">(30)</div>
                </div>
                <input type="checkbox" name="attr_emptiness_extrusion" class="sheet-ki_learned sheet-req_useofnemesis"/>
                
                <div class="sheet-ki_row sheet-req_useofnemesis">
                    <div class="sheet-cell sheet-ki_title sheet-ki_indent1" data-i18n="body-of-emptiness">Body of Emptiness</div>       
                    <div class="sheet-ki_cost">(10)</div>
                </div>
                <input type="checkbox" value="10" name="attr_body_of_emptiness" class="sheet-ki_learned sheet-req_useofnemesis sheet-bodyofempty"/>
                
                <div class="sheet-ki_row sheet-req_bodyofempty">
                    <div class="sheet-cell sheet-ki_title sheet-ki_indent2" data-i18n="no-needs">No Needs</div>       
                    <div class="sheet-ki_cost">(10)</div>
                </div>
                <input type="checkbox" name="attr_no_needs" class="sheet-ki_learned sheet-req_bodyofempty"/>
                
                <div class="sheet-ki_row sheet-req_bodyofempty">
                    <div class="sheet-cell sheet-ki_title sheet-ki_indent2" data-i18n="movement-of-emptiness">Movement of Emptiness</div>       
                    <div class="sheet-ki_cost">(20)</div>
                </div>
                <input type="checkbox" name="attr_movement_of_emptiness" class="sheet-ki_learned sheet-req_bodyofempty"/>
                
                <div class="sheet-ki_row sheet-req_bodyofempty">
                    <div class="sheet-cell sheet-ki_title sheet-ki_indent2" data-i18n="form-of-emptiness">Form of Emptiness</div>       
                    <div class="sheet-ki_cost">(30)</div>
                </div>
                <input type="checkbox" name="attr_form_of_emptiness" class="sheet-ki_learned sheet-req_bodyofempty"/>
                
                <div class="sheet-ki_row sheet-req_bodyofempty">
                    <div class="sheet-cell sheet-ki_title sheet-ki_indent2" data-i18n="essence-of-emptiness">Essence of Emptiness</div>       
                    <div class="sheet-ki_cost">(30)</div>
                </div>
                <input type="checkbox" name="attr_essence_of_emptiness" class="sheet-ki_learned sheet-req_bodyofempty sheet-essenceempty"/>
                
                <div class="sheet-ki_row sheet-req_essenceempty">
                    <div class="sheet-cell sheet-ki_title sheet-ki_indent3" data-i18n="one-with-the-nothing">One with the Nothing</div>       
                    <div class="sheet-ki_cost">(40)</div>
                </div>
                <input type="checkbox" name="attr_one_with_nothing" class="sheet-ki_learned sheet-req_essenceempty"/>
                
                <div class="sheet-ki_row sheet-req_useofnemesis">
                    <div class="sheet-cell sheet-ki_title sheet-ki_indent1" data-i18n="aura-of-emptiness">Aura of Emptiness</div>       
                    <div class="sheet-ki_cost">(30)</div>
                </div>
                <input type="checkbox" name="attr_aura_of_emptiness" class="sheet-ki_learned sheet-req_useofnemesis"/>
                
                <div class="sheet-ki_row sheet-req_useofnemesis">
                    <div class="sheet-cell sheet-ki_title sheet-ki_indent1" data-i18n="undetectable">Undetectable</div>       
                    <div class="sheet-ki_cost">(10)</div>
                </div>
                <input type="checkbox" name="attr_undetectable" class="sheet-ki_learned sheet-req_useofnemesis"/>
                
                <div class="sheet-ki_row sheet-req_useofnemesis">
                    <div class="sheet-cell sheet-ki_title sheet-ki_indent1" data-i18n="inhumanity">Inhumanity</div>       
                    <div class="sheet-ki_cost">(20)</div>
                </div>
                <input type="checkbox" name="attr_nem_inhumanity" class="sheet-ki_learned sheet-req_useofnemesis sheet-nem_inhumanity"/>
                
                <div class="sheet-ki_row sheet-req_nem_inhumanity">
                    <div class="sheet-cell sheet-ki_title sheet-ki_indent2" data-i18n="zen">Zen</div>       
                    <div class="sheet-ki_cost">(40)</div>
                </div>
                <input type="checkbox"name="attr_nem_zen" class="sheet-ki_learned sheet-req_nem_inhumanity"/>
            </div><!-- end Nemesis Abilities -->
        </div><!-- end first column -->
        <div class="sheet-col2" style="width:470px!important;">
            <div class="sheet-wrapper"  style="width:240px;"> <!-- Ki Pools -->
                <div class="sheet-title" data-i18n="ki-pools">Ki Pools</div>
                <div class="sheet-dark_row">
                    <div class="sheet-cell" style="width:58px;" data-i18n="ki-pool">Ki Pool</div>
                    <div class="sheet-cell" data-i18n="ki-accumulation-short">Accu.</div>
                    <div class="sheet-cell" data-i18n="maximum-value">Max</div>
                    <div class="sheet-cell" data-i18n="actual-value">Actual</div>
                </div>
                <div class="sheet-clear">
                	  <input type="checkbox" name="attr_ki_agi_option" class="sheet-option"><span class="sheet-option"></span>
                	  <div class="sheet-style_row">
                      <div class="sheet-sidebubbled" data-i18n="agility-short">AGI</div>
                      <input type="number" name="attr_ki_agi_accu_final" value="(@{ki_agi_accu}+@{ki_agi_accu_special}+@{ki_agi_accu_temp}+floor(@{aap}/20))" disabled="true"/>
                      <input type="number" name="attr_ki_agi_max" disabled="true"
                      value="(@{ki_agi_base}+@{ki_agi_special}+@{ki_agi_temp}+((@{agi_final})%21)+((((@{agi_final})-10)*(floor((@{agi_final})/11)))))"/>
                      <input type="number" name="attr_ki_agi_actual" value="0" min="0"/>
                    </div>
                    <div class="sheet-expanded">
                      <div class="sheet-style_row">
                      	<div class="sheet-sidebubbled" data-i18n="base-value">Base</div>
                    	  <input type="number" name="attr_ki_agi_accu" value="0" min="0"/>
                    	  <input type="number" name="attr_ki_agi_base" value="0" min="0"/>
                      </div>
                      <div class="sheet-style_row">
                      	<div class="sheet-sidebubbled" data-i18n="special-bonus">Spec.</div>
                    	  <input type="number" name="attr_ki_agi_accu_special" value="0" min="0"/>
                    	  <input type="number" name="attr_ki_agi_special" value="0" min="0"/>
                      </div>
                      <div class="sheet-style_row">
                      	<div class="sheet-sidebubbled" data-i18n="temporary-bonus">Temp.</div>
                    	  <input type="number" name="attr_ki_agi_accu_temp" value="0" min="0"/>
                    	  <input type="number" name="attr_ki_agi_temp" value="0" min="0"/>
                      </div>
                    </div>
                </div>
                <div class="sheet-clear">
                    <input type="checkbox" name="attr_ki_con_option" class="sheet-option"><span class="sheet-option"></span>
                    <div class="sheet-style_row">
                      <div class="sheet-sidebubbled" data-i18n="constitution-short">CON</div>
                      <input type="number" name="attr_ki_con_accu_final" value="(@{ki_con_accu}+@{ki_con_accu_special}+@{ki_con_accu_temp}+floor(@{aap}/20))" disabled="true"/>
                      <input type="number" name="attr_ki_con_max" disabled="true"
                      value="(@{ki_con_base}+@{ki_con_special}+@{ki_con_temp}+((@{con_final})%21)+((((@{con_final})-10)*(floor((@{con_final})/11)))))"/>
                      <input type="number" name="attr_ki_con_actual" value="0" min="0"/>
                    </div>
                    <div class="sheet-expanded">
                      <div class="sheet-style_row">
                      	<div class="sheet-sidebubbled" data-i18n="base-value">Base</div>
                    	  <input type="number" name="attr_ki_con_accu" value="0" min="0"/>
                    	  <input type="number" name="attr_ki_con_base" value="0" min="0"/>
                      </div>
                      <div class="sheet-style_row">
                      	<div class="sheet-sidebubbled" data-i18n="special-bonus">Spec.</div>
                    	  <input type="number" name="attr_ki_con_accu_special" value="0" min="0"/>
                    	  <input type="number" name="attr_ki_con_special" value="0" min="0"/>
                      </div>
                      <div class="sheet-style_row">
                      	<div class="sheet-sidebubbled" data-i18n="temporary-bonus">Temp.</div>
                    	  <input type="number" name="attr_ki_con_accu_temp" value="0" min="0"/>
                    	  <input type="number" name="attr_ki_con_temp" value="0" min="0"/>
                      </div>
                    </div>
                </div>
                <div class="sheet-clear">
                    <input type="checkbox" name="attr_ki_dex_option" class="sheet-option"><span class="sheet-option"></span>
                    <div class="sheet-style_row">
                      <div class="sheet-sidebubbled" data-i18n="dexterity-short">DEX</div>
                      <input type="number" name="attr_ki_dex_accu_final" value="(@{ki_dex_accu}+@{ki_dex_accu_special}+@{ki_dex_accu_temp}+floor(@{aap}/20))" disabled="true"/>
                      <input type="number" name="attr_ki_dex_max" disabled="true"
                      value="(@{ki_dex_base}+@{ki_dex_special}+@{ki_dex_temp}+((@{dex_final})%21)+((((@{dex_final})-10)*(floor((@{dex_final})/11)))))"/>
                      <input type="number" name="attr_ki_dex_actual" value="0" min="0"/>
                    </div>
                    <div class="sheet-expanded">
                      <div class="sheet-style_row">
                    	  <div class="sheet-sidebubbled" data-i18n="base-value">Base</div>
                    	  <input type="number" name="attr_ki_dex_accu" value="0" min="0"/>
                    	  <input type="number" name="attr_ki_dex_base" value="0" min="0"/>
                      </div>
                      <div class="sheet-style_row">
                    	  <div class="sheet-sidebubbled" data-i18n="special-bonus">Spec.</div>
                    	  <input type="number" name="attr_ki_dex_accu_special" value="0" min="0"/>
                    	  <input type="number" name="attr_ki_dex_special" value="0" min="0"/>
                      </div>
                      <div class="sheet-style_row">
                    	  <div class="sheet-sidebubbled" data-i18n="temporary-bonus">Temp.</div>
                    	  <input type="number" name="attr_ki_dex_accu_temp" value="0" min="0"/>
                    	  <input type="number" name="attr_ki_dex_temp" value="0" min="0"/>
                      </div>
                    </div>
                </div>
                <div class="sheet-clear">
                    <input type="checkbox" name="attr_ki_str_option" class="sheet-option"><span class="sheet-option"></span>
                    <div class="sheet-style_row">
                      <div class="sheet-sidebubbled" data-i18n="strength-short">STR</div>
                      <input type="number" name="attr_ki_str_accu_final" value="(@{ki_str_accu}+@{ki_str_accu_special}+@{ki_str_accu_temp}+floor(@{aap}/20))" disabled="true"/>
                      <input type="number" name="attr_ki_str_max" disabled="true"
                      value="(@{ki_str_base}+@{ki_str_special}+@{ki_str_temp}+((@{str_final})%21)+((((@{str_final})-10)*(floor((@{str_final})/11)))))"/>
                      <input type="number" name="attr_ki_str_actual" value="0" min="0"/>
                    </div>
                    <div class="sheet-expanded">
                      <div class="sheet-style_row">
                    	  <div class="sheet-sidebubbled" data-i18n="base-value">Base</div>
                    	  <input type="number" name="attr_ki_str_accu" value="0" min="0"/>
                    	  <input type="number" name="attr_ki_str_base" value="0" min="0"/>
                      </div>
                      <div class="sheet-style_row">
                    	  <div class="sheet-sidebubbled" data-i18n="special-bonus">Spec.</div>
                    	  <input type="number" name="attr_ki_str_accu_special" value="0" min="0"/>
                    	  <input type="number" name="attr_ki_str_special" value="0" min="0"/>
                      </div>
                      <div class="sheet-style_row">
                        <div class="sheet-sidebubbled" data-i18n="temporary-bonus">Temp.</div>
                    	  <input type="number" name="attr_ki_str_accu_temp" value="0" min="0"/>
                    	  <input type="number" name="attr_ki_str_temp" value="0" min="0"/>
                      </div>
                    </div>
                </div>
                <div class="sheet-clear">
                    <input type="checkbox" name="attr_ki_pow_option" class="sheet-option"><span class="sheet-option"></span>
                    <div class="sheet-style_row">
                      <div class="sheet-sidebubbled" data-i18n="soul-power-short">POW</div>
                      <input type="number" name="attr_ki_pow_accu_final" value="(@{ki_pow_accu}+@{ki_pow_accu_special}+@{ki_pow_accu_temp}+floor(@{aap}/20))" disabled="true"/>
                      <input type="number" name="attr_ki_pow_max" disabled="true"
                      value="(@{ki_pow_base}+@{ki_pow_special}+@{ki_pow_temp}+((@{pow_final})%21)+((((@{pow_final})-10)*(floor((@{pow_final})/11)))))"/>
                      <input type="number" name="attr_ki_pow_actual" value="0" min="0"/>
                    </div>
                    <div class="sheet-expanded">
                      <div class="sheet-style_row">
                      	<div class="sheet-sidebubbled" data-i18n="base-value">Base</div>
                    	  <input type="number" name="attr_ki_pow_accu" value="0" min="0"/>
                    	  <input type="number" name="attr_ki_pow_base" value="0" min="0"/>
                      </div>
                      <div class="sheet-style_row">
                      	<div class="sheet-sidebubbled" data-i18n="special-bonus">Spec.</div>
                    	  <input type="number" name="attr_ki_pow_accu_special" value="0" min="0"/>
                    	  <input type="number" name="attr_ki_pow_special" value="0" min="0"/>
                      </div>
                      <div class="sheet-style_row">
                      	<div class="sheet-sidebubbled" data-i18n="temporary-bonus">Temp.</div>
                    	  <input type="number" name="attr_ki_pow_accu_temp" value="0" min="0"/>
                    	  <input type="number" name="attr_ki_pow_temp" value="0" min="0"/>
                      </div>
                    </div>
                </div>
                <div class="sheet-clear">
                    <input type="checkbox" name="attr_ki_wp_option" class="sheet-option"><span class="sheet-option"></span>
                    <div class="sheet-style_row">
                      <div class="sheet-sidebubbled" data-i18n="willpower-short">WP</div>
                      <input type="number" name="attr_ki_wp_accu_final" value="(@{ki_wp_accu}+@{ki_wp_accu_special}+@{ki_wp_accu_temp}+floor(@{aap}/20))" disabled="true"/>
                      <input type="number" name="attr_ki_wp_max" disabled="true"
                      value="(@{ki_wp_base}+@{ki_wp_special}+@{ki_wp_temp}+((@{wp_final})%21)+((((@{wp_final})-10)*(floor((@{wp_final})/11)))))"/>
                      <input type="number" name="attr_ki_wp_actual" value="0" min="0"/>
                    </div>
                    <div class="sheet-expanded">
                      <div class="sheet-style_row">
                      	<div class="sheet-sidebubbled" data-i18n="base-value">Base</div>
                    	  <input type="number" name="attr_ki_wp_accu" value="0" min="0"/>
                    	  <input type="number" name="attr_ki_wp_base" value="0" min="0"/>
                      </div>
                      <div class="sheet-style_row">
                      	<div class="sheet-sidebubbled" data-i18n="special-bonus">Spec.</div>
                    	  <input type="number" name="attr_ki_wp_accu_special" value="0" min="0"/>
                    	  <input type="number" name="attr_ki_wp_special" value="0" min="0"/>
                      </div>
                      <div class="sheet-style_row">
                      	<div class="sheet-sidebubbled" data-i18n="temporary-bonus">Temp.</div>
                    	  <input type="number" name="attr_ki_wp_accu_temp" value="0" min="0"/>
                    	  <input type="number" name="attr_ki_wp_temp" value="0" min="0"/>
                      </div>
                    </div>
                </div>
                <div class="sheet-dark_row">
                    <div class="sheet-cell" style="width:92px;" data-i18n="unified-pool">Unified</div>
                    <input type="number" class="sheet-longnum" name="attr_ki_total" disabled="true" value="@{ki_agi_max}+@{ki_con_max}+@{ki_dex_max}+@{ki_str_max}+@{ki_pow_max}+@{ki_wp_max}" min="0"/>
                    <input type="number" class="sheet-longnum" name="attr_ki_actual" value="0" min="0"/>
                </div>
            </div><!-- end ki pools -->
            
            <div class="sheet-wrapper" style="top:0px;"><!-- Martial Knowledge -->
            <div class="sheet-title" style="font-size:1.4em;" data-i18n="martial-knowledge-full">Martial Knowledge</div>
            <div class="sheet-style_row">
                <div class="sheet-sidebubbled sheet-longbubble" data-i18n="base-value">Base</div>
                <input type="number" name="attr_mk_base" value="0" min="0"/>
            </div>
            <div class="sheet-style_row">
                <div class="sheet-sidebubbled sheet-longbubble" data-i18n="class">Class</div>
                <input type="number" name="attr_mk_class" value="0" min="0"/>
            </div>
            <div class="sheet-style_row">
                <div class="sheet-sidebubbled sheet-longbubble" data-i18n="special-bonus">Special</div>
                <input type="number" name="attr_mk_special" value="0"/>
            </div>
            <div class="sheet-style_row">
                <div class="sheet-sidebubbled sheet-longbubble" data-i18n="temporary-bonus">Temp.</div>
                <input type="number" name="attr_mk_temp" value="0"/>
            </div>
            <div class="sheet-style_row">
                <div class="sheet-sidebubbled sheet-longbubble" data-i18n="final-value">Final</div>
                <input type="number" name="attr_mk_final" disabled="true"
                value="@{mk_class}+@{mk_base}+@{mk_special}+@{mk_temp}"/>
            </div>
            <div class="sheet-dark_row">
                <div class="sheet-cell sheet-actual_cell sheet-longbubble">Used</div>
                <input class="sheet-cell"type="number" name="attr_mk_used" value="0"
                style="width:60px;" min="0"/>
            </div>
            </div><!-- end martial knowledge -->
            
            <div class="sheet-wrapper"><!-- Ki seals -->
            <div class="sheet-title" data-i18n="ki-seals">Ki Seals</div>
                <div class="sheet-style_row">
                    <div class="sheet-fullbubble sheet-cell" data-i18n="wood-seal">Wood</div>
                    <div class="sheet-fullbubble sheet-cell" data-i18n="metal-seal">Metal</div>
                    <div class="sheet-fullbubble sheet-cell" data-i18n="air-seal">Air</div>
                    <div class="sheet-fullbubble sheet-cell" data-i18n="water-seal">Water</div>
                    <div class="sheet-fullbubble sheet-cell" data-i18n="fire-seal">Fire</div>
                </div>
                <div class="sheet-style_row">
                    <input class="sheet-cell sheet-ki_seal_checkbox" name="attr_ki_seal_minorwood" type="checkbox"/>
                    <input class="sheet-cell sheet-ki_seal_checkbox" name="attr_ki_seal_minormetal" type="checkbox"/>
                    <input class="sheet-cell sheet-ki_seal_checkbox" name="attr_ki_seal_minorair" type="checkbox"/>
                    <input class="sheet-cell sheet-ki_seal_checkbox" name="attr_ki_seal_minorwater" type="checkbox"/>
                    <input class="sheet-cell sheet-ki_seal_checkbox" name="attr_ki_seal_minorfire" type="checkbox"/>
                </div>
                <div class="sheet-style_row">
                    <input class="sheet-cell sheet-ki_seal_checkbox" name="attr_ki_seal_majorwood" type="checkbox"/>
                    <input class="sheet-cell sheet-ki_seal_checkbox" name="attr_ki_seal_majormetal" type="checkbox"/>
                    <input class="sheet-cell sheet-ki_seal_checkbox" name="attr_ki_seal_majorair" type="checkbox"/>
                    <input class="sheet-cell sheet-ki_seal_checkbox" name="attr_ki_seal_majorwater" type="checkbox"/>
                    <input class="sheet-cell sheet-ki_seal_checkbox" name="attr_ki_seal_majorfire" type="checkbox"/>
                </div>
            </div><!-- end Ki seals -->
            
            <div class="sheet-wrapper"><!-- Limit -->
            <div class="sheet-title" data-i18n="ki-limit">Limit</div>
            <div clsas="sheet-dark_row">
                <select class="sheet-cell" name="attr_ki_limit1" style="width:140px;">
                    <option value="0" data-i18n="limit-none">None</option>
                    <option value="1" data-i18n="limit-mors">Mors: 20MK</option>
                    <option value="2" data-i18n="limit-cenobus">Cenobus: 20MK</option>
                    <option value="3" data-i18n="limit-caelum">Caelum: 15MK</option>
                    <option value="4" data-i18n="limit-agon">Agon: 20MK</option>
                    <option value="5" data-i18n="limit-custodium">Custodium: 10MK</option>
                    <option value="6" data-i18n="limit-cruor">Cruor: 10MK</option>
                    <option value="7" data-i18n="limit-terminus">Terminus: 10MK</option>
                </select>
            </div>
            <div class="sheet-dark_row" style="border-top:2px solid black;">
                <select class="sheet-cell" name="attr_ki_limit2" style="width:140px;">
                    <option value="0" data-i18n="limit-none">None</option>
                    <option value="1" data-i18n="limit-mors">Mors: 20MK</option>
                    <option value="2" data-i18n="limit-cenobus">Cenobus: 20MK</option>
                    <option value="3" data-i18n="limit-caelum">Caelum: 15MK</option>
                    <option value="4" data-i18n="limit-agon">Agon: 20MK</option>
                    <option value="5" data-i18n="limit-custodium">Custodium: 10MK</option>
                    <option value="6" data-i18n="limit-cruor">Cruor: 10MK</option>
                    <option value="7" data-i18n="limit-terminus">Terminus: 10MK</option>
                </select>
            </div>
            </div><!-- end Limit -->
            
            <div class="sheet-wrapper" style="width: 455px;"><!-- Ars Magnus-->
            <div class="sheet-title" data-i18n="ars-magnus">Ars Magnus</div>
                <div class="sheet-dark_row">
                    <div class="sheet-cell" style="width:313px;" data-i18n="name">Name</div>
                    <div class="sheet-cell" data-i18n="development-points">DP</div>
                    <div class="sheet-cell" data-i18n="martial-knowledge">MK</div>
                </div>
                <fieldset class="repeating_arsmagnus">
                    <div class="sheet-clear">
                      <input type="checkbox" name="attr_arsmagnus_option" class="sheet-option"><span class="sheet-option"></span>
                      <div class="sheet-style_row">
                        <input class="sheet-cell" type="text" name="attr_arsmagnus_name" style="width:310px;"/>
                        <input class="sheet-cell" type="number" name="attr_arsmagnus_dpcost" min="0"/>
                        <input class="sheet-cell" type="number" name="attr_arsmagnus_mkcost" min="0" style="margin-right:5px;"/>
                      </div>
                      <div class="sheet-expanded">
                        <div class="sheet-style_row">
                        	<textarea name="attr_arsmagnus_desc" style="width:445px;max-width:100%;height:20px"></textarea>
                        </div>
                      </div>
                    </div>
                </fieldset>
            </div><!-- End Ars Magnus -->
            
            <div class="sheet-wrapper" style="width: 455px;"><!-- Martial Arts -->
            <div class="sheet-title" data-i18n="martial-arts">Martial Arts</div>
                <div class="sheet-dark_row">
                    <div class="sheet-cell" style="width:255px;" data-i18n="martial-art">Martial Art</div>
                    <div class="sheet-cell" style="width:95px;" data-i18n="martial-degree">Degree</div>
                    <div class="sheet-cell" data-i18n="martial-knowledge">MK</div>
                </div>
                <fieldset class="repeating_martialarts">
                    <div class="sheet-clear">
                      <input type="checkbox" name="attr_martialarts_option" class="sheet-option"><span class="sheet-option"></span>
                      <div class="sheet-style_row">
                        <input class="sheet-cell" type="text" name="attr_martialarts_name" style="width:255px;"/>
                        <select class="sheet-cell" name="attr_martialart_degree" style="width:95px;">
                          <option value="0" data-i18n="degree-base">Base</option>
                          <option value="1" data-i18n="degree-advanced">Advanced</option>
                          <option value="2" data-i18n="degree-supreme">Supreme</option>
                          <option value="3" data-i18n="degree-arcane">Arcane</option>
                        </select>
                        <input class="sheet-cell" type="number" name="attr_martialart_mk" min="0" style="margin-right:5px;"/>
                      </div>
                      <div class="sheet-expanded">
                        <div class="sheet-style_row">
                        	<textarea name="attr_martialarts_desc" style="width:445px;max-width:100%;height:20px"></textarea>
                        </div>
                      </div>
                    </div>
                </fieldset>
                <div class="sheet-dark_row" style="padding-top:3px; padding-bottom:3px;">
                    <div class="sheet-cell" style="width:60px;" data-i18n="damage">Damage</div>
                    <div class="sheet-cell" style="width:245px;" data-i18n="multiplier">Multiplier</div>
                    <div class="sheet-cell" style="" data-i18n="final-value">Final</div>
                    <div class="sheet-cell" style="width:80px;" data-i18n="bonus-martial-knowledge">Bonus MK</div>
                </div>
                <div class="sheet-style_row">
                    <input type="number" name="attr_martialart_damage_base" value="0" min="0" style="width:60px;"/>
                    <input type="number" name="attr_martialart_damage_multiplier" value="1" min="1" style=""/>
                    <div class="sheet-cell">X</div>
                    <select name="attr_martialart_damage_scalar" style="width:150px;">
                        <option value="@{str_mod}" data-i18n="strength">Strength</option>
                        <option value="@{pow_mod}" data-i18n="soul-power">Power</option>
                        <option value="@{pow_mod}+2*@{presence}" data-i18n="2presence+power">2xPresence+Power</option>
                        <option value="@{str_mod}+(2*@{target|str_mod})" data-i18n="strength+2target_strength">Str + Target Str x2</option>
                        <option value="@{str_mod}+(4*@{target|str_mod})" data-i18n="strength+4target_strength">Str + Target Str x4</option>
                    </select>
                    <input type="number" name="attr_martialart_damage_final"
                    value="@{martialart_damage_base}+@{aura_extension}+@{increased_damage}+@{martialart_damage_multiplier}*@{martialart_damage_scalar}" disabled="true"/>
                    <input type="number" name="attr_martialarts_mkgained" value="0" style="width:80px;" min="0"/>
                </div>
                <div class="sheet-style_row">
                  <textarea name="attr_martialarts_special" style="width:440px;max-width:100%;height:20px"></textarea>
                </div>
            </div><!--End Martial Arts -->
            
            <div class="sheet-wrapper" style="width: 455px;"><!-- ki creatures -->
            <div class="sheet-title" data-i18n="creatures-known">Creatures Known</div>
                <div class="sheet-dark_row">
                    <div class="sheet-cell" style="width:100px;" data-i18n="creature-name">Creature Name</div>
                    <div class="sheet-cell" style="" data-i18n="level">Level</div>
                    <div class="sheet-cell" style="width:260px;" data-i18n="required-seals">Required Seals</div>
                </div>
                <fieldset class="repeating_kicreatures">
                    <input type="text" name="attr_ki_creaturename" value="" style="width:100px;"/>
                    <input type="number" name="attr_ki_creaturelevel" value="0" min="0"/>
                    <input type="text" name="attr_ki_creatureseals" style="width:260px;"/>
                    <input type="hidden" name="attr_ki_creaturedifficulty" value="10*(@{ki_creaturelevel}-@{character_level})" disabled="true"/>
                    <button type="roll" name="roll_ki_summon" class="sheet-d100-roll-button"
                    value="/em Begins to summon @{ki_creaturename} [[{1d100+?{Modifiers?|0}+@{aap}}>@{ki_creaturedifficulty}]]"
                    value="&{template:ABFdefault} {{title=@{summon-ritual}} {{name=^{ki}}} {{roll=[[{1d100+?{Modifiers?|0}+@{aap}]]}} {{diff=[[@{ki_creaturedifficulty}]]]]}}"></button>
                </fieldset>
            </div><!-- end ki creatures -->
            
            <div class="sheet-wrapper" style="width: 455px;"><!-- ki techniques -->
            <div class="sheet-title" data-i18n="ki-techniques">Ki Techniques</div>
            <fieldset class="repeating_kitechniques">
              <div class="sheet-clear" style="width: 440px;">
              	<input type="checkbox" name="attr_ki_technique_option" class="sheet-option"><span class="sheet-option"></span>
              	<div class="sheet-expanded">
                  <div class="sheet-dark_row" style="padding-top:4px;padding-bottom:3px;">
                    <input type="text" name="attr_ki_technique_name" value="Name" style="width:205px;"/>
                    <div class="sheet-cell" style="width:55px;">Level</div>
                    <input type="number" name="attr_ki_technique_level" min="1" value="1" max="3"/>
                    <div class="sheet-cell" data-i18n="martial-knowledge">MK</div>
                    <input type="number" class="sheet-longbubble"
                    name="attr_ki_technique_cost" min="0" value="0"/>
                  </div>
                  <div class="sheet-dark_row">
                    <div class="sheet-cell" style="width:100px;" data-i18n="action-frequency">Frequency</div>
                    <select name="attr_ki_technique_freq" style="width:100px;">
                        <option value="0" data-i18n="action">Action</option>
                        <option value="1" data-i18n="turn">Turn</option>
                        <option value="2" data-i18n="variable">Variable</option>
                    </select>
                    <div class="sheet-cell" style="width:100px;" data-i18n="related-action">Related Action</div>
                    <select name="attr_ki_technique_action" style="width:100px;">
                        <option value="0" data-i18n="attack">Attack</option>
                        <option value="1" data-i18n="defense">Defense</option>
                        <option value="2" data-i18n="counterattack">Counterattack</option>
                        <option value="3" data-i18n="variable">Variable</option>
                    </select>
                  </div>
                  <div class="sheet-dark_row">
                    <div class="sheet-cell" data-i18n="ki">Ki</div>
                    <div class="sheet-cell" data-i18n="agility-short">AGI</div>
                    <div class="sheet-cell" data-i18n="constitution-short">CON</div>
                    <div class="sheet-cell" data-i18n="dexterity-short">DEX</div>
                    <div class="sheet-cell" data-i18n="strength-short">STR</div>
                    <div class="sheet-cell" data-i18n="soul-power-short">POW</div>
                    <div class="sheet-cell" data-i18n="willpower-short">WP</div>
                  </div>
                  <div class="sheet-style_row">
                    <div class="sheet-cell" style="" data-i18n="use">Use</div>
                    <input type="number" name="attr_ki_technique_agicost" min="0"/>
                    <input type="number" name="attr_ki_technique_concost" min="0"/>
                    <input type="number" name="attr_ki_technique_dexcost" min="0"/>
                    <input type="number" name="attr_ki_technique_strcost" min="0"/>
                    <input type="number" name="attr_ki_technique_powcost" min="0"/>
                    <input type="number" name="attr_ki_technique_wpcost" min="0"/>
                  </div>
                  <div class="sheet-style_row">
                    <div class="sheet-cell" style="" data-i18n="maintenance">Maint.</div>
                    <input type="number" name="attr_ki_technique_agimaint" min="0"/>
                    <input type="number" name="attr_ki_technique_conmaint" min="0"/>
                    <input type="number" name="attr_ki_technique_dexmaint" min="0"/>
                    <input type="number" name="attr_ki_technique_strmaint" min="0"/>
                    <input type="number" name="attr_ki_technique_powmaint" min="0"/>
                    <input type="number" name="attr_ki_technique_wpimaint" min="0"/>
                  </div>
                  <div class="sheet-style_row">
                    <textarea name="attr_ki_technique_desc" style="width:425px;max-width:100%;height:20px"></textarea>
                  </div>
                </div><!-- end expanded -->
                <div class="sheet-compact">
                	<button type="roll" class="sheet-label" name="roll_ki_technique"
                	value="&{template:ABFki} {{title=@{ki_technique_name}}} {{desc=@{ki_technique_desc}}} {{agi_ki=@{ki_technique_agicost}}} {{agi_m=@{ki_technique_agimaint}}} {{con_ki=@{ki_technique_concost}}} {{con_m=@{ki_technique_conmaint}}} {{dex_ki=@{ki_technique_dexcost}}} {{dex_m=@{ki_technique_dexmaint}}} {{str_ki=@{ki_technique_strcost}}} {{str_m=@{ki_technique_strmaint}}} {{pow_ki=@{ki_technique_powcost}}} {{pow_m=@{ki_technique_powmaint}}} {{wp_ki=@{ki_technique_wpcost}}} {{wp_m=@{ki_technique_wpimaint}}}">
                	  <input type="text" name="attr_ki_technique_name" value="Name" style="width:205px;"/>
                	  <div class="sheet-cell" style="width:55px;">Level</div>
                    <input type="number" name="attr_ki_technique_level" min="1" value="1" max="3"/>
                    <div class="sheet-cell" data-i18n="martial-knowledge">MK</div>
                    <input type="number" class="sheet-longbubble"
                    name="attr_ki_technique_cost" min="0" value="0"/>
                	  <br/>
                	  <div class="sheet-cell" data-i18n="ki">Ki</div>
                    <div class="sheet-cell" data-i18n="agility-short">AGI</div>
                    <div class="sheet-cell" data-i18n="constitution-short">CON</div>
                    <div class="sheet-cell" data-i18n="dexterity-short">DEX</div>
                    <div class="sheet-cell" data-i18n="strength-short">STR</div>
                    <div class="sheet-cell" data-i18n="soul-power-short">POW</div>
                    <div class="sheet-cell" data-i18n="willpower-short">WP</div>
                    <br/>
                	  <div class="sheet-cell" style="" data-i18n="use">Use</div>
                	  <input type="number" name="attr_ki_technique_agicost" min="0"/>
                    <input type="number" name="attr_ki_technique_concost" min="0"/>
                    <input type="number" name="attr_ki_technique_dexcost" min="0"/>
                    <input type="number" name="attr_ki_technique_strcost" min="0"/>
                    <input type="number" name="attr_ki_technique_powcost" min="0"/>
                    <input type="number" name="attr_ki_technique_wpcost" min="0"/>
                    <br/>
                    <div class="sheet-cell" style="" data-i18n="maintenance">Maint.</div>
                    <input type="number" name="attr_ki_technique_agimaint" min="0"/>
                    <input type="number" name="attr_ki_technique_conmaint" min="0"/>
                    <input type="number" name="attr_ki_technique_dexmaint" min="0"/>
                    <input type="number" name="attr_ki_technique_strmaint" min="0"/>
                    <input type="number" name="attr_ki_technique_powmaint" min="0"/>
                    <input type="number" name="attr_ki_technique_wpimaint" min="0"/>
                	</button>
                </div><!-- end compact -->
              </div><!-- end clear -->
            </fieldset>
        </div><!-- end ki techniques -->
        </div>
    </div><!-- end column div -->
    
</div>
</div><!-- end Ki page tab-->

<div class="sheet-tab-content sheet-tab5"><!-- armory tab -->
<div class="sheet-page_wrapper sheet-wrapper">
    
<div class="sheet-wrapper" style="top:0px;"><!-- Wear Armor -->
    <div class="sheet-title" style="font-size:1.3em;" data-i18n="wear-armor">Wear Armor</div>
    <div class="sheet-style_row">
        <div class="sheet-cell sheet-sidebubbled" data-i18n="base-value">Base</div>
        <input type="number" name="attr_weararmor_base" value="0" min="0"/>
    </div>
    <div class="sheet-style_row">
        <div class="sheet-cell sheet-sidebubbled" data-i18n="class">Class</div>
        <input type="number" name="attr_weararmor_class" value="0" min="0"/>
    </div>
    <div class="sheet-style_row">
        <div class="sheet-cell sheet-sidebubbled" data-i18n="special-bonus">Spec.</div>
        <input type="number" name="attr_weararmor_special" value="0"/>
    </div>
    <div class="sheet-style_row">
        <div class="sheet-cell sheet-sidebubbled" data-i18n="temporary-bonus">Temp.</div>
        <input type="number" name="attr_weararmor_temp" value="0"/>
    </div>
    <div class="sheet-dark_row" style="padding-top:5px;">
        <div class="sheet-cell sheet-actual_cell" style="font-weight:bold;width:45px;" data-i18n="final-value">Final</div>
        <input type="number" name="attr_weararmor_final" class="sheet-cell"
        value="@{str_mod}+@{weararmor_base}+@{weararmor_special}+@{weararmor_temp}+@{weararmor_class}" disabled="true"/>
    </div>
</div><!-- end Wear Armor -->

<div class="sheet-wrapper"><!-- Armor -->
<div><!-- upper section -->
    <div class="sheet-dark_row">
        <div class="sheet-cell" style="width:200px;" data-i18n="armor">Armor</div>
        <div class="sheet-cell" style="width:80px;" data-i18n="quality">Quality</div>
        <div class="sheet-cell" style="width:100px;" data-i18n="presence">Presence</div>
        <div class="sheet-cell" style="width:100px;" data-i18n="fortitude">Fortitude</div>
        <div class="sheet-cell" style="width:100px;" data-i18n="requirement">Requirement</div>
    </div>
    <div class="sheet-style_row">
        <input type="text" name="attr_armor1_name" value="First Layer" style="width:200px;"/>
        <input type="number" name="attr_armor1_quality" value="0"style="width:80px;"/>
        
        <input type="number" name="attr_armor1_presence_base" value="0" min="0" style="width:50px;"/>
        <input type="number" name="attr_armor1_presence_final" disabled="true" style="width:50px;"
        value="@{armor1_presence_base}+(10*@{armor1_quality})"/>
               
        <input type="number" name="attr_armor1_fort_base" value="0" min="0" style="width:50px;"/>
        <input type="number" name="attr_armor_armor1_fort_final" disabled="true" style="width:50px;"
        value="@{armor1_fort_base}+2*@{armor1_quality}"/>
               
        <input type="number" name="attr_armor1_req_base" value="0" min="0" style="width:50px;"/>
        <input type="number" name="attr_armor1_req_final" disabled="true" style="width:50px;"
        value="((@{armor1_req_base}+(-1*@{armor1_quality}))+abs(@{armor1_req_base}+(-1*@{armor1_quality})))/2"/>
    </div>
    <div class="sheet-style_row">
        <input type="text" name="attr_armor2_name" value="Second Layer" style="width:200px;"/>
        <input type="number" name="attr_armor2_quality" value="0" style="width:80px;"/>
        
        <input type="number" name="attr_armor2_presence_base" value="0" min="0" style="width:50px;"/>
        <input type="number" name="attr_armor2_presence_final" disabled="true" style="width:50px;"
        value="@{armor2_presence_base}+10*@{armor2_quality}"/>
               
        <input type="number" name="attr_armor2_fort_base" value="0" min="0" style="width:50px;"/>
        <input type="number" name="attr_armor2_fort_final" disabled="true" style="width:50px;"
        value="@{armor2_fort_base}+2*@{armor2_quality}"/>
              
        <input type="number" name="attr_armor2_req_base" value="0" min="0" style="width:50px;"/>
        <input type="number" name="attr_armor2_req_final" disabled="true" style="width:50px;"
        value="((@{armor2_req_base}+(-1*@{armor2_quality}))+abs(@{armor2_req_base}+(-1*@{armor2_quality})))/2"/>
    </div>
    <div class="sheet-style_row">
        <input type="text" name="attr_armor3_name" value="Third Layer" style="width:200px;"/>
        <input type="number" name="attr_armor3_quality" value="0" style="width:80px;"/>
        
        <input type="number" name="attr_armor3_presence_base" value="0" min="0" style="width:50px;"/>
        <input type="number" name="attr_armor3_presence_final" disabled="true" style="width:50px;"
        value="@{armor3_presence_base}+10*@{armor3_quality}"/>
               
        <input type="number" name="attr_armor3_fort_base" value="0" min="0" style="width:50px;"/>
        <input type="number" name="attr_armor3_fort_final" disabled="true" style="width:50px;"
        value="@{armor3_fort_base}+2*@{armor3_quality}"/>
        
        <input type="number" name="attr_armor3_req_base" value="0" min="0" style="width:50px;"/>
        <input type="number" name="attr_armor3_req_final" disabled="true" style="width:50px;"
        value="((@{armor3_req_base}+(-1*@{armor3_quality}))+abs(@{armor3_req_base}+(-1*@{armor3_quality})))/2"/>
    </div>
</div> <!-- end upper wrapper -->
<div>
    <div class="sheet-dark_row">
        <div class="sheet-cell" style="width:200px;" data-i18n="armor">Armor</div>
        <div class="sheet-cell" style="" data-i18n="cut">CUT</div>
        <div class="sheet-cell" style="" data-i18n="impact">IMP</div>
        <div class="sheet-cell" style="" data-i18n="thrust">THR</div>
        <div class="sheet-cell" style="" data-i18n="heat">HEA</div>
        <div class="sheet-cell" style="" data-i18n="cold">COL</div>
        <div class="sheet-cell" style="" data-i18n="electricity">ELE</div>
        <div class="sheet-cell" style="" data-i18n="energy">ENE</div>
    </div>
    <div class="sheet-style_row">
        <input type="text" name="attr_armor_layerone_name_ref" value="@{armor1_name}" disabled="true" style="width:200px;"/>
        <input type="number" value="0" min="0" name="attr_at_cut_1"/>
        <input type="number" value="0" min="0" name="attr_at_imp_1"/>
        <input type="number" value="0" min="0" name="attr_at_thr_1"/>
        <input type="number" value="0" min="0" name="attr_at_hea_1"/>
        <input type="number" value="0" min="0" name="attr_at_col_1"/>
        <input type="number" value="0" min="0" name="attr_at_ele_1"/>
        <input type="number" value="0" min="0" name="attr_at_ene_1"/>
    </div>
    <div class="sheet-style_row">
        <input type="text" name="attr_armor_layertwo_name_ref" value="@{armor2_name}" disabled="true" style="width:200px;"/>
        <input type="number" value="0" min="0" name="attr_at_cut_2"/>
        <input type="number" value="0" min="0" name="attr_at_imp_2"/>
        <input type="number" value="0" min="0" name="attr_at_thr_2"/>
        <input type="number" value="0" min="0" name="attr_at_hea_2"/>
        <input type="number" value="0" min="0" name="attr_at_col_2"/>
        <input type="number" value="0" min="0" name="attr_at_ele_2"/>
        <input type="number" value="0" min="0" name="attr_at_ene_2"/>
    </div>
    <div class="sheet-style_row">
        <input type="text" name="attr_armor_layerthree_name_ref" value="@{armor3_name}" disabled="true" style="width:200px;"/>
        <input type="number" value="0" min="0" name="attr_at_cut_3"/>
        <input type="number" value="0" min="0" name="attr_at_imp_3"/>
        <input type="number" value="0" min="0" name="attr_at_thr_3"/>
        <input type="number" value="0" min="0" name="attr_at_hea_3"/>
        <input type="number" value="0" min="0" name="attr_at_col_3"/>
        <input type="number" value="0" min="0" name="attr_at_ele_3"/>
        <input type="number" value="0" min="0" name="attr_at_ene_3"/>
    </div>
    <fieldset class="repeating_armorlayer">
        <input type="text" name="attr_armorlayer_name" value="Free Layer" style="width:200px;"/>
        <input type="number" value="0" min="0" name="attr_armorlayer_cut"/>
        <input type="number" value="0" min="0" name="attr_armorlayer_imp"/>
        <input type="number" value="0" min="0" name="attr_armorlayer_thr"/>
        <input type="number" value="0" min="0" name="attr_armorlayer_hea"/>
        <input type="number" value="0" min="0" name="attr_armorlayer_col"/>
        <input type="number" value="0" min="0" name="attr_armorlayer_ele"/>
        <input type="number" value="0" min="0" name="attr_armorlayer_ene"/>
    </fieldset>
    <div class="sheet-dark_row" style="padding-top:3px;">
        <div class="sheet-cell" style="width:200px; font-weight:bold;" data-i18n="final-armor-type">Final AT</div>
        <input type="number" value="0" min="0" name="attr_at_cut_final"/>
        <input type="number" value="0" min="0" name="attr_at_imp_final"/>
        <input type="number" value="0" min="0" name="attr_at_thr_final"/>
        <input type="number" value="0" min="0" name="attr_at_hea_final"/>
        <input type="number" value="0" min="0" name="attr_at_col_final"/>
        <input type="number" value="0" min="0" name="attr_at_ele_final"/>
        <input type="number" value="0" min="0" name="attr_at_ene_final"/>
    </div>
</div> <!-- end lower wrapper -->
</div> <!-- end armor -->
<div class="sheet-wrapper"> <!-- weapon proficiencies -->
<div class="sheet-title" data-i18n="proficiencies">Proficiencies</div>
<div class="sheet-dark_row">
    <div class="sheet-cell" style="width:120px;" data-i18n="proficiency-name">Proficiency name</div>
    <div class="sheet-cell" style="width:120px;" data-i18n="type">Type</div>
    <div class="sheet-cell" style="" data-i18n="cost">Cost</div>
</div>
<fieldset class="repeating_weaponpoficiencies">
    <input type="text" name="attr_weaponprof_name" style="width:120px;"/>
    <select name="attr_weaponprof_class" style="width:120px;">
        <option value="0" data-i18n="proficiency-starting">Starting</option>
        <option value="1" data-i18n="proficiency-similar">Similar</option>
        <option value="2" data-i18n="proficiency-mixed-class">Mixed Class</option>
        <option value="3" data-i18n="proficiency-different Type">Different Type</option>
        <option value="4" data-i18n="proficiency-whole-class">Whole Class</option>
        <option value="5" data-i18n="proficiency-archetype">Archetype</option>
        <option value="6" data-i18n="proficiency-style">Style</option>
        <option value="7" data-i18n="proficiency-mystical">Mystical</option>
        <option value="8" data-i18n="proficiency-psychic">Psychic</option>
        <option value="9">- - -</option>
    </select>
    <input type="number" name="attr_weaponprof_cost" min="0" value="0"/>
</fieldset>
</div><!-- end proficiencies -->

<div class="sheet-wrapper" style="width:470px;"><!-- weapons -->
    <div class="sheet-title" data-i18n="attacks">Attacks</div>
    <fieldset class="repeating_weapons">
      <div class="sheet-cear">
      <input type="checkbox" name="attr_weapon_option" class="sheet-option"><span class="sheet-option"></span>
      <div class="sheet-compact" style="width: 460px;">
      	<div class="sheet-style_row">
          <button type="roll" class="sheet-label" name="roll_agi"
          value="&{template:ABFweapon} {{title=@{weapon_name}}} {{desc=@{weapon_properties}}} {{fortitude=@{weapon_finalfort}}} {{presence=@{weapon_finalpresence}}} {{quality=@{weapon_quality}}} {{breakage=[^{breakage}](~repeating_weapons_weapon_breakage)}} {{speed=@{weapon_finalspeed}}} {{damage=@{weapon_finaldmg}}} {{primary=@{weapon_primary}}} {{secondary=@{weapon_secondary}}} {{attack=[^{attack}](~repeating_weapons_weapon_attack)}} {{block=[^{block}](~repeating_weapons_weapon_block)}} {{dodge=[^{dodge}](~repeating_weapons_weapon_dodge)}}">
    	      <input type="text" name="attr_weapon_name" value="Name" style="width:420px;"/>
    	    </button>
    	  </div>
      </div>
      <div class="sheet-expanded" style="width: 460px;">
        <div class="sheet-style_row">
            <input type="text" name="attr_weapon_name" value="Name" style="width:420px;"/>
        </div>
        <div class="sheet-dark_row sheet-clear">
            <div class="sheet-cell" style="width:125px;" data-i18n="attack">Attack</div>
            <div class="sheet-cell" style="width: 60px;" data-i18n="shield">Shield</div>
            <div class="sheet-cell" style="width:130px;" data-i18n="block">Block</div>
            <div class="sheet-cell" style="width:130px;" data-i18n="dodge">Dodge</div>
        </div>
        <div class="sheet-style_row">
            <input type="number" value="0" name="attr_weapon_attackmod"/>
            <input type="number" disabled="true" name="attr_weapon_attack" value="@{weapon_quality}+@{attack_final}+@{weapon_attackmod}"/>
            <button type="roll" name="roll_weapon_attack" class="sheet-d100-roll-button" value="&{template:ABFdefault} {{title=@{weapon_name}}} {{name=^{attack}}} {{roll=[[1d100+[[@{weapon_attack}]]++15*?{Fatigue?|0}+?{Modifiers?|0}]]}}"></button>
            <select name="attr_weapon_shieldval" style="width:65px;">
                <option value="0" data-i18n="not-available">N/A</option>
                <option value="10" data-i18n="buckler">Buckler</option>
                <option value="20" data-i18n="shield">Shield</option>
                <option value="30" data-i18n="full-shield">F.Sheild</option>
            </select>
            <input type="number" value="0" name="attr_weapon_blockmod"/>
            <input type="number" disabled="true" name="attr_weapon_block" value="@{weapon_quality}+@{weapon_shieldval}+(@{block_final})+@{weapon_blockmod}"/>
            <button type="roll" name="roll_weapon_block" class="sheet-d100-roll-button" value="&{template:ABFdefault} {{title=@{weapon_name}}} {{name=^{block}}} {{roll=[[1d100+@{weapon_block}+15*?{Fatigue?|0}+?{Modifiers?|0}]]}}"></button>
            <input type="number" value="0" name="attr_weapon_dodgemod"/>
            <input type="number" disabled="true" name="attr_weapon_dodge" value="(@{dodge_final})+@{weapon_dodgemod}"/>
            <button type="roll" name="roll_weapon_dodge" class="sheet-d100-roll-button" value="&{template:ABFdefault} {{title=@{weapon_name}}} {{name=^{dodge}}} {{roll=[[1d100+@{weapon_dodge}+15*?{Fatigue?|0}+?{Modifiers?|0}]]}}"></button>
        </div>
        <div class="sheet-dark_row">
            <div class="sheet-cell" style="width:65px;" data-i18n="primary">Primary</div>
            <div class="sheet-cell" style="width:65px;" data-i18n="secondary">Secondary</div>
            <div class="sheet-cell" style="width:90px;" data-i18n="damage">Dmg.</div>
            <div class="sheet-cell" style="width:30px;" data-i18n="two-handed">2H</div>
            <div class="sheet-cell" style="width:90px;" data-i18n="strength-short">STR</div>
            <div class="sheet-cell" style="" data-i18n="final-value">Final</div>
        </div>
        <div class="sheet-style_row"> 
            <select name="attr_weapon_primary" style="width:65px;">
                <option value="0" data-i18n="cut">CUT</option>
                <option value="2" data-i18n="impact">IMP</option>
                <option value="1" data-i18n="thrust">THR</option>
                <option value="3" data-i18n="heat">HEA</option>
                <option value="4" data-i18n="cold">COL</option>
                <option value="5" data-i18n="electricity">ELE</option>
                <option value="6" data-i18n="energy">ENE</option>
            </select>
            <select name="attr_weapon_secondary" style="width:65px;">
                <option value="0" data-i18n="not-available">N/A</option>
                <option value="1" data-i18n="cut">CUT</option>
                <option value="3" data-i18n="impact">IMP</option>
                <option value="2" data-i18n="thrust">THR</option>
                <option value="4" data-i18n="heat">HEA</option>
                <option value="5" data-i18n="cold">COL</option>
                <option value="6" data-i18n="electricity">ELE</option>
                <option value="7" data-i18n="energy">ENE</option>
            </select>
            <input type="number" name="attr_weapon_basedmg" value="0" min="0">
            <div class="sheet-cell" style="font-size:12pt;font-weight:bold;">+</div>
            <input type="checkbox" class="sheet-weapon_input" name="attr_weapon_twohanded"
            style="margin-left:7px;" value="1"/>
            <select name="attr_weapon_strbonus" style="width:80px;">selected="true"
                <option value="(0)" data-i18n="not-available">N/A</option>
                <option value="@{agi_mod})" data-i18n="agility">Agility</option>
                <option value="@{con_mod}" data-i18n="constitution">Constitution</option>
                <option value="@{dex_mod}" data-i18n="dexterity">Dexterity</option>
                <option value="@{str_mod}" data-i18n="strength" selected="true">Strength</option>
                <option value="@{int_mod}" data-i18n="intelligence">Intelligence</option>
                <option value="@{per_mod}" data-i18n="perception">Perception</option>
                <option value="@{pow_mod}" data-i18n="soul-power">Power</option>
                <option value="@{wp_mod}" data-i18n="willpower">Willpower</option>
                <option value="@{pow_mod}+2*@{presence}" data-i18n="2presence+power">2xPresence+Power</option>
                <option value="@{str_mod}+(2*@{target|str_mod})" data-i18n="strength+2target_strength">Str + Target Str x2</option>
                <option value="@{str_mod}+(4*@{target|str_mod})" data-i18n="strength+4target_strength">Str + Target Str x4</option>
                <option value="-30">1 <span data-i18n="strength-short">STR</span></option>
                <option value="-20">2 <span data-i18n="strength-short">STR</span></option>
                <option value="-10">3 <span data-i18n="strength-short">STR</span></option>
                <option value="-5">4 <span data-i18n="strength-short">STR</span></option>
                <option value="0">5 <span data-i18n="strength-short">STR</span></option>
                <option value="5">6-7 <span data-i18n="strength-short">STR</span></option>
                <option value="10">8-9 <span data-i18n="strength-short">STR</span></option>
                <option value="15">10 <span data-i18n="strength-short">STR</span></option>
                <option value="20">11-12 <span data-i18n="strength-short">STR</span></option>
                <option value="25">13-14 <span data-i18n="strength-short">STR</span></option>
                <option value="30">15 <span data-i18n="strength-short">STR</span></option>
                <option value="35">16-17 <span data-i18n="strength-short">STR</span></option>
                <option value="40">18-19 <span data-i18n="strength-short">STR</span></option>
                <option value="45">20 <span data-i18n="strength-short">STR</span></option>
            </select>
            <div class="sheet-cell" style="font-size:12pt;font-weight:bold;">=</div>
            <input type="number" disabled="true" name="attr_weapon_finaldmg"
            value="@{weapon_basedmg}+@{weapon_strbonus}+@{weapon_twohanded}*@{weapon_strbonus}+2*@{weapon_quality}+@{aura_extension}+@{increased_damage}"/>
        </div>
        <div class="sheet-dark_row">
            <div class="sheet-cell" style="width:90px;" data-i18n="fortitude">Fortitude</div>
            <div class="sheet-cell" style="width:100px;" data-i18n="breakage">Breakage</div>
            <div class="sheet-cell" style="width:100px;" data-i18n="strength-short">STR</div>
            <div class="sheet-cell" style="width:110px;" data-i18n="final-breakage">Final Breakage</div>
        </div>
        <div class="sheet-style_row">
            <input type="number" name="attr_weapon_basefort" value="0" min="0"/>
            <input type="number" disabled="true" name="attr_weapon_finalfort"
            value="2*@{weapon_quality}+@{weapon_basefort}+@{aura_extension}"/>
            <input type="number" name="attr_weapon_basebreakage" value="0"/>
            <div class="sheet-cell" style="font-size:12pt;font-weight:bold;">+</div>
            <select name="attr_weapon_strbreakage" style="width:75px;">
                    <option value="0">1-8</option>
                    <option value="1">8-9</option>
                    <option value="2">10</option>
                    <option value="4">11-12</option>
                    <option value="6">13-14</option>
                    <option value="8">15+</option>
                </select>
            <div class="sheet-cell" style="font-size:12pt;font-weight:bold;">=</div>
            <input type="number" name="attr_weapon_finalbreakage" disabled="true"
            value="@{weapon_basebreakage}+@{weapon_strbreakage}+@{weapon_quality}+@{aura_extension}/2"> 
            <button type="roll" name="roll_weapon_breakage" class="sheet-d100-roll-button" value="&{template:ABFdefault} {{title=@{weapon_name}}} {{name=^{breakage}}} {{roll=[[1d10+@{weapon_finalbreakage}]]}}"></button>
        </div>
        <div class="sheet-dark_row" style="padding-top:4px; padding-bottom:2px;">
            <div class="sheet-cell" data-i18n="quality">Quality</div>
            <input type="number" name="attr_weapon_quality" value="0" style="width:55px;"/>
            <div class="sheet-cell" style="width:90px;"  data-i18n="presence">Presence</div>
            <input type="number" value="0" min="0" name="attr_weapon_basepresence"/>
            <input type="number" min="0" name="attr_weapon_finalpresence" disabled="true" value="@{weapon_basepresence}+10*@{weapon_quality}"/>
            <div class="sheet-cell" data-i18n="speed">Speed</div>
            <input type="number" value="0" name="attr_weapon_basespeed"/>
            <input type="number" disabled="true" name="attr_weapon_finalspeed" value="@{weapon_quality}+@{weapon_basespeed}"/>
        </div>
        <div class="sheet-dark_row" style="padding-top:4px; padding-bottom:2px;">
            <textarea name="attr_weapon_properties" style="width:445px;max-width:100%;height:20px"></textarea>
        </div>
      </div><!-- end expanded weapon -->
      </div>
    </fieldset>
</div><!-- end weapons -->
</div>
</div><!-- end armory page tab -->

<!-- Templates -->
<!-- Initiative Template -->
<rolltemplate class="sheet-rolltemplate-ABFini">
  <table>
		<tr><th colspan="2">{{name}}</th></tr>
		<tr>
		  <td style="width:80px;"><span class="sheet-sidebubbled">{{desc}}</span></td>
		  <td>{{roll}}</td>
		</tr>
  </table>
</rolltemplate>
<!-- End of Initiative Template -->

<!-- Spell Template -->
<rolltemplate class="sheet-rolltemplate-ABFspell">
  <table>
    <tr><th colspan="3">{{name}}</th></tr>
    <tr><th colspan="3">{{path}}</th></tr>
    <tr>
      <th colspan="1"><span data-i18n="level">Level</span> {{level}}</th>
      <th colspan="2"><span data-i18n="spell-mastery">Mastery</span> {{mastery}}</th>
    </tr>
		<tr><td colspan="3">{{desc}}</td></tr>
		<tr>
      <th colspan="1"><span data-i18n="maintanance">Maint.</span> {{maint}}</th>
      <th colspan="2"><span data-i18n="type">Type</span> {{type}}</th>
    </tr>
    <tr>
      <th colspan="3">{{projection}}</th>
    </tr>
{{#rollTotal() system 0}}
		<tr>
		  <th colspan="3">
		    <span class="sheet-sidebubbled">
		      {{basic_roll_name}}
		    </span>
		  </th>
		</tr>
		<tr style="text-align:center;">
		  <td data-i18n="requirement-short">Req.</td>
		  <td data-i18n="zeon">Zeon</td>
		  <td data-i18n="maintanance-short">Ma.</td>
		</tr>
		<tr style="text-align:center;">
		  <td>{{basic_req}}</td>
		  <td>{{basic_zeon}}</td>
		  <td>{{basic_maint}}</td>
		</tr>
		<tr>
		  <td colspan="3">{{basic_desc}}</td>
		</tr>
		<tr>
		  <th colspan="3">
		    <span class="sheet-sidebubbled">
		      {{inter_roll_name}}
		    </span>
		  </th>
		</tr>
		<tr style="text-align:center;">
		  <td data-i18n="requirement-short">Req.</td>
		  <td data-i18n="zeon">Zeon</td>
		  <td data-i18n="maintanance-short">Ma.</td>
		</tr>
		<tr style="text-align:center;">
		  <td>{{inter_req}}</td>
		  <td>{{inter_zeon}}</td>
		  <td>{{inter_maint}}</td>
		</tr>
		<tr>
		  <td colspan="3">{{inter_desc}}</td>
		</tr>
		<tr>
		  <th colspan="3">
		    <span class="sheet-sidebubbled">
		      {{advan_roll_name}}
		    </span>
		  </th>
		</tr>
		<tr style="text-align:center;">
		  <td data-i18n="requirement-short">Req.</td>
		  <td data-i18n="zeon">Zeon</td>
		  <td data-i18n="maintanance-short">Ma.</td>
		</tr>
		<tr style="text-align:center;">
		  <td>{{advan_req}}</td>
		  <td>{{advan_zeon}}</td>
		  <td>{{advan_maint}}</td>
		</tr>
		<tr>
		  <td colspan="3">{{advan_desc}}</td>
		</tr>
		<tr>
		  <th colspan="3">
		    <span class="sheet-sidebubbled">
		      {{arcan_roll_name}}
		    </span>
		  </th>
		</tr>
		<tr style="text-align:center;">
		  <td data-i18n="requirement-short">Req.</td>
		  <td data-i18n="zeon">Zeon</td>
		  <td data-i18n="maintanance-short">Ma.</td>
		</tr>
		<tr style="text-align:center;">
		  <td>{{arcan_req}}</td>
		  <td>{{arcan_zeon}}</td>
		  <td>{{arcan_maint}}</td>
		</tr>
		<tr>
		  <td colspan="3">{{arcan_desc}}</td>
		</tr>
{{/rollTotal() system 0}}
{{#rollTotal() system 1}}
		<tr>
		  <td>
		    <span data-i18n="base-zeon">Base Zeon</span>
		    <span class="sheet-zeon">{{zeon}}</span>
		  </td>
		  <td colspan="2">
		    <span data-i18n="maximum-zeon">Max. Zeon</span>
		    <span class="sheet-zeon">{{zeon-max}}</span>
		  </td>
		</tr>
		<tr>
		  <td colspan="3">
		    <span>
		      {{old_roll_name}}
		    </span>
		  </td>
		</tr>
{{/rollTotal() system 1}}
  </table>
</rolltemplate>
<!-- End of Spell Template -->

<!-- Old-System Spell Template -->
<rolltemplate class="sheet-rolltemplate-ABFspellOld">
  <table>
		<tr style="text-align:center;">
{{#addef1_name}}
		  <th>{{addef1_name}}</th>
{{/addef1_name}}
{{#addef2_name}}
		  <th>{{addef2_name}}</th>
{{/addef2_name}}
{{#addef3_name}}
		  <th>{{addef3_name}}</th>
{{/addef3_name}}
{{#addef4_name}}
		  <th>{{addef4_name}}</th>
{{/addef4_name}}
		</tr>
		<tr style="text-align:center;">
{{#addef1_name}}
		  <td>{{addef1_roll}}</td>
{{/addef1_name}}
{{#addef2_name}}
		  <td>{{addef2_roll}}</td>
{{/addef2_name}}
{{#addef3_name}}
		  <td>{{addef3_roll}}</td>
{{/addef3_name}}
{{#addef4_name}}
		  <td>{{addef4_roll}}</td>
{{/addef4_name}}
		</tr>
		<tr>
		  <td colspan="4">
		    <span data-i18n="zeon">Zeon</span>
		    <span class="sheet-zeon">{{zeon}}</span>
		  </td>
		</tr>
  </table>
</rolltemplate>
<!-- End of Old-System Spell Template -->

<!-- Default Template -->
<rolltemplate class="sheet-rolltemplate-ABFdefault">
  <table>
{{#title}}
		<tr><th colspan="2">{{title}}</th></tr>
{{/title}}
{{#name}}
		<tr>
{{#roll}}
      <td style="width:80px;"><span class="sheet-sidebubbled">{{name}}</span></td>
		  <td>{{roll}}</td>
{{/roll}}
{{^roll}}
      <td><span class="sheet-sidebubbled" colspan="2">{{name}}</span></td>
{{/roll}}
		</tr>
{{/name}}
{{^name}}
{{#roll}}
		<tr>
		  <td colspan="2">{{roll}}</td>
		</tr>
{{/roll}}
{{/name}}
{{#diff}}
		<tr>
		  <td colspan="2" style="text-align:right;"><span>VS</span> {{diff}}</td>
		</tr>
{{/diff}}
{{#cost}}
		<tr>
		  <td colspan="2">{{cost}}</td>
		</tr>
{{/cost}}
{{#desc}}
		<tr>
		  <td colspan="2">{{desc}}</td>
		</tr>
{{/desc}}
  </table>
</rolltemplate>
<!-- End of Default Template -->

<!-- Psychic Template -->
<rolltemplate class="sheet-rolltemplate-ABFpsi">
  <table>
		<tr><th colspan="3">{{title}}</th></tr>
		<tr>
		  <td colspan="3">{{desc}}</td>
		</tr>
		<tr>
		  <th colspan="1" data-i18n="difficulty-short" style="width:80px;">Diff.</th>
		  <th colspan="2" data-i18n="effect">Effect</th>
		</tr>
{{#diff20}}
		<tr>
		  <td colspan="1" style="width:80px;">20</td>
		  <td colspan="2">{{diff20}}</td>
		</tr>
{{/diff20}}
{{#diff40}}
		<tr>
		  <td colspan="1" style="width:80px;">40</td>
		  <td colspan="2">{{diff40}}</td>
		</tr>
{{/diff40}}
{{#diff80}}
		<tr>
		  <td colspan="1" style="width:80px;">80</td>
		  <td colspan="2">{{diff80}}</td>
		</tr>
{{/diff80}}
{{#diff120}}
		<tr>
		  <td colspan="1" style="width:80px;">120</td>
		  <td colspan="2">{{diff120}}</td>
		</tr>
{{/diff120}}
{{#diff140}}
		<tr>
		  <td colspan="1" style="width:80px;">140</td>
		  <td colspan="2">{{diff140}}</td>
		</tr>
{{/diff140}}
{{#diff180}}
		<tr>
		  <td colspan="1" style="width:80px;">180</td>
		  <td colspan="2">{{diff180}}</td>
		</tr>
{{/diff180}}
{{#diff240}}
		<tr>
		  <td colspan="1" style="width:80px;">240</td>
		  <td colspan="2">{{diff240}}</td>
		</tr>
{{/diff240}}
{{#diff280}}
		<tr>
		  <td colspan="1" style="width:80px;">280</td>
		  <td colspan="2">{{diff280}}</td>
		</tr>
{{/diff280}}
{{#diff320}}
		<tr>
		  <td colspan="1" style="width:80px;">320</td>
		  <td colspan="2">{{diff320}}</td>
		</tr>
{{/diff320}}
{{#diff440}}
		<tr>
		  <td colspan="1" style="width:80px;">440</td>
		  <td colspan="2">{{diff440}}</td>
		</tr>
{{/diff440}}
    <tr>
		  <th>{{projection}}</th>
      <th>{{potential}}</th>
      <th>{{potential-round}} <span data-i18n="psychic-potential">Potential</span></th>
		</tr>
  </table>
</rolltemplate>
<!-- End of Psychic Template -->
<!-- Ki Template -->
<rolltemplate class="sheet-rolltemplate-ABFki">
  <table>
		<tr><th colspan="2">{{title}}</th></tr>
		<tr>
		  <td colspan="2">
{{#agi_ki}}
		    <div style="display:inline-block;width:34px;">
		      <span data-i18n="agility-short">AGI</span><br/>
		      {{agi_ki}}<br/>
		      {{agi_m}}
		    </div>
{{/agi_ki}}
{{#con_ki}}
		    <div style="display:inline-block;width:34px;">
		      <span data-i18n="constitution-short">CON</span><br/>
		      {{con_ki}}<br/>
		      {{con_m}}
		    </div>
{{/con_ki}}
{{#dex_ki}}
		    <div style="display:inline-block;width:34px;">
		      <span data-i18n="dexterity-short">DEX</span><br/>
		      {{dex_ki}}<br/>
		      {{dex_m}}
		    </div>
{{/dex_ki}}
{{#str_ki}}
		    <div style="display:inline-block;width:34px;">
		      <span data-i18n="strength-short">STR</span><br/>
		      {{str_ki}}<br/>
		      {{str_m}}
		    </div>
{{/str_ki}}
{{#pow_ki}}
		    <div style="display:inline-block;width:34px;">
		      <span data-i18n="soul-power-short">POW</span><br/>
		      {{pow_ki}}<br/>
		      {{pow_m}}
		    </div>
{{/pow_ki}}
{{#wp_ki}}
		    <div style="display:inline-block;width:34px;">
		      <span data-i18n="willpower-short">WP</span><br/>
		      {{wp_ki}}<br/>
		      {{wp_m}}
		    </div>
{{/wp_ki}}
		  </td>
		</tr>
		<tr>
		  <td colspan="2">{{desc}}</td>
		</tr>
  </table>
</rolltemplate>
<!-- End of Ki Template -->
<!-- Weapon Template -->
<rolltemplate class="sheet-rolltemplate-ABFweapon">
  <table>
		<tr><th colspan="2">{{title}}</th></tr>
		<tr>
		  <th>
		    <span data-i18n="quality">Quality</span>: {{quality}}
		  </th>
		  <th>
		    <span data-i18n="presence">Presence</span>: {{presence}}
		  </th>
		</tr>
		<tr>
		  <th>
		    <span data-i18n="fortitude">Fortitude</span>: {{fortitude}}
		  </th>
		  <th>
		    {{breakage}}
		  </th>
		</tr>
		<tr>
		  <td>
		    <span data-i18n="damage">Damage</span>: {{damage}}
		  </td>
		  <td>
		    <span data-i18n="speed">Speed</span>: {{speed}}
		  </td>
		</tr>
		<tr>
		  <td>
		    <span data-i18n="primary">Primary</span>: {{primary}}
		  </td>
		  <td>
		    <span data-i18n="secondary">Secondary</span>: {{secondary}}
		  </td>
		</tr>
		<tr>
		  <td colspan="2">{{desc}}</td>
		</tr>
		<tr>
		  <th colspan="2"><span>{{attack}}</span><span>{{block}}</span><span>{{dodge}}</span></th>
		</tr>
  </table>
</rolltemplate>
<!-- End of Weapon Template -->
<!-- End of Templates -->

<!-- Sheet Workers -->
<script type="text/worker">
    var sheetName = 'Anima Beyond Fantasy';
    var sheetVersion = '1.0.0';

    on('sheet:opened', function(){
        getAttrs(['character_sheet'],function(attrs){
            let cs=_.rest((attrs.character_sheet||'').match(/(.*?)(?:\s+v(.*))?$/)),
                sheet_name=cs[0]||'',
                sheet_version=cs[1]||'';

            // do something with sheet_name and sheet_version, if you might be converting
						if(sheet_name == ""){	// Convert to Version 1.0.0
                convert100();
						}

            if(sheet_name !== sheetName || (sheetVersion && (sheet_version !== sheetVersion))){
                setAttrs({
                    character_sheet: (sheetName||'NOT SET')+(sheetVersion?(' v'+sheetVersion):'')
                },{silent:true});   
            }
        });
    });
    
    var convert100 = function() {
        getSectionIDs("repeating_kitechniques", function(idarray) {
            if(idarray.length > 0) {
                _.each(idarray, function(currentID, i) {
                    getAttrs(["repeating_kitechniques_" + currentID + "_ki_technique_effect1","repeating_kitechniques_" + currentID + "_ki_technique_effect2","repeating_kitechniques_" + currentID + "_ki_technique_effect3","repeating_kitechniques_" + currentID + "_ki_technique_effect4","repeating_kitechniques_" + currentID + "_ki_technique_effect5","repeating_kitechniques_" + currentID + "_ki_technique_effect6"], function(x) {
                        var update = {};
                        update["repeating_kitechniques_" + currentID + "_ki_technique_desc"] = "";
                        if(x["repeating_kitechniques_" + currentID + "_ki_technique_effect1"]) {
                            update["repeating_kitechniques_" + currentID + "_ki_technique_desc"] += x["repeating_kitechniques_" + currentID + "_ki_technique_effect1"]+"\n";
                        }
                        if(x["repeating_kitechniques_" + currentID + "_ki_technique_effect2"]) {
                            update["repeating_kitechniques_" + currentID + "_ki_technique_desc"] += x["repeating_kitechniques_" + currentID + "_ki_technique_effect2"]+"\n";
                        }
                        if(x["repeating_kitechniques_" + currentID + "_ki_technique_effect3"]) {
                            update["repeating_kitechniques_" + currentID + "_ki_technique_desc"] += x["repeating_kitechniques_" + currentID + "_ki_technique_effect3"]+"\n";
                        }
                        if(x["repeating_kitechniques_" + currentID + "_ki_technique_effect4"]) {
                            update["repeating_kitechniques_" + currentID + "_ki_technique_desc"] += x["repeating_kitechniques_" + currentID + "_ki_technique_effect4"]+"\n";
                        }
                        if(x["repeating_kitechniques_" + currentID + "_ki_technique_effect5"]) {
                            update["repeating_kitechniques_" + currentID + "_ki_technique_desc"] += x["repeating_kitechniques_" + currentID + "_ki_technique_effect5"]+"\n";
                        }
                        if(x["repeating_kitechniques_" + currentID + "_ki_technique_effect6"]) {
                            update["repeating_kitechniques_" + currentID + "_ki_technique_desc"] += x["repeating_kitechniques_" + currentID + "_ki_technique_effect6"]+"\n";
                        }
                        setAttrs(update);
                    });
                })
            }
        });
        
        getSectionIDs("repeating_rangedweapons", function(idarray) {
            if(idarray.length > 0) {
                _.each(idarray, function(currentID, i) {
                    getAttrs(["repeating_rangedweapons_" + currentID + "_rangedweapon_name","repeating_rangedweapons_" + currentID + "_rangedweapon_quality","repeating_rangedweapons_" + currentID + "_rangedweapon_basespeed","repeating_rangedweapons_" + currentID + "_rangedweapon_primary","repeating_rangedweapons_" + currentID + "_rangedweapon_secondary","repeating_rangedweapons_" + currentID + "_rangedweapon_basedmg","repeating_rangedweapons_" + currentID + "_rangedweapon_strbonus","repeating_rangedweapons_" + currentID + "_rangedweapon_basefort","repeating_rangedweapons_" + currentID + "_rangedweapon_basebreakage","repeating_rangedweapons_" + currentID + "_rangedweapon_strbreakage","repeating_rangedweapons_" + currentID + "_rangedweapon_basepresence","repeating_rangedweapons_" + currentID + "_rangedweapon_properties"], function(x) {
                        var newrowid = generateRowID();
                        var newrowattrs = {};
                        newrowattrs["repeating_weapons_" + newrowid + "_weapon_name"] = x["repeating_rangedweapons_" + currentID + "_rangedweapon_name"];
                        newrowattrs["repeating_weapons_" + newrowid + "_weapon_quality"] = x["repeating_rangedweapons_" + currentID + "_rangedweapon_quality"];
                        newrowattrs["repeating_weapons_" + newrowid + "_weapon_basespeed"] = x["repeating_rangedweapons_" + currentID + "_rangedweapon_basespeed"];
                        newrowattrs["repeating_weapons_" + newrowid + "_weapon_primary"] = x["repeating_rangedweapons_" + currentID + "_rangedweapon_primary"];
                        newrowattrs["repeating_weapons_" + newrowid + "_weapon_secondary"] = x["repeating_rangedweapons_" + currentID + "_rangedweapon_secondary"];
                        newrowattrs["repeating_weapons_" + newrowid + "_weapon_basedmg"] = x["repeating_rangedweapons_" + currentID + "_rangedweapon_basedmg"];
                        newrowattrs["repeating_weapons_" + newrowid + "_weapon_strbonus"] = x["repeating_rangedweapons_" + currentID + "_rangedweapon_strbonus"];
                        newrowattrs["repeating_weapons_" + newrowid + "_weapon_basefort"] = x["repeating_rangedweapons_" + currentID + "_rangedweapon_basefort"];
                        newrowattrs["repeating_weapons_" + newrowid + "_weapon_basebreakage"] = x["repeating_rangedweapons_" + currentID + "_rangedweapon_basebreakage"];
                        newrowattrs["repeating_weapons_" + newrowid + "_weapon_strbreakage"] = x["repeating_rangedweapons_" + currentID + "_rangedweapon_strbreakage"];
                        newrowattrs["repeating_weapons_" + newrowid + "_weapon_basepresence"] = x["repeating_rangedweapons_" + currentID + "_rangedweapon_basepresence"];
                        newrowattrs["repeating_weapons_" + newrowid + "_weapon_properties"] = x["repeating_rangedweapons_" + currentID + "_rangedweapon_properties"];
                        
                        setAttrs(newrowattrs);
                    });
                })
            }
        });
    }
</script>
<!-- End of Sheet Workers -->
